{"version":3,"sources":["src/utils/Logger.ts","node_modules/moment/locale sync /^/.//.*$"],"names":["Logger","entry","appendFile","logFilePath","JSON","stringify","catch","err","console","log","hasLoggedBasicDeviceInfo","type","appBuildNumber","DeviceInfo","getBuildNumber","appBuildVariant","Config","VARIANT","appVersion","version","appVersionBinary","getVersion","osApiLevel","getApiLevelSync","osName","getSystemName","getBaseOsSync","osVersion","getSystemVersion","theme","store","getState","session","config","writeToFile","logBasicDeviceInfo","parseInt","ENABLE_DEBUG_OPTIONS","endpoint","includes","logRequest","error","logsDirectoryPath","getDocumentsPath","moment","format","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports"],"mappings":"60BAMkD,IA2B7BA,EAAM,oCAyExB,MA7BA,EApBA,EAxBwB,EAqFxB,OArFwB,6CAoBzB,UAAyBC,SACjBC,YAAWF,EAAOG,YAAaC,KAAKC,UAAUJ,GAAS,MAAMK,OACjE,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,SAEtB,sFAKD,YACE,IAAIP,EAAOU,yBAAX,CACA,IAAMT,EAAiC,CACrCU,KAAM,cACNC,eAAgBC,IAAWC,iBAC3BC,gBAAiBC,IAAOC,SAAW,GACnCC,WAAYC,EAAQA,QACpBC,iBAAkBP,IAAWQ,aAC7BC,WAAYT,IAAWU,kBACvBC,OAAQX,IAAWY,iBAAmBZ,IAAWa,gBACjDC,UAAWd,IAAWe,mBACtBC,MAAOC,IAAMC,WAAWC,QAAQC,OAAOJ,aAEnC7B,EAAOkC,YAAYjC,GACzBD,EAAOU,0BAA2B,MACnC,6EAQD,UAAwBT,SAChBD,EAAOmC,qBAERC,SAASpB,IAAOqB,qBAAuB,MAExCpC,EAAMqC,SAASC,SAAS,iBACtBvC,EAAOkC,YAAY,EAAD,CACtBvB,KAAM,WACHV,SAEN,0EAMD,SAAsBA,GACpB,KAAC,kBACOD,EAAOmC,2BACPnC,EAAOwC,WAAWvC,KAF1B,KAID,8BAMD,UAAsBwC,SACdzC,EAAOmC,2BACPnC,EAAOkC,YAAY,EAAD,CACtBvB,KAAM,SACH8B,OAEN,kDArFwB,GAANzC,EACL0C,kBAAoBC,cADf3C,EAGLG,YACZH,EAAO0C,kBAAP1C,gBAGA4C,MAASC,OAAO,yBAChB,OARiB7C,EAULU,0BAAoC,G,iHC3CpD,IAAIoC,EAAM,CACT,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,gBAAiB,IACjB,aAAc,IACd,gBAAiB,IACjB,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,WAAY,IACZ,cAAe,IACf,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,YAAa,IACb,eAAgB,IAChB,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,aAAc,IACd,gBAAiB,IACjB,WAAY,IACZ,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,YAAa,IACb,eAAgB,IAChB,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,gBAAiB,IACjB,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,KAIf,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK","file":"static/js/6.dd17c474.chunk.js","sourcesContent":["import moment from 'moment';\nimport {Entry} from 'open-polito-api/lib/device';\nimport Config from 'react-native-config';\nimport DeviceInfo from 'react-native-device-info';\nimport store from '../store/store';\nimport version from '../../version.json';\nimport {appendFile, getDocumentsPath} from './fs';\n\nexport type BasicDeviceInfoLogEntry = {\n  type: 'DEVICE_INFO';\n  appBuildNumber: string;\n  appBuildVariant: string;\n  appVersion: string;\n  appVersionBinary: string;\n  osApiLevel: number;\n  osName: string;\n  osVersion: string;\n  theme: 'light' | 'dark' | 'system';\n};\n\nexport type RequestLogEntry = Entry & {\n  type: 'REQUEST';\n};\n\nexport type ErrorLogEntry = Error & {\n  type: 'ERROR';\n};\n\nexport type LogEntry =\n  | BasicDeviceInfoLogEntry\n  | RequestLogEntry\n  | ErrorLogEntry;\n\nexport default class Logger {\n  public static logsDirectoryPath = getDocumentsPath();\n\n  public static logFilePath =\n    Logger.logsDirectoryPath +\n    '/' +\n    'request_log-' +\n    moment().format('YYYY-MM-DD-THHmmssSSS') +\n    '.txt';\n\n  public static hasLoggedBasicDeviceInfo: boolean = false;\n\n  /**\n   * Writes log entry to log file\n   * @param entry\n   *\n   * @remarks\n   * Uses ExternalDirectoryPath (/storage/emulated/0/Android/data/org.openpolito.app/files/) on Android,\n   * DocumentDirectoryPath on iOS\n   */\n  static async writeToFile(entry: LogEntry) {\n    await appendFile(Logger.logFilePath, JSON.stringify(entry) + '\\n').catch(\n      err => console.log(err),\n    );\n  }\n\n  /**\n   * Logs basic device info\n   */\n  static async logBasicDeviceInfo() {\n    if (Logger.hasLoggedBasicDeviceInfo) return;\n    const entry: BasicDeviceInfoLogEntry = {\n      type: 'DEVICE_INFO',\n      appBuildNumber: DeviceInfo.getBuildNumber(),\n      appBuildVariant: Config.VARIANT || '',\n      appVersion: version.version,\n      appVersionBinary: DeviceInfo.getVersion(),\n      osApiLevel: DeviceInfo.getApiLevelSync(),\n      osName: DeviceInfo.getSystemName() || DeviceInfo.getBaseOsSync(),\n      osVersion: DeviceInfo.getSystemVersion(),\n      theme: store.getState().session.config.theme,\n    };\n    await Logger.writeToFile(entry);\n    Logger.hasLoggedBasicDeviceInfo = true;\n  }\n\n  /**\n   * Logs a network request\n   *\n   * @remarks See {@link Entry}\n   * @param entry\n   */\n  static async logRequest(entry: Entry) {\n    await Logger.logBasicDeviceInfo();\n    // Don't log if debug options not enabled\n    if (!parseInt(Config.ENABLE_DEBUG_OPTIONS!, 10)) return;\n    // Don't log if login endpoint\n    if (entry.endpoint.includes('login')) return;\n    await Logger.writeToFile({\n      type: 'REQUEST',\n      ...entry,\n    });\n  }\n\n  /**\n   * Like {@link logRequest}, but called synchronously\n   * @param entry\n   */\n  static logRequestSync(entry: Entry) {\n    (async () => {\n      await Logger.logBasicDeviceInfo();\n      await Logger.logRequest(entry);\n    })();\n  }\n\n  /**\n   * Logs an error's name, message, and stack trace\n   * @param error\n   */\n  static async logError(error: Error) {\n    await Logger.logBasicDeviceInfo();\n    await Logger.writeToFile({\n      type: 'ERROR',\n      ...error,\n    });\n  }\n}\n","var map = {\n\t\"./af\": 298,\n\t\"./af.js\": 298,\n\t\"./ar\": 299,\n\t\"./ar-dz\": 300,\n\t\"./ar-dz.js\": 300,\n\t\"./ar-kw\": 301,\n\t\"./ar-kw.js\": 301,\n\t\"./ar-ly\": 302,\n\t\"./ar-ly.js\": 302,\n\t\"./ar-ma\": 303,\n\t\"./ar-ma.js\": 303,\n\t\"./ar-sa\": 304,\n\t\"./ar-sa.js\": 304,\n\t\"./ar-tn\": 305,\n\t\"./ar-tn.js\": 305,\n\t\"./ar.js\": 299,\n\t\"./az\": 306,\n\t\"./az.js\": 306,\n\t\"./be\": 307,\n\t\"./be.js\": 307,\n\t\"./bg\": 308,\n\t\"./bg.js\": 308,\n\t\"./bm\": 309,\n\t\"./bm.js\": 309,\n\t\"./bn\": 310,\n\t\"./bn-bd\": 311,\n\t\"./bn-bd.js\": 311,\n\t\"./bn.js\": 310,\n\t\"./bo\": 312,\n\t\"./bo.js\": 312,\n\t\"./br\": 313,\n\t\"./br.js\": 313,\n\t\"./bs\": 314,\n\t\"./bs.js\": 314,\n\t\"./ca\": 315,\n\t\"./ca.js\": 315,\n\t\"./cs\": 316,\n\t\"./cs.js\": 316,\n\t\"./cv\": 317,\n\t\"./cv.js\": 317,\n\t\"./cy\": 318,\n\t\"./cy.js\": 318,\n\t\"./da\": 319,\n\t\"./da.js\": 319,\n\t\"./de\": 320,\n\t\"./de-at\": 321,\n\t\"./de-at.js\": 321,\n\t\"./de-ch\": 322,\n\t\"./de-ch.js\": 322,\n\t\"./de.js\": 320,\n\t\"./dv\": 323,\n\t\"./dv.js\": 323,\n\t\"./el\": 324,\n\t\"./el.js\": 324,\n\t\"./en-au\": 325,\n\t\"./en-au.js\": 325,\n\t\"./en-ca\": 326,\n\t\"./en-ca.js\": 326,\n\t\"./en-gb\": 327,\n\t\"./en-gb.js\": 327,\n\t\"./en-ie\": 328,\n\t\"./en-ie.js\": 328,\n\t\"./en-il\": 329,\n\t\"./en-il.js\": 329,\n\t\"./en-in\": 330,\n\t\"./en-in.js\": 330,\n\t\"./en-nz\": 331,\n\t\"./en-nz.js\": 331,\n\t\"./en-sg\": 332,\n\t\"./en-sg.js\": 332,\n\t\"./eo\": 333,\n\t\"./eo.js\": 333,\n\t\"./es\": 334,\n\t\"./es-do\": 335,\n\t\"./es-do.js\": 335,\n\t\"./es-mx\": 336,\n\t\"./es-mx.js\": 336,\n\t\"./es-us\": 337,\n\t\"./es-us.js\": 337,\n\t\"./es.js\": 334,\n\t\"./et\": 338,\n\t\"./et.js\": 338,\n\t\"./eu\": 339,\n\t\"./eu.js\": 339,\n\t\"./fa\": 340,\n\t\"./fa.js\": 340,\n\t\"./fi\": 341,\n\t\"./fi.js\": 341,\n\t\"./fil\": 342,\n\t\"./fil.js\": 342,\n\t\"./fo\": 343,\n\t\"./fo.js\": 343,\n\t\"./fr\": 344,\n\t\"./fr-ca\": 345,\n\t\"./fr-ca.js\": 345,\n\t\"./fr-ch\": 346,\n\t\"./fr-ch.js\": 346,\n\t\"./fr.js\": 344,\n\t\"./fy\": 347,\n\t\"./fy.js\": 347,\n\t\"./ga\": 348,\n\t\"./ga.js\": 348,\n\t\"./gd\": 349,\n\t\"./gd.js\": 349,\n\t\"./gl\": 350,\n\t\"./gl.js\": 350,\n\t\"./gom-deva\": 351,\n\t\"./gom-deva.js\": 351,\n\t\"./gom-latn\": 352,\n\t\"./gom-latn.js\": 352,\n\t\"./gu\": 353,\n\t\"./gu.js\": 353,\n\t\"./he\": 354,\n\t\"./he.js\": 354,\n\t\"./hi\": 355,\n\t\"./hi.js\": 355,\n\t\"./hr\": 356,\n\t\"./hr.js\": 356,\n\t\"./hu\": 357,\n\t\"./hu.js\": 357,\n\t\"./hy-am\": 358,\n\t\"./hy-am.js\": 358,\n\t\"./id\": 359,\n\t\"./id.js\": 359,\n\t\"./is\": 360,\n\t\"./is.js\": 360,\n\t\"./it\": 361,\n\t\"./it-ch\": 362,\n\t\"./it-ch.js\": 362,\n\t\"./it.js\": 361,\n\t\"./ja\": 363,\n\t\"./ja.js\": 363,\n\t\"./jv\": 364,\n\t\"./jv.js\": 364,\n\t\"./ka\": 365,\n\t\"./ka.js\": 365,\n\t\"./kk\": 366,\n\t\"./kk.js\": 366,\n\t\"./km\": 367,\n\t\"./km.js\": 367,\n\t\"./kn\": 368,\n\t\"./kn.js\": 368,\n\t\"./ko\": 369,\n\t\"./ko.js\": 369,\n\t\"./ku\": 370,\n\t\"./ku.js\": 370,\n\t\"./ky\": 371,\n\t\"./ky.js\": 371,\n\t\"./lb\": 372,\n\t\"./lb.js\": 372,\n\t\"./lo\": 373,\n\t\"./lo.js\": 373,\n\t\"./lt\": 374,\n\t\"./lt.js\": 374,\n\t\"./lv\": 375,\n\t\"./lv.js\": 375,\n\t\"./me\": 376,\n\t\"./me.js\": 376,\n\t\"./mi\": 377,\n\t\"./mi.js\": 377,\n\t\"./mk\": 378,\n\t\"./mk.js\": 378,\n\t\"./ml\": 379,\n\t\"./ml.js\": 379,\n\t\"./mn\": 380,\n\t\"./mn.js\": 380,\n\t\"./mr\": 381,\n\t\"./mr.js\": 381,\n\t\"./ms\": 382,\n\t\"./ms-my\": 383,\n\t\"./ms-my.js\": 383,\n\t\"./ms.js\": 382,\n\t\"./mt\": 384,\n\t\"./mt.js\": 384,\n\t\"./my\": 385,\n\t\"./my.js\": 385,\n\t\"./nb\": 386,\n\t\"./nb.js\": 386,\n\t\"./ne\": 387,\n\t\"./ne.js\": 387,\n\t\"./nl\": 388,\n\t\"./nl-be\": 389,\n\t\"./nl-be.js\": 389,\n\t\"./nl.js\": 388,\n\t\"./nn\": 390,\n\t\"./nn.js\": 390,\n\t\"./oc-lnc\": 391,\n\t\"./oc-lnc.js\": 391,\n\t\"./pa-in\": 392,\n\t\"./pa-in.js\": 392,\n\t\"./pl\": 393,\n\t\"./pl.js\": 393,\n\t\"./pt\": 394,\n\t\"./pt-br\": 395,\n\t\"./pt-br.js\": 395,\n\t\"./pt.js\": 394,\n\t\"./ro\": 396,\n\t\"./ro.js\": 396,\n\t\"./ru\": 397,\n\t\"./ru.js\": 397,\n\t\"./sd\": 398,\n\t\"./sd.js\": 398,\n\t\"./se\": 399,\n\t\"./se.js\": 399,\n\t\"./si\": 400,\n\t\"./si.js\": 400,\n\t\"./sk\": 401,\n\t\"./sk.js\": 401,\n\t\"./sl\": 402,\n\t\"./sl.js\": 402,\n\t\"./sq\": 403,\n\t\"./sq.js\": 403,\n\t\"./sr\": 404,\n\t\"./sr-cyrl\": 405,\n\t\"./sr-cyrl.js\": 405,\n\t\"./sr.js\": 404,\n\t\"./ss\": 406,\n\t\"./ss.js\": 406,\n\t\"./sv\": 407,\n\t\"./sv.js\": 407,\n\t\"./sw\": 408,\n\t\"./sw.js\": 408,\n\t\"./ta\": 409,\n\t\"./ta.js\": 409,\n\t\"./te\": 410,\n\t\"./te.js\": 410,\n\t\"./tet\": 411,\n\t\"./tet.js\": 411,\n\t\"./tg\": 412,\n\t\"./tg.js\": 412,\n\t\"./th\": 413,\n\t\"./th.js\": 413,\n\t\"./tk\": 414,\n\t\"./tk.js\": 414,\n\t\"./tl-ph\": 415,\n\t\"./tl-ph.js\": 415,\n\t\"./tlh\": 416,\n\t\"./tlh.js\": 416,\n\t\"./tr\": 417,\n\t\"./tr.js\": 417,\n\t\"./tzl\": 418,\n\t\"./tzl.js\": 418,\n\t\"./tzm\": 419,\n\t\"./tzm-latn\": 420,\n\t\"./tzm-latn.js\": 420,\n\t\"./tzm.js\": 419,\n\t\"./ug-cn\": 421,\n\t\"./ug-cn.js\": 421,\n\t\"./uk\": 422,\n\t\"./uk.js\": 422,\n\t\"./ur\": 423,\n\t\"./ur.js\": 423,\n\t\"./uz\": 424,\n\t\"./uz-latn\": 425,\n\t\"./uz-latn.js\": 425,\n\t\"./uz.js\": 424,\n\t\"./vi\": 426,\n\t\"./vi.js\": 426,\n\t\"./x-pseudo\": 427,\n\t\"./x-pseudo.js\": 427,\n\t\"./yo\": 428,\n\t\"./yo.js\": 428,\n\t\"./zh-cn\": 429,\n\t\"./zh-cn.js\": 429,\n\t\"./zh-hk\": 430,\n\t\"./zh-hk.js\": 430,\n\t\"./zh-mo\": 431,\n\t\"./zh-mo.js\": 431,\n\t\"./zh-tw\": 432,\n\t\"./zh-tw.js\": 432\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 524;"],"sourceRoot":""}