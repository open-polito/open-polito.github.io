(this.webpackJsonp=this.webpackJsonp||[]).push([[8],{121:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(57)),l=a(n(18)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),o=n(7),i=a(n(16)),f=a(n(25)),c=n(17),d=["dark","icon","initiallyFocused","inputStyle","style"];function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var p=function(e){var t=e.dark,n=e.icon,a=void 0===n?"":n,s=e.initiallyFocused,p=void 0!==s&&s,m=e.inputStyle,g=void 0===m?{}:m,y=e.style,v=void 0===y?{}:y,b=(0,l.default)(e,d),w=(0,u.useRef)(null);(0,u.useEffect)((function(){var e;p&&(null==(e=w.current)||e.focus())}),[p]);var E=(0,u.useMemo)((function(){return o.StyleSheet.create({textInputContainer:{backgroundColor:t?i.default.gray700:i.default.gray200,height:40*c.p,paddingHorizontal:12*c.p,borderRadius:4*c.p,flexDirection:"row",alignItems:"center"},textInput:{padding:0,fontFamily:"Inter-Regular",fontSize:10*c.p,flex:1,color:t?i.default.gray200:i.default.gray700}})}),[t]);return u.default.createElement(o.View,{style:Object.assign({},E.textInputContainer,v)},a?u.default.createElement(f.default,{name:a,size:18*c.p,color:t?i.default.gray200:i.default.gray700,style:{marginRight:8*c.p}}):null,u.default.createElement(o.TextInput,(0,r.default)({ref:function(e){return w.current=e}},b,{style:Object.assign({},E.textInput,g),placeholderTextColor:t?i.default.gray300:i.default.gray600})))};t.default=p},1359:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,c.useDispatch)(),t=(0,u.useContext)(p.DeviceContext),n=t.dark,a=t.device,w=t.size,D=(0,c.useSelector)((function(e){return e.user})).getNotificationsStatus,I=(0,c.useSelector)((function(e){return e.session})).loginStatus,W=(0,c.useSelector)((function(e){return e.courses})),R=W.courses,A=W.getRecentMaterialStatus,L=W.loadCoursesStatus;(0,u.useEffect)((function(){I.code===b.STATUS.IDLE&&e((0,h.login)({method:"token",device:a}))}),[I,a,e]),(0,u.useEffect)((function(){D.code===b.STATUS.IDLE&&I.code===b.STATUS.SUCCESS&&e((0,m.getNotificationList)(a))}),[D,I]),(0,u.useEffect)((function(){I.code===b.STATUS.SUCCESS&&(e((0,s.loadCoursesData)(a)),e((0,m.getUnreadEmailCount)(a)),(0,l.default)((function*(){if("android"===y.Platform.OS&&"debug"!==v.default.VARIANT){var e=yield y.NativeModules.NotificationModule.getToken();yield(0,g.registerPushNotifications)(a,e)}}))())}),[I]),(0,u.useEffect)((function(){(0,l.default)((function*(){L.code===b.STATUS.SUCCESS&&(e((0,s.setLoadExtendedCourseInfoStatus)((0,b.pendingStatus)())),R.forEach((function(t){t.status.code===b.STATUS.IDLE&&e((0,s.loadCourse)({basicCourseInfo:t.basicInfo,device:a}))})))}))()}),[L]),(0,u.useEffect)((function(){if(A.code===b.STATUS.IDLE&&L.code===b.STATUS.SUCCESS){var t=!0;R.forEach((function(e){e.status.code!==b.STATUS.SUCCESS&&(t=!1)})),t&&(e((0,s.setLoadExtendedCourseInfoStatus)((0,b.successStatus)())),e((0,s.getRecentMaterial)()))}}),[R,A]);var B=(0,u.useCallback)((function(e){return u.default.createElement(E.default,(0,r.default)({dark:n},e))}),[n]);return u.default.createElement(V.Navigator,{screenOptions:{headerShown:!1,drawerType:w>=C.DeviceSize.lg?"permanent":"front"},useLegacyImplementation:!0,drawerContent:function(e){return B(e)}},u.default.createElement(V.Screen,{name:"Home",component:o.default}),u.default.createElement(V.Screen,{name:"Email",component:i.default}),u.default.createElement(V.Screen,{name:"Notifications",component:T.default}),u.default.createElement(V.Screen,{name:"Settings",component:f.default}),u.default.createElement(V.Screen,{name:"Courses",component:M.default}),u.default.createElement(V.Screen,{name:"Material",component:d.default}),u.default.createElement(V.Screen,{name:"Bookings",component:O.default}),u.default.createElement(V.Screen,{name:"Timetable",component:k.default}),u.default.createElement(V.Screen,{name:"Exams",component:_.default}),u.default.createElement(V.Screen,{name:"ExamSessions",component:S.default}),u.default.createElement(V.Screen,{name:"Maps",component:j.default}),u.default.createElement(V.Screen,{name:"Classrooms",component:x.default}),u.default.createElement(V.Screen,{name:"People",component:P.default}))};var r=a(n(57)),l=a(n(0)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),o=a(n(1360)),i=a(n(1361)),f=a(n(1364)),c=n(28),d=a(n(1366)),s=n(169),p=n(22),m=n(106),g=n(88),y=n(7),v=a(n(107)),b=n(55),w=n(634),E=a(n(1389)),h=n(54),O=a(n(1391)),k=a(n(1392)),_=a(n(1425)),S=a(n(1431)),j=a(n(1434)),x=a(n(1435)),P=a(n(1436)),M=a(n(1437)),T=a(n(1438)),C=n(394);function D(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}var V=(0,w.createDrawerNavigator)()},1360:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_(n(5)),l=n(33),u=n(7),o=a(n(16)),i=n(22),f=n(17),c=a(n(25)),d=a(n(121)),s=_(n(59)),p=a(n(44)),m=a(n(42)),g=a(n(21)),y=n(46),v=a(n(147)),b=n(28),w=a(n(120)),E=n(55),h=a(n(188)),O=n(88);function k(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var S=[{name:"Courses",icon:"school"},{name:"Material",icon:"folders"},{name:"Email",icon:"mail"},{name:"ExamSessions",icon:"ballpen"}],j=[o.default.accent300,o.default.red,"#9b51e0","#f2c94c"],x=function(){var e=(0,l.useTranslation)().t,t=(0,r.useContext)(i.DeviceContext),n=t.dark,a=(t.device,(0,y.useNavigation)()),k=((0,b.useDispatch)(),(0,b.useSelector)((function(e){return e.courses}))),_=k.courses,x=k.recentMaterial,P=(k.getRecentMaterialStatus,k.loadCoursesStatus,k.loadExtendedCourseInfoStatus),M=(0,r.useMemo)((function(){return _.flatMap((function(e){var t;return(null==(t=e.extendedInfo)?void 0:t.notices.map((function(t){return Object.assign({},t,{course_name:e.basicInfo.name,course_code:e.basicInfo.code})})))||[]})).sort((function(e,t){return t.date-e.date}))[0]}),[_]),T=(0,r.useMemo)((function(){return u.StyleSheet.create({container:{marginTop:24*f.p,paddingHorizontal:16*f.p,paddingBottom:16*f.p},topSections:{flexDirection:"row",justifyContent:"space-between",paddingBottom:16},topSection:{justifyContent:"center",alignItems:"center"},topSectionInner:{width:40*f.p,height:40*f.p,borderRadius:4*f.p,marginBottom:4*f.p,justifyContent:"center",alignItems:"center"},topSectionText:{position:"absolute",bottom:-16*f.p}})}),[n]);return r.default.createElement(p.default,null,r.default.createElement(s.default,{title:e("home"),headerType:s.HEADER_TYPE.MAIN}),r.default.createElement(u.ScrollView,null,r.default.createElement(u.View,{style:T.container},r.default.createElement(m.default,{onPress:function(){a.navigate("Search")}},r.default.createElement(d.default,{editable:!1,placeholder:e("searchForAnything"),dark:n,icon:"search",style:{marginBottom:32*f.p}})),r.default.createElement(u.View,{style:T.topSections},S.map((function(t,l){return r.default.createElement(m.default,{key:t.name,style:T.topSection,onPress:function(){a.navigate(t.name)}},r.default.createElement(u.View,{style:Object.assign({},T.topSectionInner,{backgroundColor:j[l]})},r.default.createElement(c.default,{name:t.icon,size:24*f.p,color:o.default.gray100})),r.default.createElement(g.default,{numberOfLines:1,s:10*f.p,w:"r",c:n?o.default.gray100:o.default.gray800,style:T.topSectionText},e(t.name[0].toLowerCase()+t.name.slice(1))))})),r.default.createElement(m.default,{style:T.topSection,onPress:function(){a.toggleDrawer()}},r.default.createElement(u.View,{style:Object.assign({},T.topSectionInner,{borderColor:o.default.gray200,borderWidth:1*f.p})},r.default.createElement(c.default,{name:"plus",size:24*f.p,color:o.default.gray200})),r.default.createElement(g.default,{numberOfLines:1,s:10*f.p,w:"r",c:n?o.default.gray100:o.default.gray800,style:T.topSectionText},e("more")))),r.default.createElement(v.default,{dark:n,title:e("latestFiles"),style:{marginTop:32*f.p}},P.code!=E.STATUS.SUCCESS?r.default.createElement(u.ActivityIndicator,null):x.slice(0,3).map((function(e){return r.default.createElement(u.View,{key:e.code},r.default.createElement(w.default,{relativeDate:!0,dark:n,item:e,course:e.course_name}))}))),r.default.createElement(v.default,{dark:n,title:e("latestAlert"),style:{marginTop:24*f.p}},P.code!=E.STATUS.SUCCESS?r.default.createElement(u.ActivityIndicator,null):r.default.createElement(h.default,{type:O.NotificationType.NOTICE,notification:M,dark:n})))))};t.default=x},1361:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,c.useTranslation)().t,t=(0,u.useContext)(d.DeviceContext),n=t.dark,a=t.device,g=(0,i.useDispatch)(),h=(0,u.useState)(!0),O=(0,r.default)(h,2),_=O[0],S=O[1],j=(0,u.useState)(!1),x=(0,r.default)(j,2),P=x[0],M=x[1],T=(0,u.useState)(null),C=(0,r.default)(T,2),D=(C[0],C[1]),V=(0,u.useState)(""),I=(0,r.default)(V,2),W=I[0],R=I[1];(0,u.useEffect)((function(){return function(){return S(!1)}}),[]),(0,u.useEffect)((function(){(0,l.default)((function*(){g((0,p.getUnreadEmailCount)(a)),!W&&_&&R(yield k(a)),W&&"mobile"!==E.genericPlatform&&M(!0)}))()}),[a,g,_,W]);return u.default.createElement(y.default,null,u.default.createElement(v.default,{title:e("email"),headerType:v.HEADER_TYPE.MAIN}),u.default.createElement(m.default.View,{style:{flex:1}},P?"mobile"!==E.genericPlatform?u.default.createElement(o.View,{style:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center"}},u.default.createElement(w.default,{s:12*b.p,w:"m",c:n?f.default.gray100:f.default.gray800,style:{marginRight:16*b.p}},e("emailCannotBeShownDesktop")),u.default.createElement(w.default,{href:W,s:12*b.p,w:"m",c:n?f.default.gray100:f.default.gray800,style:{marginRight:16*b.p}},e("openBrowser"))):null:u.default.createElement(o.View,{style:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"}},u.default.createElement(w.default,{s:12*b.p,w:"m",c:n?f.default.gray100:f.default.gray800,style:{marginRight:16*b.p}},e("loading")),u.default.createElement(o.ActivityIndicator,null)),"mobile"===E.genericPlatform&&u.default.createElement(o.View,{style:{flex:P?1:0}},u.default.createElement(s.default,{ref:function(e){return!e&&D(e)},source:{uri:W},onNavigationStateChange:function(e){"mobile"===E.genericPlatform&&(e.loading||P||!_||M(!0))}}))))};var r=a(n(15)),l=a(n(0)),u=O(n(5)),o=n(7),i=n(28),f=a(n(16)),c=n(33),d=n(22),s=a(n(1362)),p=n(106),m=a(n(24)),g=n(369),y=a(n(44)),v=O(n(59)),b=n(17),w=a(n(21)),E=n(115);function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var k=function(){var e=(0,l.default)((function*(e){return yield(0,g.emailUrl)(e)}));return function(t){return e.apply(this,arguments)}}()},1364:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.buildSettingsItem=void 0,t.default=function(){var e=(0,c.useTranslation)().t,t=(0,u.useContext)(s.DeviceContext),n=t.dark,a=t.device,l=(0,u.useContext)(k.ModalContext).setModal,f=(0,i.useSelector)((function(e){return e.session.config})),_=(0,i.useDispatch)(),S=[{icon:"bug",name:e("debugEnableLogging"),description:e("debugEnableLoggingDesc"),settingsFunction:function(){f.logging?_((0,d.setConfig)(Object.assign({},f,{logging:!1}))):l(u.default.createElement(O.default,null))},toggle:!0,toggleValue:f.logging},{icon:"arrow-back",name:e("debugResetConfig"),description:e("debugResetConfigDesc"),settingsFunction:function(){_((0,d.resetConfig)())}},{icon:"bell-ringing",name:e("debugTestNotification"),description:e("debugTestNotificationDesc"),settingsFunction:function(){_((0,d.setToast)({message:e("pleaseWait"),type:"info",visible:!0})),(0,r.default)((function*(){yield(0,m.sendTestPushNotification)(a)}))()}}],x=(0,u.useMemo)((function(){return o.StyleSheet.create({container:{marginTop:24*w.p,paddingHorizontal:16*w.p,paddingBottom:16*w.p}})}),[]);return u.default.createElement(y.default,null,u.default.createElement(v.default,{headerType:v.HEADER_TYPE.MAIN,title:e("settings")}),u.default.createElement(o.View,{style:x.container},parseInt(p.default.ENABLE_DEBUG_OPTIONS)?u.default.createElement(b.default,{dark:n,title:e("debugSettings")},u.default.createElement(o.View,{style:{marginTop:-8*w.p}},S.map((function(e){return j(e)})))):null),u.default.createElement(o.View,{style:{marginTop:8,marginBottom:16,flexDirection:"row",justifyContent:"center"}},u.default.createElement(E.default,{s:10*w.p,w:"r",c:n?h.default.gray200:h.default.gray700},"v"+g.default.version)))};var r=a(n(0)),l=a(n(57)),u=S(n(5)),o=n(7),i=n(28),f=a(n(633)),c=n(33),d=n(54),s=n(22),p=a(n(107)),m=n(88),g=a(n(163)),y=a(n(44)),v=S(n(59)),b=a(n(147)),w=n(17),E=a(n(21)),h=a(n(16)),O=a(n(1365)),k=n(67);function _(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var j=function(e){return u.default.createElement(f.default,(0,l.default)({key:e.name},e))};t.buildSettingsItem=j},1365:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(5)),l=n(33),u=n(116),o=n(28),i=a(n(16)),f=n(54),c=a(n(395)),d=a(n(164)),s=function(){var e=(0,l.useTranslation)().t,t=(0,o.useDispatch)(),n=(0,o.useSelector)((function(e){return e.session.config}));return r.default.createElement(d.default,{title:e("debugEnableLogging"),icon:"alert-triangle",accentColor:i.default.red,onConfirm:function(){t((0,f.setConfig)(Object.assign({},n,{logging:!n.logging}))),t((0,f.setToast)({message:e("restartToastMessage"),type:"warn",visible:!0}))}},r.default.createElement(u.RenderHTMLSource,{source:{html:e("debugEnableLoggingDialogMessage",{path:c.default.logsDirectoryPath})}}))};t.default=s},1366:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,u.useTranslation)().t,t=(0,i.useDispatch)(),n=(0,p.useNavigation)(),a=(0,i.useSelector)((function(e){return e.courses.courses})),h=(0,i.useSelector)((function(e){return e.courses})),O=h.getRecentMaterialStatus,_=h.recentMaterial,S=(0,l.useState)(0),j=(0,r.default)(S,2),x=j[0],P=j[1],M=(0,l.useContext)(c.DeviceContext),T=M.dark,C=M.device,D=(0,l.useState)(!1),V=(0,r.default)(D,2),I=V[0],W=V[1],R=(0,l.useState)(!1),A=(0,r.default)(R,2),L=(A[0],A[1]);(0,l.useEffect)((function(){var e=!0;a.forEach((function(n){n.status.code!=s.STATUS.SUCCESS&&(e=!1,t((0,d.loadCourse)({basicCourseInfo:n.basicInfo,device:C})))})),e&&W(!0)}),[]),(0,l.useEffect)((function(){if(!I){var e=!0;a.forEach((function(t){t.status.code!=s.STATUS.SUCCESS&&(e=!1)})),e&&W(!0)}}),[a]),(0,l.useEffect)((function(){I&&O.code!=s.STATUS.SUCCESS&&O.code!=s.STATUS.PENDING&&t((0,d.getRecentMaterial)())}),[I]),(0,l.useEffect)((function(){O.code==s.STATUS.SUCCESS&&L(!0)}),[O]);var B=(0,l.useMemo)((function(){return o.StyleSheet.create({container:{marginTop:24*g.p,paddingHorizontal:16*g.p,paddingBottom:16*g.p}})}),[T]);return l.default.createElement(m.default,null,l.default.createElement(v.default,{headerType:v.HEADER_TYPE.MAIN,title:e("material")}),l.default.createElement(o.FlatList,{data:[0],renderItem:function(){return l.default.createElement(o.View,{style:B.container},l.default.createElement(E.default,{onPress:function(){n.navigate("Search")}},l.default.createElement(y.default,{editable:!1,placeholder:e("searchForAnything"),dark:T,icon:"search"})),l.default.createElement(b.default,{style:{marginTop:24*g.p,marginBottom:16*g.p},onChange:function(e){return P(e)},dark:T,items:k.map((function(t){return{label:e(t),value:t}}))}),0==x?l.default.createElement(f.default,{courseId:"all",dark:T}):l.default.createElement(o.FlatList,{data:_,keyExtractor:function(e){return e.code},renderItem:function(e){var t=e.item;return l.default.createElement(w.default,{item:t,key:t.code,dark:T,course:t.course_name})}}))}}))};var r=a(n(15)),l=O(n(5)),u=n(33),o=n(7),i=n(28),f=a(n(632)),c=n(22),d=n(169),s=n(55),p=n(70),m=a(n(44)),g=n(17),y=a(n(121)),v=O(n(59)),b=a(n(93)),w=a(n(120)),E=a(n(42));function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var k=["explore","recentlyAdded"]},1389:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(57)),l=a(n(15)),u=a(n(18)),o=n(634),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),f=n(7),c=a(n(16)),d=a(n(21)),s=n(17),p=a(n(42)),m=a(n(163)),g=a(n(1390)),y=n(33),v=a(n(25)),b=n(28),w=n(54),E=n(22),h=["dark"];function O(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}var k=function(e){return["Maps","Classrooms","People"].includes(e)},_=g.default.flatMap((function(e){return e.items.map((function(e){return e.name}))})),S=function(e){var t=e.dark,n=(0,u.default)(e,h),a=(0,y.useTranslation)().t,O=(0,b.useDispatch)(),S=(0,i.useContext)(E.DeviceContext),j=(0,b.useSelector)((function(e){return e.user.userInfo})),x=(0,i.useMemo)((function(){return null==j?"":(e=j.degree_type,t=j.degree_name,("corso di laurea in"==e.toLowerCase()?"L3":"corso di laurea magistrale in"==e.toLowerCase()?"LM":"")+" "+t.toLowerCase().replace("ingegneria","").toUpperCase().trim());var e,t}),[j]),P=(0,i.useState)(_[0]),M=(0,l.default)(P,2),T=M[0],C=M[1],D=(0,i.useCallback)((function(){O((0,w.logout)(S.device))}),[O,S]),V=(0,i.useMemo)((function(){return f.StyleSheet.create({drawerScrollView:{backgroundColor:t?c.default.gray800:c.default.gray100},drawer:{flexDirection:"column",paddingHorizontal:16*s.p,paddingVertical:24*s.p},hr:{backgroundColor:c.default.gray500,height:1*s.p,marginBottom:16*s.p},category:{marginBottom:16*s.p}})}),[t]);return i.default.createElement(o.DrawerContentScrollView,(0,r.default)({style:V.drawerScrollView},n),i.default.createElement(f.View,{style:V.drawer},i.default.createElement(f.View,{style:{justifyContent:"flex-start",marginBottom:16*s.p}},i.default.createElement(d.default,{s:14*s.p,w:"b",c:t?c.default.gray100:c.default.gray800},"Open PoliTo"),i.default.createElement(d.default,{s:10*s.p,w:"r",c:t?c.default.gray200:c.default.gray700},"v",m.default.version)),i.default.createElement(f.View,{style:V.hr}),g.default.map((function(e){return i.default.createElement(f.View,{style:V.category},i.default.createElement(f.View,{style:{marginBottom:8*s.p}},i.default.createElement(d.default,{s:10*s.p,w:"m",c:t?c.default.gray200:c.default.gray700},a(e.name).toUpperCase())),e.items.map((function(e){return i.default.createElement(p.default,{disabled:k(e.name),style:{paddingVertical:4*s.p,flexDirection:"row",alignItems:"center",opacity:k(e.name)?.3:1},key:e.name,onPress:function(){C(e.name),n.navigation.navigate(e.name)}},i.default.createElement(v.default,{name:e.icon,size:24*s.p,color:e.name==T?c.default.accent300:t?c.default.gray100:c.default.gray700,style:{marginRight:8*s.p}}),i.default.createElement(d.default,{s:12*s.p,w:"m",c:e.name==T?c.default.accent300:t?c.default.gray100:c.default.gray800},a(e.name.charAt(0).toLowerCase()+e.name.slice(1))))})))})),i.default.createElement(f.View,{style:V.hr}),i.default.createElement(f.View,{style:{flexDirection:"row",alignItems:"center"}},i.default.createElement(f.View,{style:{width:24*s.p,height:24*s.p,borderRadius:24*s.p,backgroundColor:c.default.accent100,marginRight:8*s.p}}),i.default.createElement(f.View,{style:{justifyContent:"flex-start",flex:1}},i.default.createElement(d.default,{numberOfLines:1,w:"b",c:t?c.default.gray100:c.default.gray800,s:12*s.p},null==j?void 0:j.surname," ",null==j?void 0:j.name),i.default.createElement(d.default,{numberOfLines:1,w:"r",c:t?c.default.gray200:c.default.gray700,s:10*s.p},x)),i.default.createElement(p.default,{onPress:function(){D()}},i.default.createElement(v.default,{name:"logout",size:24*s.p,color:c.default.accent300})))))};t.default=S},1390:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=[{name:"general",items:[{name:"Home",icon:"layout-dashboard"},{name:"Email",icon:"mail"},{name:"Notifications",icon:"bell"},{name:"Settings",icon:"settings"}]},{name:"classes",items:[{name:"Courses",icon:"school"},{name:"Material",icon:"folders"},{name:"Bookings",icon:"ticket"},{name:"Timetable",icon:"clock"}]},{name:"exams",items:[{name:"Exams",icon:"book-2"},{name:"ExamSessions",icon:"ballpen"}]},{name:"headquarters",items:[{name:"Maps",icon:"map-2"},{name:"Classrooms",icon:"building-arch"},{name:"People",icon:"user"}]}];t.default=n},1391:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=a(n(15)),u=a(n(150)),o=a(n(8)),i=n(368),f=x(n(5)),c=n(33),d=n(7),s=n(61),p=n(28),m=a(n(16)),g=n(22),y=n(17),v=n(55),b=n(106),w=a(n(647)),E=a(n(25)),h=a(n(21)),O=x(n(59)),k=a(n(122)),_=a(n(44)),S=a(n(93));function j(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var P=function(e){e.ctxId;var t=e.subctx,n=e.language,a=e.dark,r=((0,f.useContext)(g.DeviceContext).device,(0,f.useState)({loaded:!1,expanded:!1,mounted:!0,slots:[]})),u=(0,l.default)(r,2),o=(u[0],u[1]);return(0,f.useEffect)((function(){return function(){return o((function(e){return Object.assign({},e,{mounted:!1})}))}}),[]),f.default.createElement(d.View,{key:t.id},f.default.createElement(d.Pressable,{onPress:function(){return o((function(e){return Object.assign({},e,{expanded:!e.expanded})}))},android_ripple:{color:m.default.lightGray},style:{paddingVertical:8*y.p}},f.default.createElement(h.default,{s:10*y.p,w:"m",c:a?m.default.gray200:m.default.gray700},"it"===n?t.ita.name:t.eng.name)),f.default.createElement(d.View,null))},M=function(e){var t,n=e.ctx,a=e.language,r=e.dark,u=(0,f.useState)(!1),o=(0,l.default)(u,2),i=o[0],c=o[1];return f.default.createElement(d.View,null,f.default.createElement(w.default,{expanded:i,dark:r,onPress:function(){c(!i)},description:"it"===a?n.ita.description:n.eng.description,title:"it"===a?n.ita.name:n.eng.name,expandedElement:n.subcontexts&&n.subcontexts.length>0?f.default.createElement(d.View,{style:{marginTop:16*y.p}},null==(t=n.subcontexts)?void 0:t.map((function(e){return f.default.createElement(P,{dark:r,key:e.id,subctx:e,language:a,ctxId:n.id})}))):null}))},T=function(e){var t=e.dark,n=e.booking,a=e.barcodeUrl,r=(0,f.useState)(!1),u=(0,l.default)(r,2),i=u[0],c=u[1],s=(0,f.useMemo)((function(){return[{type:"date",label:(0,o.default)(n.start_time).format("ll"),icon:"calendar-time"},{type:"time",label:(0,o.default)(n.start_time).format("LT")+" - "+(0,o.default)(n.end_time).format("LT"),icon:"clock"}]}),[n]);return f.default.createElement(w.default,{title:n.course_id?n.course_name+" - "+n.course_id:n.subcontext_name,description:n.context_name,expanded:i,dark:t,sideElement:!i&&f.default.createElement(d.Image,{source:{uri:a},style:{width:"100%",aspectRatio:2.5,resizeMode:"contain"},resizeMode:"contain"}),expandedElement:f.default.createElement(d.View,{style:{flex:1,marginTop:16*y.p}},f.default.createElement(d.Image,{source:{uri:a},style:{width:"100%",aspectRatio:2.5,resizeMode:"contain"}})),onPress:function(){return c((function(e){return!e}))}},f.default.createElement(d.View,{style:{marginTop:16*y.p}},s.map((function(e,n){return f.default.createElement(d.View,{style:[{flexDirection:"row",alignItems:"center"},n>0&&{marginTop:8*y.p}]},f.default.createElement(E.default,{name:e.icon,size:16*y.p,color:t?m.default.gray200:m.default.gray700,style:{marginRight:8*y.p}}),f.default.createElement(h.default,{style:{marginRight:8*y.p},s:10*y.p,w:"r",c:t?m.default.gray200:m.default.gray700},e.label))}))))},C=function(){var e=(0,c.useTranslation)().t,t=(0,f.useContext)(g.DeviceContext),n=t.device,a=t.dark,o=(0,p.useDispatch)(),m=(0,p.useSelector)((function(e){return e.user})),w=m.userInfo,E=m.getBookingsStatus,h=m.getBookingContextsStatus,j=m.bookings,x=m.bookingContexts,P=(0,f.useRef)(!0),C=(0,f.useMemo)((function(){return["myBookings","newBooking"]}),[]),D=(0,f.useState)({currentTab:C[0],barcodeUrl:""}),V=(0,l.default)(D,2),I=V[0],W=V[1],R=(0,f.useMemo)((function(){return E.code===v.STATUS.PENDING||h.code===v.STATUS.PENDING}),[E,h]),A=(0,f.useCallback)((function(e){"myBookings"===e&&o((0,b.getMyBookings)(n)),"newBooking"===e&&o((0,b.getBookingContexts)(n))}),[n,o]);(0,f.useEffect)((function(){""===I.barcodeUrl&&w&&W((function(e){return Object.assign({},e,{barcodeUrl:(0,i.barcode_url)(w.current_id)})}))}),[I.barcodeUrl,w]),(0,f.useEffect)((function(){(0,r.default)((function*(){I.currentTab===C[0]?o((0,b.getMyBookings)(n)):I.currentTab===C[1]&&o((0,b.getBookingContexts)(n))}))()}),[I.currentTab,w,n,o,C]),(0,f.useEffect)((function(){return function(){P.current=!1}}),[]);var L=(0,f.useMemo)((function(){return d.StyleSheet.create({container:{marginTop:24*y.p,paddingHorizontal:16*y.p,flex:1}})}),[]);return f.default.createElement(_.default,null,f.default.createElement(O.default,{title:e("bookings"),headerType:O.HEADER_TYPE.MAIN}),f.default.createElement(S.default,{adjusted:!0,dark:a,onChange:function(e){return W((function(t){return Object.assign({},t,{currentTab:C[e]})}))},items:C.map((function(t){return{label:e(t),value:t}}))}),f.default.createElement(d.View,{style:L.container},f.default.createElement(s.ScrollView,{refreshControl:f.default.createElement(d.RefreshControl,{refreshing:R,onRefresh:function(){return A(I.currentTab===C[0]?"myBookings":"newBooking")}})},I.currentTab===C[0]&&E.code===v.STATUS.PENDING||I.currentTab===C[1]&&h.code===v.STATUS.PENDING?f.default.createElement(d.ActivityIndicator,null):I.currentTab===C[0]?0===j.length?f.default.createElement(k.default,null):j.map((function(e){return f.default.createElement(T,{key:""+e.context_id+e.subcontext_id+e.start_time+e.end_time,dark:a,booking:e,barcodeUrl:I.barcodeUrl})})):0===x.length?f.default.createElement(k.default,null):x.map((function(e){return f.default.createElement(M,{dark:a,key:e.id,ctx:e,language:u.default.language})})))))};t.default=C},1392:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=a(n(15)),u=a(n(8)),o=n(1393),i=E(n(5)),f=n(33),c=n(7),d=n(22),s=a(n(1394)),p=a(n(1405)),m=a(n(1406)),g=E(n(24)),y=a(n(44)),v=E(n(59)),b=n(17);function w(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var h=function(){var e=(0,f.useTranslation)().t,t=(0,i.useContext)(d.DeviceContext),n=t.device,a=t.dark,w=(0,i.useState)(!1),E=(0,l.default)(w,2),h=E[0],O=E[1],k=(0,i.useState)(null),_=(0,l.default)(k,2),S=_[0],j=_[1],x=(0,i.useState)([]),P=(0,l.default)(x,2),M=P[0],T=P[1],C=(0,i.useMemo)((function(){var e=Array.from({length:7},(function(){return[]}));return M.forEach((function(t){e[(0,u.default)(t.start_time).day()].push(t)})),e}),[M]),D=(0,i.useState)("day"),V=(0,l.default)(D,2),I=V[0],W=V[1],R=(0,i.useState)(!0),A=(0,l.default)(R,2),L=A[0],B=A[1],N=(0,i.useState)(1),z=(0,l.default)(N,2),H=z[0],U=z[1],F=(0,i.useState)(null),Y=(0,l.default)(F,2),G=Y[0],q=Y[1],X=(0,i.useState)(!1),J=(0,l.default)(X,2),K=J[0],Q=J[1],Z=(0,g.useSharedValue)(0),$=(0,g.useSharedValue)(0),ee=(0,g.useAnimatedStyle)(function(){var e=function(){return{opacity:(0,g.withTiming)($.value,{duration:500}),transform:[{translateX:Z.value}]}};return e._closure={withTiming:g.withTiming,opacity:$,offset:Z},e.asString="function _f(){const{withTiming,opacity,offset}=jsThis._closure;{return{opacity:withTiming(opacity.value,{duration:500}),transform:[{translateX:offset.value}]};}}",e.__workletHash=9560942952119,e.__location="/home/runner/work/open-polito/open-polito/src/screens/Timetable.tsx (51:37)",e.__optimalization=2,e}()),te=function(e){$.value=(0,g.withSequence)((0,g.withTiming)(0,{duration:250}),(0,g.withTiming)(0,{duration:500}),(0,g.withTiming)(1,{duration:250})),Z.value="l"===e?(0,g.withSequence)((0,g.withTiming)(32,{duration:750}),(0,g.withTiming)(-32,{duration:0}),(0,g.withTiming)(0,{duration:750})):(0,g.withSequence)((0,g.withTiming)(-32,{duration:750}),(0,g.withTiming)(32,{duration:0}),(0,g.withTiming)(0,{duration:750}))};(0,i.useEffect)((function(){return(0,r.default)((function*(){S||te("r"),G&&clearTimeout(G),q(setTimeout((0,r.default)((function*(){O(!1);var e=[];T([]);try{e=yield(0,o.getTimetable)(n,null!=S?S:new Date),O(!0)}catch(a){}finally{if(!S){var t=(0,u.default)().startOf("isoWeek").toDate();L&&j(t)}T(e)}})),250))}))(),function(){clearTimeout(G),B(!1)}}),[K]);var ne=(0,i.useMemo)((function(){return"week"===I&&(null==S?void 0:S.getTime())===(0,u.default)().startOf("isoWeek").toDate().getTime()||"day"===I&&(0,u.default)(S).add(H-1,"days").toDate().getTime()===(0,u.default)().startOf("day").toDate().getTime()}),[S,H,I]);return i.default.createElement(y.default,null,i.default.createElement(v.default,{headerType:v.HEADER_TYPE.MAIN,title:e("timetable")}),i.default.createElement(c.View,{style:{flex:1,paddingTop:24*b.p}},i.default.createElement(c.View,{style:{paddingHorizontal:16*b.p}},i.default.createElement(m.default,{selectedDay:"week"===I?null:H,onDayChanged:function(e){U(e)},onLayoutChanged:function(e){W(e)},weekStartDate:S,onWeekStartDateChanged:function(e){S&&e.getTime()<S.getTime()?te("l"):te("r"),j((0,u.default)(e).startOf("isoWeek").toDate()),Q(!K)},timetableDays:C})),i.default.createElement(c.ScrollView,{style:{flex:1}},i.default.createElement(g.default.View,{style:[ee,{flex:1}]},i.default.createElement(p.default,{showLine:ne,dark:a}),i.default.createElement(s.default,{loaded:h,timetableDays:C,layout:I,selectedDay:H})))))};t.default=h},1394:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(23)),l=a(n(15)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),o=n(7),i=a(n(1395)),f=n(28),c=n(54),d=n(17);function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var p=function(e){var t=e.loaded,n=e.timetableDays,a=e.layout,s=e.selectedDay,p=(0,f.useDispatch)(),m=(0,f.useSelector)((function(e){return e.session.config})),g=(0,u.useState)(o.Dimensions.get("window").height/15),y=(0,l.default)(g,2),v=y[0],b=(y[1],(0,u.useState)(["","",""])),w=(0,l.default)(b,2),E=w[0],h=w[1],O=(0,u.useMemo)((function(){return 1===n.length?n:n.slice(1,6)}),[n]);return(0,u.useEffect)((function(){h(function(){var e=[];return n.forEach((function(t){t.forEach((function(t){e.includes(t.course_name)||e.push(t.course_name)}))})),e.sort()}())}),[O]),(0,u.useEffect)((function(){if(m.timetableOverlap&&m.timetablePriority){var e=(0,r.default)(m.timetablePriority),t=!1;E.forEach((function(n){""===n.trim()||m.timetablePriority.includes(n)||(e.push(n),t=!0)})),t&&p((0,c.setConfig)(Object.assign({},m,{timetablePriority:e})))}}),[O,E,m,p]),u.default.createElement(o.View,{style:{position:"absolute",flex:1,marginLeft:32*d.p,marginRight:16*d.p,flexDirection:"row",alignItems:"flex-start",justifyContent:"center"}},("week"===a?O:[O[s-1]]).map((function(e,n){return u.default.createElement(i.default,{fake:!t,config:m,key:n,day:e,h:v,index:n,courseNames:E})})))};t.default=p},1395:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(23)),l=a(n(15)),u=a(n(8)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),i=n(7),f=a(n(16)),c=n(17),d=a(n(1396)),s=a(n(1403));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var m=function(e){var t=e.fake,n=void 0!==t&&t,a=e.day,p=e.h,m=e.courseNames,g=e.config,y=(e.index,(0,o.useState)(0)),v=(0,l.default)(y,2),b=v[0],w=v[1],E=(0,o.useMemo)((function(){return(0,r.default)(a).sort((function(e,t){return g.timetablePriority.indexOf(t.course_name)-g.timetablePriority.indexOf(e.course_name)}))}),[g.timetablePriority,a]),h=(0,o.useMemo)((function(){if("priority"===g.timetableOverlap)return[];if(0===a.length)return[];for(var e=[],t=(0,u.default)(a[0].start_time).set({h:8,m:45}),n=function(n){t.add(90,"m");var r=[];a.map((function(e){e.start_time<t.toDate().getTime()&&t.toDate().getTime()<e.end_time&&r.push(e)})),r.length>1&&e.push(r)},r=0;r<9;r++)n();return e}),[a,g.timetableOverlap]);return o.default.createElement(i.View,{onLayout:function(e){w(e.nativeEvent.layout.width)},style:{backgroundColor:f.default.white,flex:1,zIndex:200,flexDirection:"column",justifyContent:"flex-start",alignItems:"center",borderColor:f.default.gray200,marginHorizontal:1*c.p}},n?o.default.createElement(d.default,{w:b,h:p}):"priority"===g.timetableOverlap?E.map((function(e,t){return o.default.createElement(s.default,{key:t,overlapGroup:[],slot:e,w:b,h:p,courseNames:m,index:t})})):a.map((function(e,t){var n=function(e){var t=[];return h.forEach((function(n){n.includes(e)&&(t=n)})),t}(e),a=n.findIndex((function(t){return e===t}));return o.default.createElement(s.default,{key:t,overlapGroup:n,slot:e,w:b,h:p,courseNames:m,index:a})})))};t.default=m},1396:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(15)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),u=n(7),o=n(148),i=n(17),f=a(n(1401)),c=a(n(1402));function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var s=function(e){var t=e.w,n=e.h,a=(0,l.useState)(Math.ceil(2*Math.random())),d=(0,r.default)(a,1)[0],s=(0,l.useState)(Array.from({length:d},(function(e,t){return(t+1)*(3+Math.random())*n}))),p=(0,r.default)(s,1)[0];return l.default.createElement(u.View,{style:{height:10*n,position:"absolute"}},l.default.createElement(c.default,null,l.default.createElement(f.default,{width:t,height:15*n},Array.from({length:d}).map((function(e,a){return l.default.createElement(o.Rect,{key:a,x:0,y:p[a],rx:4*i.p,ry:4*i.p,width:t-4,height:2*n})})))))};t.default=s},1401:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(5)),l=n(7),u=function(e){var t=e.width,n=e.height,a=e.children;return r.default.createElement(l.View,{style:{width:t,height:n}},a)};t.default=u},1402:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=a(n(15)),u=f(n(5)),o=f(n(24));function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var c=function(e){var t=e.children,n=(0,u.useState)(!1),a=(0,l.default)(n,2),i=a[0],f=a[1],c=(0,u.useState)(!0),d=(0,l.default)(c,2),s=d[0],p=d[1],m=(0,o.useSharedValue)(0),g=(0,o.useAnimatedStyle)(function(){var e=function(){return{opacity:m.value,transform:[{translateY:8-8*m.value},{translateX:8-8*m.value}]}};return e._closure={offset:m},e.asString="function _f(){const{offset}=jsThis._closure;{return{opacity:offset.value,transform:[{translateY:8-offset.value*8},{translateX:8-offset.value*8}]};}}",e.__workletHash=4069580825127,e.__location="/home/runner/work/open-polito/open-polito/src/components/loaders/LoaderBase.tsx (16:37)",e.__optimalization=3,e}());return(0,u.useEffect)((function(){return(0,r.default)((function*(){setTimeout((function(){s&&f(!0)}),150)}))(),function(){p(!1)}}),[]),(0,u.useEffect)((function(){i&&(m.value=(0,o.withTiming)(1,{duration:200}))}),[i]),i?u.default.createElement(o.default.View,{style:[g]},t):null};t.default=c},1403:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(15)),l=y(n(5)),u=y(n(16)),o=y(n(24)),i=a(n(8)),f=n(7),c=n(17),d=a(n(21)),s=a(n(25)),p=n(67),m=a(n(1404));function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var v=function(e){var t=e.overlapGroup,n=e.slot,a=e.w,g=e.h,y=e.courseNames,v=e.index,b=(0,l.useContext)(p.ModalContext).setModal,w=(0,o.useSharedValue)(0),E=(0,o.useSharedValue)(0),h=(0,o.useSharedValue)(0),O=(0,l.useState)(0),k=(0,r.default)(O,2),_=k[0],S=k[1];(0,l.useEffect)((function(){E.value=1}),[]),(0,l.useEffect)((function(){w.value=a,a>=60&&setTimeout((function(){h.value=1}),100)}),[a]);var j=(0,o.useAnimatedStyle)(function(){var e=function(){return{opacity:(0,o.withTiming)(h.value,{duration:500})}};return e._closure={withTiming:o.withTiming,textOpacity:h},e.asString="function _f(){const{withTiming,textOpacity}=jsThis._closure;{return{opacity:withTiming(textOpacity.value,{duration:500})};}}",e.__workletHash=3417517497760,e.__location="/home/runner/work/open-polito/open-polito/src/components/timetable/TimetableEvent.tsx (53:48)",e.__optimalization=2,e}()),x=(0,o.useAnimatedStyle)(function(){var e=function(){return{width:(0,o.withTiming)(t.length>0?w.value/t.length:w.value,{duration:250}),left:(0,o.withTiming)(t.length>0?v*(w.value/t.length):0,{duration:250})}};return e._closure={withTiming:o.withTiming,overlapGroup:t,offset:w,index:v},e.asString="function _f(){const{withTiming,overlapGroup,offset,index}=jsThis._closure;{return{width:withTiming(overlapGroup.length>0?offset.value/overlapGroup.length:offset.value,{duration:250}),left:withTiming(overlapGroup.length>0?index*(offset.value/overlapGroup.length):0,{duration:250})};}}",e.__workletHash=0xa9304f61bed,e.__location="/home/runner/work/open-polito/open-polito/src/components/timetable/TimetableEvent.tsx (57:37)",e.__optimalization=2,e}());return l.default.createElement(o.default.View,{onLayout:function(e){return S(e.nativeEvent.layout.width)},style:[{overflow:"hidden",position:"absolute",top:g+i.default.duration((0,i.default)(n.start_time).diff((0,i.default)(n.start_time).set({h:8,m:0}))).as("ms")/36e5*g-g/2,borderRadius:4*c.p,backgroundColor:u.courseColors[y.findIndex((function(e){return e==n.course_name}))],height:i.default.duration(n.end_time-n.start_time).as("ms")/36e5*g},x]},l.default.createElement(f.TouchableOpacity,{style:{flex:1,padding:4*c.p},onPress:function(){b(l.default.createElement(m.default,{slot:n}))}},_>=25?l.default.createElement(o.default.View,{style:[j]},l.default.createElement(d.default,{w:"r",s:8*c.p,c:u.default.white,numberOfLines:2},n.course_name)):null,_>=60?l.default.createElement(o.default.View,{style:[j]},l.default.createElement(f.View,{style:{flexDirection:"row",marginTop:8*c.p,alignItems:"center",justifyContent:"flex-start",overflow:"hidden"}},l.default.createElement(s.default,{name:"map-pin",size:8*c.p,color:u.default.gray50}),l.default.createElement(d.default,{w:"r",s:8*c.p,c:u.default.gray50,numberOfLines:2,style:{marginLeft:2*c.p}},n.room)),l.default.createElement(f.View,{style:{opacity:E.value,flexDirection:"row",marginTop:4*c.p,alignItems:"center",justifyContent:"flex-start",overflow:"hidden"}},l.default.createElement(s.default,{name:"list",size:8*c.p,color:u.default.gray50}),l.default.createElement(d.default,{w:"r",s:8*c.p,c:u.default.gray50,numberOfLines:2,style:{marginLeft:2*c.p}},n.type))):null))};t.default=v},1404:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),l=n(7),u=a(n(16)),o=a(n(8)),i=a(n(25)),f=n(17),c=n(22),d=a(n(21)),s=a(n(165));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var m=function(e){var t=e.slot,n=(0,r.useContext)(c.DeviceContext).dark,a=(0,r.useMemo)((function(){return[{icon:"map-pin",name:t.room},{icon:"align-justified",name:t.type},{icon:"clock",name:(0,o.default)(t.start_time).format("HH:mm")+" - "+(0,o.default)(t.end_time).format("HH:mm")+" ("+(0,o.default)(t.start_time).format("ll")+")"},{icon:"user",name:t.professor.surname+" "+t.professor.name}]}),[t]);return r.default.createElement(s.default,{title:t.course_name},a.map((function(e,t){return r.default.createElement(l.View,{style:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginTop:(0==t?0:8)*f.p}},r.default.createElement(i.default,{name:e.icon,size:16*f.p,color:n?u.default.gray300:u.default.gray600,style:{marginRight:8*f.p}}),r.default.createElement(d.default,{s:12*f.p,c:n?u.default.gray100:u.default.gray800,w:"r"},e.name))})))};t.default=m},1405:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(15)),l=a(n(8)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),o=n(7),i=a(n(16)),f=n(17),c=a(n(21));function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var s=function(e){var t=e.showLine,n=e.dark,a=(0,u.useState)(o.Dimensions.get("window").height/15),d=(0,r.default)(a,2),s=d[0],p=(d[1],(0,u.useState)((0,l.default)())),m=(0,r.default)(p,2),g=m[0],y=m[1],v=(0,u.useState)(!0),b=(0,r.default)(v,2),w=b[0],E=b[1],h=(0,u.useState)(null),O=(0,r.default)(h,2),k=O[0];O[1];return(0,u.useEffect)((function(){return E(!0),function(){k&&clearTimeout(k),E(!1)}}),[]),(0,u.useEffect)((function(){setTimeout((function(){w&&y((0,l.default)())}),1e4)}),[g,w]),u.default.createElement(o.View,{style:{flex:1,paddingLeft:8*f.p,paddingRight:16*f.p,paddingBottom:16*f.p,flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"}},t?u.default.createElement(o.View,{style:{zIndex:300,height:0,borderTopColor:i.default.red,borderBottomColor:i.default.red,backgroundColor:i.default.red,borderTopWidth:.5*f.p,borderBottomWidth:.5*f.p,flexDirection:"row",justifyContent:"flex-start",alignItems:"center",transform:[{translateY:s+l.default.duration(g.diff((0,l.default)().set({h:8,m:0}))).as("ms")/36e5*s-s/2}]}},u.default.createElement(o.View,{style:{backgroundColor:i.default.red,width:8*f.p,height:8*f.p,borderRadius:16*f.p}})):null,Array.from({length:14}).map((function(e,t){return u.default.createElement(o.View,{key:t,style:{zIndex:100,width:"100%",height:0==t?s/2:s,flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end"}},u.default.createElement(c.default,{s:8*f.p,c:n?i.default.gray200:i.default.gray700,w:"r",style:{transform:[{translateY:4*f.p}]}},8+t+":00"),u.default.createElement(o.View,{style:{flex:1,borderBottomWidth:.5*f.p,borderColor:n?i.default.gray500:i.default.gray200,marginLeft:4*f.p,height:s,flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end"}}))})))};t.default=s},1406:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=h(n(5)),l=n(7),u=a(n(16)),o=a(n(8)),i=n(33),f=a(n(1407)),c=h(n(24)),d=a(n(21)),s=n(22),p=n(17),m=a(n(249)),g=a(n(25)),y=n(1408),v=n(61),b=n(67),w=a(n(1411));function E(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var O=function(e){var t=e.selectedDay,n=void 0===t?null:t,a=e.timetableDays,E=e.weekStartDate,h=e.onLayoutChanged,O=e.onDayChanged,k=e.onWeekStartDateChanged,_=(0,i.useTranslation)().t,S=(0,r.useContext)(s.DeviceContext).dark,j=(0,r.useContext)(b.ModalContext).setModal,x=function(e){P.value=(0,c.withSequence)((0,c.withTiming)(0,{duration:250}),(0,c.withTiming)(1,{duration:250})),k(e)},P=(0,c.useSharedValue)(1),M=(0,c.useAnimatedStyle)(function(){var e=function(){return{opacity:P.value}};return e._closure={opacity:P},e.asString="function _f(){const{opacity}=jsThis._closure;{return{opacity:opacity.value};}}",e.__workletHash=1880562015862,e.__location="/home/runner/work/open-polito/open-polito/src/components/timetable/TimetableHeader.tsx (70:37)",e.__optimalization=3,e}()),T=(0,r.useMemo)((function(){var e=(0,o.default)(E),t=(0,o.default)(E).add(4,"day");return E?E.getTime()==(0,o.default)().startOf("w").toDate().getTime()?_("thisWeek"):e.get("date")+" "+(e.get("month")!=t.get("month")?e.format("MMM "):"")+(e.get("year")!=t.get("year")?e.format("YYYY "):"")+"- "+t.format("D MMM YYYY"):_("thisWeek")}),[E,_]);return r.default.createElement(l.View,{style:{borderBottomWidth:1*p.p,borderBottomColor:u.default.gray200}},r.default.createElement(l.View,{style:{marginBottom:16*p.p,flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},"android"===l.Platform.OS?r.default.createElement(m.default,{secondary:!0,small:!0,text:_("jumpToDate"),icon:"chevrons-right",onPress:function(){return e=function(e){e&&x(new Date(e))},void y.DateTimePickerAndroid.open({mode:"date",value:new Date,onChange:function(t){return e(t.nativeEvent.timestamp)}});var e}}):r.default.createElement(l.View,null),r.default.createElement(l.View,{style:{flexDirection:"row",alignItems:"center"}},r.default.createElement(f.default,{defaultValue:"week",onValueChange:function(e){!function(e){h(e)}(e)},label:"Layout:",items:[{icon:"layout-rows",value:"day"},{icon:"layout-columns",value:"week"}],dark:S}),r.default.createElement(v.TouchableOpacity,{style:{marginLeft:24*p.p}},r.default.createElement(g.default,{onPress:function(){return j(r.default.createElement(w.default,null))},name:"settings",size:20*p.p,color:S?u.default.gray100:u.default.gray800})))),r.default.createElement(l.View,{style:{marginBottom:16*p.p,flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},r.default.createElement(l.Pressable,{onPress:function(){return x((0,o.default)(E).subtract(1,"w").toDate())}},r.default.createElement(g.default,{name:"arrow-left",size:24*p.p,color:S?u.default.gray100:u.default.gray800})),r.default.createElement(c.default.View,{style:[M]},r.default.createElement(d.default,{c:S?u.default.gray100:u.default.gray800,s:12*p.p,w:"m"},T)),r.default.createElement(l.Pressable,{onPress:function(){return x((0,o.default)(E).add(1,"w").toDate())}},r.default.createElement(g.default,{name:"arrow-right",size:24*p.p,color:S?u.default.gray100:u.default.gray800}))),r.default.createElement(l.View,{style:{marginLeft:12,flexDirection:"row",alignItems:"flex-start",justifyContent:"space-around",paddingBottom:12}},a.slice(1,6).map((function(e,t){return r.default.createElement(l.Pressable,{onPress:function(){O(t+1)},key:t,style:{opacity:E?1:0,flexDirection:"column",justifyContent:"center",alignItems:"center",paddingHorizontal:12,paddingVertical:4,borderRadius:4,backgroundColor:n==t+1?u.default.accent300:S?u.default.gray700:u.default.gray200}},r.default.createElement(d.default,{s:10*p.p,w:"r",c:n==t+1||S?u.default.gray100:u.default.gray800},E?(0,o.default)(E).add(t,"d").format("ddd"):""),r.default.createElement(d.default,{s:10*p.p,w:"r",c:n==t+1||S?u.default.gray100:u.default.gray700,key:t},E?(0,o.default)(E).add(t,"d").date():""))}))))};t.default=O},1407:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(15)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),u=n(7),o=a(n(16)),i=n(17),f=a(n(42)),c=a(n(25)),d=a(n(21));function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var p=function(e){var t=e.items,n=e.label,a=void 0===n?"":n,s=e.onValueChange,p=e.defaultValue,m=void 0===p?t[0].value:p,g=e.dark,y=(0,l.useState)(m),v=(0,r.default)(y,2),b=v[0],w=v[1];return(0,l.useEffect)((function(){s(b)}),[b]),l.default.createElement(u.View,{style:{flexDirection:"row",alignItems:"center"}},a?l.default.createElement(d.default,{s:10*i.p,w:"r",c:g?o.default.gray100:o.default.gray800,style:{marginRight:4*i.p}},a):null,l.default.createElement(u.View,{style:{flexDirection:"row",backgroundColor:g?o.default.gray700:o.default.gray200,marginLeft:4*i.p,borderRadius:4*i.p}},t.map((function(e,n){return l.default.createElement(f.default,{onPress:function(){w(e.value)},key:e.value,style:[{backgroundColor:e.value==b?o.default.accent300:"rgba(0,0,0,0)",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:4*i.p},0===n?{borderTopLeftRadius:4*i.p,borderBottomLeftRadius:4*i.p}:n===t.length-1?{borderTopRightRadius:4*i.p,borderBottomRightRadius:4*i.p}:{}]},l.default.createElement(c.default,{name:e.icon,size:16*i.p,color:e.value==b?o.default.gray50:g?o.default.gray200:o.default.gray700}))}))))};t.default=p},1411:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(57)),l=a(n(15)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),o=n(33),i=n(7),f=n(28),c=n(54),d=a(n(1412)),s=a(n(633)),p=n(22),m=a(n(165)),g=a(n(16));function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}var v=function(){var e=(0,f.useDispatch)(),t=(0,o.useTranslation)().t,n=(0,u.useContext)(p.DeviceContext).dark,a=(0,u.useState)(!1),y=(0,l.default)(a,2),v=y[0],b=y[1];(0,u.useEffect)((function(){setTimeout((function(){return b(!0)}),0)}),[]);var w=(0,f.useSelector)((function(e){return e.session.config})),E=(0,u.useMemo)((function(){return w.timetablePriority.map((function(e){return{label:e,value:e}}))}),[w]),h=(0,u.useCallback)((function(){var t="split"===w.timetableOverlap?"priority":"split";e((0,c.setConfig)(Object.assign({},w,{timetableOverlap:t})))}),[w,e]),O=(0,u.useMemo)((function(){return[{name:t("timetablePriority"),description:t("timetablePriorityDesc"),icon:"stack-2",toggle:!0,toggleValue:"priority"===w.timetableOverlap,settingsFunction:h},{name:t("timetablePriorityList"),settingsFunction:function(){},disabled:"priority"!==w.timetableOverlap,children:u.default.createElement(i.View,null,u.default.createElement(d.default,{dark:n,disabled:"priority"!==w.timetableOverlap,items:E,callback:function(t){return e((0,c.setConfig)(Object.assign({},w,{timetablePriority:t.filter((function(e){return""!==e}))})))}})),paddingBottom:!1}]}),[w,n,e,E,t,h]);return u.default.createElement(m.default,{title:t("timetableOptions")},u.default.createElement(i.View,null,v?O.map((function(e){return u.default.createElement(s.default,(0,r.default)({key:e.name},e))})):u.default.createElement(i.ActivityIndicator,{color:g.default.accent300})))};t.default=v},1412:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(15)),l=m(n(5)),u=n(7),o=m(n(1413)),i=a(n(16)),f=n(61),c=n(17),d=a(n(25)),s=a(n(21));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var g=function(e){var t=e.items,n=e.callback,a=e.disabled,p=e.dark,m=(0,l.useState)(t),g=(0,r.default)(m,2),y=g[0],v=g[1];(0,l.useEffect)((function(){n(y.map((function(e){return e.label})))}),[y]);return l.default.createElement(f.GestureHandlerRootView,null,l.default.createElement(o.default,{onDragEnd:function(e){var t=e.data;return v(t)},data:y,keyExtractor:function(e){return e.value},renderItem:function(e){var t=e.item,n=(e.index,e.drag);return l.default.createElement(o.ScaleDecorator,null,l.default.createElement(u.TouchableOpacity,{disabled:a,onLongPress:n,onPressIn:n,onPress:n,style:{paddingVertical:4*c.p}},l.default.createElement(u.View,{style:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginLeft:0*c.p,opacity:a?.5:1}},l.default.createElement(d.default,{name:"grid-dots",size:24*c.p,color:p?i.default.gray300:i.default.gray600}),l.default.createElement(u.View,{style:{marginLeft:8*c.p}},l.default.createElement(s.default,{s:12*c.p,c:p?i.default.gray100:i.default.gray800,w:"r"},t.label)))))}}))};t.default=g},1425:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=a(n(15)),u=x(n(5)),o=n(33),i=n(7),f=n(28),c=a(n(16)),d=a(n(44)),s=x(n(59)),p=a(n(93)),m=n(22),g=n(61),y=n(17),v=a(n(21)),b=a(n(147)),w=a(n(122)),E=a(n(25)),h=a(n(8)),O=a(n(150)),k=a(n(1426)),_=a(n(1427)),S=a(n(139));function j(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var P=["overview","permanentMarks","provisionalMarks"],M=function(e){var t=e.avg,n=e.dark,a=(0,o.useTranslation)().t;return u.default.createElement(i.View,{style:{flexDirection:"row",alignItems:"center"}},u.default.createElement(k.default,{strokeWidth:8*y.p,radius:30*y.p,value:t,dark:n,max:30}),u.default.createElement(i.View,{style:{marginLeft:16*y.p}},u.default.createElement(v.default,{s:16*y.p,w:"m",c:n?c.default.gray100:c.default.gray800,style:{marginBottom:8*y.p}},a("yourAverageMark"),"*"),u.default.createElement(v.default,{s:10*y.p,w:"r",c:n?c.default.gray300:c.default.gray600},"*",a("yourAverageMarkNotice"))))},T=function(e){var t,n=e.mark,a=e.provisional,r=e.dark,l=(0,u.useMemo)((function(){return C(n,a,r)}),[n,a,r]),f=(0,o.useTranslation)().t;return u.default.createElement(i.View,{style:{flexDirection:"row",padding:16*y.p,borderRadius:4*y.p,backgroundColor:r?c.default.gray700:c.default.gray200,alignItems:"flex-start"}},u.default.createElement(i.View,{style:{flexDirection:"column",flex:1}},u.default.createElement(i.View,{style:{flexDirection:"row"}},a?u.default.createElement(i.View,{style:{width:16*y.p,height:16*y.p,borderRadius:16*y.p,marginRight:8*y.p,backgroundColor:c.default.gray200,flexDirection:"row",alignItems:"center",justifyContent:"center"}},u.default.createElement(v.default,{s:10,w:"b",c:c.default.gray900},n.status)):null,u.default.createElement(v.default,{s:12*y.p,w:"m",c:r?c.default.gray200:c.default.gray700},n.name)),u.default.createElement(i.View,{style:{flexDirection:a?"column":"row",marginTop:16*y.p}},l)),parseInt(n.mark)?u.default.createElement(k.default,{radius:20*y.p,value:parseInt(n.mark),max:30,dark:r},("30 e lode"===(null==(t=n.mark)?void 0:t.toLowerCase())||parseInt(n.mark)>30)&&u.default.createElement(u.default.Fragment,null,u.default.createElement(v.default,{style:{marginTop:-4*y.p},s:8*y.p,c:r?c.default.gray100:c.default.gray800,w:"b"},"LODE"))):u.default.createElement(i.View,{style:[{padding:8*y.p,borderRadius:4*y.p,backgroundColor:c.default.accent300},!n.mark||n.failed||n.absent?{backgroundColor:c.default.red}:null]},n.failed?u.default.createElement(v.default,{s:12,w:"m",c:c.default.gray100},f("examFailed")):null,n.absent?u.default.createElement(v.default,{s:12,w:"m",c:c.default.gray100},f("examAbsent")):null,n.mark?u.default.createElement(v.default,{s:12,w:"m",c:c.default.gray100},n.mark):null))},C=function(e,t,n){var a=t?["date","message"]:["date","credits"],r=[],l=[];return a.forEach((function(t){switch(t){case"date":r.push("calendar-time"),l.push((0,h.default)(e.date).format("ll"));break;case"credits":r.push("north-star"),l.push(e.num_credits+" "+O.default.t("credits"));break;case"message":r.push("message"),l.push(e.message||"");break;default:r.push(""),l.push("")}})),a.map((function(e,a){return u.default.createElement(i.View,{style:[{flexDirection:"row",alignItems:"message"==e?"flex-start":"center",flex:1},t&&a>0?{marginTop:8*y.p}:{}]},u.default.createElement(E.default,{name:r[a],size:16*y.p,color:n?c.default.gray200:c.default.gray700,style:{marginRight:8*y.p}}),u.default.createElement(v.default,{style:{marginRight:8*y.p},s:10*y.p,w:"r",c:n?c.default.gray200:c.default.gray700},l[a]||""))}))},D=function(){var e=(0,o.useTranslation)().t,t=(0,u.useContext)(m.DeviceContext).dark,n=(0,f.useSelector)((function(e){return e.courses})).marks,a=(0,u.useState)(P[0]),h=(0,l.default)(a,2),O=h[0],k=h[1],j=(0,u.useMemo)((function(){return O==P[1]?n.permanent:O==P[2]?n.provisional:[]}),[n,O]),x=(0,u.useMemo)((function(){return function(e){var t=e.filter((function(e){return!!parseInt(e.mark||"")})),n=t.reduce((function(e,t){return e+t.num_credits}),0);return parseFloat((t.reduce((function(e,t){return e+parseInt(t.mark)*t.num_credits}),0)/n).toFixed(2))}(n.permanent)}),[n]),C=(0,u.useMemo)((function(){return i.StyleSheet.create({container:{paddingTop:24*y.p,flex:1},paddingHorizontal:{paddingHorizontal:16*y.p},list:{paddingHorizontal:16*y.p,paddingBottom:24*y.p}})}),[]);return u.default.createElement(d.default,null,u.default.createElement(s.default,{title:e("exams"),headerType:s.HEADER_TYPE.MAIN}),u.default.createElement(p.default,{dark:t,adjusted:!0,items:P.map((function(t){return{label:e(t),value:t}})),onChange:function(e){return k(P[e])}}),u.default.createElement(i.View,{style:C.container},O==P[2]?u.default.createElement(i.View,{style:C.paddingHorizontal},u.default.createElement(g.TouchableOpacity,{onPress:(0,r.default)((function*(){return yield(0,S.default)("https://didattica.polito.it/img/RE_stati.jpg")})),style:{flexDirection:"row",alignItems:"center",marginBottom:16*y.p}},u.default.createElement(E.default,{name:"help",size:12*y.p,color:t?c.default.gray200:c.default.gray700,style:{marginRight:8*y.p}}),u.default.createElement(v.default,{s:12,w:"m",c:t?c.default.gray200:c.default.gray700},e("statusCodeHelp")))):null,O==P[0]?u.default.createElement(i.View,{style:C.list},u.default.createElement(M,{avg:x,dark:t}),u.default.createElement(i.View,{style:{height:1*y.p,backgroundColor:c.default.gray500,marginVertical:24*y.p}}),u.default.createElement(b.default,{title:e("progressOverTime"),dark:t},u.default.createElement(i.View,null,u.default.createElement(_.default,{marks:n.permanent||[],dark:t})))):u.default.createElement(i.FlatList,{contentContainerStyle:C.list,data:j,keyExtractor:function(e){return e.date+e.name},renderItem:function(e){var n=e.item;return u.default.createElement(T,{mark:(P[1],n),provisional:O==P[2],dark:t})},ItemSeparatorComponent:function(){return u.default.createElement(i.View,{style:{height:16*y.p}})},ListEmptyComponent:u.default.createElement(w.default,null)})))};t.default=D},1426:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(5)),l=n(7),u=d(n(148)),o=a(n(16)),i=n(17),f=a(n(21));function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var s=function(e){var t=e.label,n=e.value,a=e.max,c=e.radius,d=e.strokeWidth,s=void 0===d?4*i.p:d,p=e.fontSize,m=e.backgroundColor,g=e.dark,y=e.children,v=2*Math.PI*c,b=(0,r.useMemo)((function(){return n<=a?n:a}),[n,a]);return r.default.createElement(l.View,{style:{position:"relative"}},r.default.createElement(u.default,{width:2*(c+s),height:2*(c+s)},r.default.createElement(u.Circle,{transform:"rotate(-90 "+(c+s)+" "+(c+s)+")",strokeWidth:s,fill:m||"transparent",stroke:g?o.default.gray700:o.default.gray200,r:c,cx:c+s,cy:c+s}),r.default.createElement(u.Circle,{transform:"rotate(-90 "+(c+s)+" "+(c+s)+")",strokeWidth:s,fill:"transparent",stroke:o.default.accent300,strokeDasharray:v,strokeDashoffset:"number"===typeof b?(100-100*b/a)*v/100:0,r:c,cx:c+s,cy:c+s})),r.default.createElement(l.View,{style:{position:"absolute",width:2*(c+s),height:2*(c+s),flexDirection:"column",alignItems:"center",justifyContent:"center"}},r.default.createElement(f.default,{s:p||(t||"string"===typeof b?10*i.p:16*i.p),c:g?o.default.gray100:o.default.gray800,w:"b"},t||b),y))};t.default=s},1427:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(23)),l=a(n(8)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),o=n(33),i=n(7),f=a(n(1428)),c=a(n(16)),d=n(17),s=a(n(21));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var m=function(e){var t=e.marks,n=e.dark,a=(0,o.useTranslation)().t,p=(0,i.useWindowDimensions)().width,m=(0,u.useMemo)((function(){return(0,r.default)(t.filter((function(e){return parseInt(e.mark)&&l.default.duration(Date.now()-e.date).asDays()<=365}))).sort((function(e,t){return e.date-t.date}))}),[t]),g=(0,u.useMemo)((function(){for(var e=new Array(m.length),t=0,n=0;n<m.length;n++)0==n?(t+=m[n].num_credits,e[n]=parseInt(m[n].mark)||0):(e[n]=(e[n-1]*t+(parseInt(m[n].mark)||0)*m[n].num_credits)/(t+m[n].num_credits),t+=m[n].num_credits);return e}),[m]),y=(0,u.useMemo)((function(){return{labels:m.map((function(e){return(0,l.default)(e.date).format("MMM D")})),datasets:[{data:g,color:function(){return c.default.accent300},strokeWidth:2*d.p}],legend:[a("weightedAverage")]}}),[m,g,a]);return 0==m.length?u.default.createElement(i.View,{style:{flexDirection:"row",justifyContent:"center"}},u.default.createElement(s.default,{s:12,w:"m",c:n?c.default.gray200:c.default.gray700},"You'll see your progress when you get at least 1 permament mark.")):u.default.createElement(f.default,{data:y,width:p,height:220,yAxisInterval:1,chartConfig:{backgroundColor:"#e26a00",backgroundGradientFrom:c.default.gray900,backgroundGradientTo:c.default.gray700,decimalPlaces:2,color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(255, 255, 255, "+e+")"},labelColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(255, 255, 255, "+e+")"},style:{borderRadius:16},propsForDots:{r:"6",strokeWidth:"2",stroke:c.default.accent300}},style:{borderRadius:4*d.p,transform:[{translateX:-16*d.p}]}})};t.default=m},1431:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.useTranslation)().t,t=(0,s.useDispatch)(),n=(0,u.useContext)(g.DeviceContext),a=n.dark,j=n.device,x=(0,u.useContext)(S.ModalContext).setModal,C=(0,s.useSelector)((function(e){return e.exams})),D=C.exams,V=C.getExamsStatus,I=(0,u.useState)(T[0]),W=(0,l.default)(I,2),R=W[0],A=W[1],L=(0,u.useState)("en"),B=(0,l.default)(L,2),N=B[0],z=B[1];(0,u.useEffect)((function(){V.code!==m.STATUS.IDLE&&V.code!==m.STATUS.ERROR||t((0,p.getExams)(j)),(0,r.default)((function*(){switch(d.getLocales()[0].languageCode){case"en":z("en");break;case"it":z("it");break;default:z("en")}}))()}),[j,t,V.code]);var H=(0,u.useMemo)((function(){V.code!==m.STATUS.PENDING&&t((0,p.getExams)(j))}),[V,j,t]),U=(0,u.useMemo)((function(){switch(R){case T[0]:return D;case T[1]:return D.filter((function(e){return P(e)}));case T[2]:return D.filter((function(e){return M(e)}));case T[3]:return D.filter((function(e){return!(t=e).user_is_signed_up&&0!==t.error.id;var t}));default:return[]}}),[R,D]),F=function(t){return u.default.createElement(i.View,{style:{flexDirection:"row"}},u.default.createElement(i.View,{style:{flexDirection:"column",flex:1,padding:16*w.p,paddingRight:8*w.p,paddingBottom:8*w.p,borderTopLeftRadius:4*w.p,borderBottomLeftRadius:4*w.p,backgroundColor:a?f.default.gray700:f.default.gray200}},u.default.createElement(i.View,{style:{flexDirection:"row",alignItems:"center"}},u.default.createElement(E.default,{name:t.user_is_signed_up?"circle-check":0===t.error.id?"circle":"circle-off",color:t.user_is_signed_up?f.default.green:0===t.error.id?f.default.accent200:f.default.red,size:24*w.p,style:{marginRight:8*w.p}}),u.default.createElement(h.default,{s:12*w.p,w:"m",c:a?f.default.gray200:f.default.gray700},t.exam_name)),u.default.createElement(i.View,{style:{flexDirection:"column",marginTop:16*w.p}},["course","date","deadline","rooms"].map((function(n){return function(t,n){var r="date"===t?"calendar-time":"course"===t?"grid-pattern":"type"===t?"writing":"deadline"===t?"alert-triangle":"rooms"===t?"map-pin":"user-circle",l="date"===t?(0,c.default)(n.date).format("lll")+" ("+(0,c.default)(n.date).fromNow()+")":"course"===t?n.course_id:"type"===t?n.type:"deadline"===t?e("bookingDeadline")+": "+(0,c.default)(n.signup_deadline).format("lll")+" ("+(0,c.default)(n.signup_deadline).fromNow()+")":"rooms"===t?n.rooms.join(", "):"(coming soon)";return u.default.createElement(i.View,{style:{flexDirection:"row",alignItems:"center",marginBottom:8*w.p}},u.default.createElement(E.default,{name:r,size:16*w.p,color:a?f.default.gray200:f.default.gray700,style:{marginRight:8*w.p}}),u.default.createElement(h.default,{numberOfLines:1,style:{marginRight:8*w.p},s:10*w.p,w:"r",c:a?f.default.gray200:f.default.gray700},l))}(n,t)}))),0===t.error.id||""===t.error.eng&&""===t.error.ita?null:u.default.createElement(h.default,{s:10*w.p,w:"r",c:f.default.red,style:{marginVertical:8*w.p}},"it"===N?t.error.ita:t.error.eng)),u.default.createElement(i.View,{style:{flexDirection:"column",justifyContent:"center",borderTopRightRadius:4*w.p,borderBottomRightRadius:4*w.p,backgroundColor:a?f.default.gray600:f.default.gray300}},M(t)||P(t)?u.default.createElement(i.TouchableOpacity,{onPress:function(){return x(M(t)?u.default.createElement(k.default,{examSession:t}):u.default.createElement(_.default,{examSession:t}))}},u.default.createElement(i.View,{style:{flexDirection:"column",alignItems:"center",padding:8*w.p}},u.default.createElement(i.View,{style:{marginBottom:4*w.p}},u.default.createElement(E.default,{name:M(t)?"circle-plus":"circle-x",color:M(t)?f.default.accent300:f.default.red,size:20*w.p})),u.default.createElement(h.default,{s:10*w.p,w:"m",c:M(t)?f.default.accent300:f.default.red},e(M(t)?"bookVerb":"cancel")))):null))};return u.default.createElement(y.default,null,u.default.createElement(v.default,{title:e("examSessions"),headerType:v.HEADER_TYPE.MAIN}),u.default.createElement(b.default,{dark:a,adjusted:!0,items:T.map((function(t){return{label:e(t),value:t}})),onChange:function(e){return A(T[e])}}),u.default.createElement(i.FlatList,{contentContainerStyle:{paddingTop:24*w.p,paddingHorizontal:16*w.p,paddingBottom:24*w.p},data:U,keyExtractor:function(e){return e.session_id+e.course_id+e.date},renderItem:function(e){var t=e.item;return F(t)},ItemSeparatorComponent:function(){return u.default.createElement(i.View,{style:{height:16*w.p}})},ListEmptyComponent:u.default.createElement(O.default,null),refreshing:V.code==m.STATUS.PENDING,refreshControl:u.default.createElement(i.RefreshControl,{refreshing:V.code==m.STATUS.PENDING,onRefresh:H})}))};var r=a(n(0)),l=a(n(15)),u=x(n(5)),o=n(33),i=n(7),f=a(n(16)),c=a(n(8)),d=x(n(258)),s=n(28),p=n(531),m=n(55),g=n(22),y=a(n(44)),v=x(n(59)),b=a(n(93)),w=n(17),E=a(n(25)),h=a(n(21)),O=a(n(122)),k=a(n(1432)),_=a(n(1433)),S=n(67);function j(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var P=function(e){return e.user_is_signed_up},M=function(e){return!e.user_is_signed_up&&0===e.error.id},T=["allExams","myBookings","availableToBook","unavailableExams"]},1432:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=g(n(5)),u=g(n(150)),o=a(n(164)),i=n(116),f=a(n(8)),c=n(248),d=n(22),s=a(n(137)),p=n(54);function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var y=function(e){var t=e.examSession,n=(0,l.useContext)(d.DeviceContext).device;return l.default.createElement(o.default,{title:(0,u.t)("confirmExamBooking"),onConfirm:function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};(0,r.default)((function*(){var a=!1;try{yield(0,c.bookExamSession)(e,t.session_id,t.course_id),a=!0}catch(r){console.log(r)}finally{s.default.dispatch((0,p.setToast)({visible:!0,message:u.default.t(a?"examsExamBookedToastMessage":"examsExamBookingErrorToastMessage"),type:a?"success":"err"})),n()}}))()}(n,t)}},l.default.createElement(i.RenderHTMLSource,{source:{html:(0,u.t)("confirmExamBookingDialogMessage",{code:t.course_id,name:t.exam_name,date:(0,f.default)(t.date).format("lll"),rooms:t.rooms})}}))};t.default=y},1433:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=y(n(5)),u=y(n(150)),o=a(n(16)),i=a(n(164)),f=n(116),c=a(n(8)),d=n(248),s=a(n(137)),p=n(54),m=n(22);function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var v=function(e){var t=e.examSession,n=(0,l.useContext)(m.DeviceContext).device;return l.default.createElement(i.default,{title:(0,u.t)("cancelExamBooking"),accentColor:o.default.red,icon:"alert-triangle",onConfirm:function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};(0,r.default)((function*(){var a=!1;try{yield(0,d.cancelExamSession)(e,t.session_id,t.course_id),a=!0}catch(r){console.log(r)}finally{s.default.dispatch((0,p.setToast)({visible:!0,message:u.default.t(a?"examsExamCanceledToastMessage":"examsExamCancelingErrorToastMessage"),type:a?"success":"err"})),n()}}))()}(n,t)}},l.default.createElement(f.RenderHTMLSource,{source:{html:(0,u.t)("cancelExamBookingDialogMessage",{code:t.course_id,name:t.exam_name,date:(0,c.default)(t.date).format("lll"),rooms:t.rooms})}}))};t.default=v},1434:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(5)),l=n(7),u=function(){return r.default.createElement(l.View,null)};t.default=u},1435:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(5)),l=n(7),u=function(){return r.default.createElement(l.View,null)};t.default=u},1436:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(5)),l=n(7),u=function(){return r.default.createElement(l.View,null)};t.default=u},1437:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.navigation,n=(0,l.useTranslation)().t,a=(0,r.useContext)(i.DeviceContext).dark,m=(0,o.useSelector)((function(e){return e.courses.courses})),g=(0,r.useCallback)((function(e){t.navigate("Course",{courseCode:e.basicInfo.code+e.basicInfo.name})}),[t]),y=(0,r.useMemo)((function(){return u.StyleSheet.create({container:{marginTop:24*c.p,paddingHorizontal:16*c.p,paddingBottom:16*c.p}})}),[]);return r.default.createElement(f.default,null,r.default.createElement(d.default,{title:n("courses"),headerType:d.HEADER_TYPE.MAIN}),r.default.createElement(u.ScrollView,null,r.default.createElement(u.View,{style:y.container},m.filter((function(e){return e.isMain})).map((function(e){return r.default.createElement(p.default,{dark:a,onPress:function(){return g(e)},key:e.basicInfo.code+e.basicInfo.name,title:e.basicInfo.name})})),m.filter((function(e){return!e.isMain})).length>0?r.default.createElement(s.default,{dark:a,title:n("otherCourses"),style:{marginTop:8}},m.filter((function(e){return!e.isMain})).map((function(e){return r.default.createElement(p.default,{dark:a,onPress:function(){return g(e)},key:e.basicInfo.code+e.basicInfo.name,title:e.basicInfo.name})}))):null)))};var r=g(n(5)),l=n(33),u=n(7),o=n(28),i=n(22),f=a(n(44)),c=n(17),d=g(n(59)),s=a(n(147)),p=a(n(647));function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}},1438:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(23)),l=a(n(0)),u=a(n(15)),o=T(n(5)),i=n(33),f=T(n(59)),c=a(n(44)),d=n(88),s=n(7),p=n(28),m=n(22),g=a(n(137)),y=n(106),v=a(n(93)),b=n(17),w=a(n(188)),E=a(n(122)),h=n(55),O=a(n(42)),k=T(n(24)),_=a(n(16)),S=a(n(1439)),j=n(61),x=a(n(25)),P=a(n(21));function M(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function T(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var C=function(e){var t=e.dark,n=e.n,a=e.handlePress,r=e.courseName,l=e.selecting,u=e.setSelecting,i=e.selected,f=e.onSelectionChange,c=(0,k.useSharedValue)(0),d=(0,k.useAnimatedStyle)(function(){var e=function(){return{width:32*b.p*c.value,transform:[{scale:c.value}],alignItems:"flex-start"}};return e._closure={p:b.p,offset:c},e.asString="function _f(){const{p,offset}=jsThis._closure;{return{width:32*p*offset.value,transform:[{scale:offset.value}],alignItems:'flex-start'};}}",e.__workletHash=0xdf564b7d8b3,e.__location="/home/runner/work/open-polito/open-polito/src/screens/Notifications.tsx (72:45)",e.__optimalization=3,e}());return(0,o.useEffect)((function(){c.value=(0,k.withTiming)(l?1:0,{duration:150})}),[l]),o.default.createElement(s.View,{style:{flex:1}},o.default.createElement(j.LongPressGestureHandler,{onHandlerStateChange:function(e){e.nativeEvent.state===j.State.ACTIVE&&(l||(u(!0),f(n.id,!0)))}},o.default.createElement(k.default.View,{style:{marginBottom:24*b.p,flexDirection:"row",alignItems:"center"}},o.default.createElement(k.default.View,{style:[d]},o.default.createElement(S.default,{selected:i,onChange:function(e){return f(n.id,e)}})),o.default.createElement(O.default,{style:{flex:1},onPress:function(){return a(n.id)}},o.default.createElement(w.default,{type:n.topic,notification:n,dark:t,read:n.is_read,courseName:r})))))},D=function(){var e=(0,i.useTranslation)().t,t=(0,p.useDispatch)(),n=[{label:e("allF"),value:"all"},{label:e("readF"),value:"read"},{label:e("unreadF"),value:"unread"},{label:e("directAlerts"),value:"direct"},{label:e("courses"),value:"course"},{label:e("material"),value:"material"}],a=(0,o.useMemo)((function(){return s.StyleSheet.create({container:{paddingTop:24*b.p,flex:1},paddingHorizontal:{paddingHorizontal:16*b.p},list:{paddingHorizontal:16*b.p,paddingBottom:24*b.p}})}),[]),w=(0,p.useSelector)((function(e){return e.user})),S=w.notifications,j=w.getNotificationsStatus,M=(0,p.useSelector)((function(e){return e.courses})),T=(0,o.useContext)(m.DeviceContext),D=T.device,V=T.dark,I=(0,o.useState)("all"),W=(0,u.default)(I,2),R=W[0],A=W[1],L=(0,o.useState)(!1),B=(0,u.default)(L,2),N=B[0],z=B[1],H=function(){z(!0),t((0,y.getNotificationList)(D))},U=function(e){var t;return(null==(t=M.courses.find((function(t){return t.basicInfo.id_incarico===e.course})))?void 0:t.basicInfo.name)||""};(0,o.useEffect)((function(){N&&j.code!==h.STATUS.PENDING&&z(!1)}),[S,N,j.code,M]);var F=function(e){var t=S.findIndex((function(t){return t.id==e}));if(-1!==t&&!S[t].is_read){(0,l.default)((function*(){yield(0,d.markNotificationRead)(D,e)}))();var n=Object.assign({},S[t]);n.is_read=!0,g.default.dispatch((0,y.setNotifications)([].concat((0,r.default)(S.slice(0,t)),[n],(0,r.default)(S.slice(t+1)))))}},Y=(0,o.useMemo)((function(){switch(R){case"all":return S;case"read":return S.filter((function(e){return e.is_read}));case"unread":return S.filter((function(e){return!e.is_read}));case"direct":return S.filter((function(e){return e.topic===d.NotificationType.DIRECT}));case"course":return S.filter((function(e){return e.topic===d.NotificationType.NOTICE}));case"material":return S.filter((function(e){return e.topic===d.NotificationType.MATERIAL}));default:return[]}}),[S,R]),G=(0,o.useState)(!1),q=(0,u.default)(G,2),X=q[0],J=q[1],K=(0,o.useState)([]),Q=(0,u.default)(K,2),Z=Q[0],$=Q[1],ee=(0,k.useSharedValue)(1),te=(0,k.useAnimatedStyle)(function(){var e=function(){return{transform:[{scale:.75+.25*ee.value},{translateY:128*b.p*(1-ee.value)}]}};return e._closure={tabOffset:ee,p:b.p},e.asString="function _f(){const{tabOffset,p}=jsThis._closure;{return{transform:[{scale:0.75+0.25*tabOffset.value},{translateY:128*p*(1-tabOffset.value)}]};}}",e.__workletHash=4306454263167,e.__location="/home/runner/work/open-polito/open-polito/src/screens/Notifications.tsx (251:37)",e.__optimalization=3,e}());(0,o.useEffect)((function(){ee.value=(0,k.withTiming)(X?1:0,{duration:200})}),[X]),(0,o.useEffect)((function(){X||$([])}),[X]);(0,o.useEffect)((function(){0===Z.length&&J(!1)}),[Z]);var ne=(0,o.useCallback)((function(){return X?(J(!1),!0):($([]),!1)}),[X]);(0,o.useEffect)((function(){$([]),J(!1)}),[R]),(0,o.useEffect)((function(){return s.BackHandler.addEventListener("hardwareBackPress",ne),function(){J(!1),$([]),s.BackHandler.removeEventListener("hardwareBackPress",ne)}}),[]);var ae=(0,o.useState)(!1),re=(0,u.default)(ae,2),le=re[0],ue=re[1],oe=function(){for(var e=!0,t=0;t<Y.length;t++)if(!Z.includes(Y[t].id)){e=!1;break}return e},ie=[{icon:oe()?"circle-minus":"circle-plus",value:"selectAll",label:oe()?e("deselectAll"):e("selectAll"),action:function(){return oe()?$([]):$(Y.map((function(e){return e.id})))}},{icon:le?"loading":"trash",value:"delete",label:e("delete"),action:function(){(0,l.default)((function*(){ue(!0);for(var e=0;e<Z.length;e++)yield(0,d.deleteNotification)(D,Z[e]);setTimeout((function(){ue(!1),J(!1)}),500),H()}))()}},{icon:"checks",value:"markAsRead",label:e("markAsRead"),action:function(){Z.forEach((function(e){return F(e)})),J(!1)}}];return o.default.createElement(c.default,null,o.default.createElement(k.default.View,{style:[te,{position:"absolute",bottom:16*b.p,left:0,right:0,zIndex:1e3,backgroundColor:V?_.default.gray700:_.default.gray200,paddingVertical:8*b.p,marginHorizontal:16*b.p,borderRadius:16*b.p,borderWidth:1*b.p,borderColor:V?_.default.gray600:_.default.gray300,flexDirection:"row",justifyContent:"center",alignItems:"center"}]},ie.map((function(e){return o.default.createElement(s.View,{style:{flex:1,justifyContent:"center",alignItems:"center"}},o.default.createElement(O.default,{disabled:"loading"===e.icon,style:{justifyContent:"center",alignItems:"center"},onPress:e.action},"loading"===e.icon?o.default.createElement(s.ActivityIndicator,{color:_.default.accent300,size:20*b.p}):o.default.createElement(x.default,{name:e.icon,color:_.default.accent300,size:20*b.p}),o.default.createElement(s.View,{style:{height:4*b.p}}),o.default.createElement(P.default,{c:_.default.accent300,w:"r",s:10*b.p},e.label)))}))),o.default.createElement(f.default,{headerType:f.HEADER_TYPE.MAIN,title:e("notifications")}),o.default.createElement(v.default,{adjusted:!0,dark:V,items:n,onChange:function(e){return A(n[e].value)}}),o.default.createElement(s.View,{style:a.container},o.default.createElement(s.FlatList,{contentContainerStyle:a.paddingHorizontal,data:Y,keyExtractor:function(e){return e.id.toString()},ListEmptyComponent:o.default.createElement(E.default,null),refreshControl:o.default.createElement(s.RefreshControl,{refreshing:N,onRefresh:H}),initialNumToRender:10,maxToRenderPerBatch:10,renderItem:function(e){return o.default.createElement(C,{dark:V,n:e.item,handlePress:function(e){return F(e)},courseName:U(e.item),selecting:X,setSelecting:function(e){return J(e)},selected:Z.includes(e.item.id),onSelectionChange:function(e,t){return function(e,t){$(t?[].concat((0,r.default)(Z),[e]):Z.filter((function(t){return t!==e})))}(e,t)}})}})))};t.default=D},1439:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(5)),l=n(7),u=s(n(24)),o=a(n(16)),i=n(17),f=a(n(42)),c=a(n(25));function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var p=function(e){var t=e.selected,n=e.onChange,a=(0,u.useSharedValue)(1),d=(0,u.useAnimatedStyle)(function(){var e=function(){return{width:20*i.p*a.value,height:20*i.p*a.value,borderRadius:4*i.p,backgroundColor:o.default.accent300,alignItems:"center",justifyContent:"center"}};return e._closure={p:i.p,offset:a,colors:{accent300:o.default.accent300}},e.asString="function _f(){const{p,offset,colors}=jsThis._closure;{return{width:20*p*offset.value,height:20*p*offset.value,borderRadius:4*p,backgroundColor:colors.accent300,alignItems:'center',justifyContent:'center'};}}",e.__workletHash=0xf364d967be,e.__location="/home/runner/work/open-polito/open-polito/src/ui/core/Checkbox.tsx (21:37)",e.__optimalization=3,e}());return(0,r.useEffect)((function(){a.value=t?(0,u.withTiming)(1,{duration:100}):(0,u.withTiming)(0,{duration:100})}),[t]),r.default.createElement(f.default,{style:{padding:4*i.p},onPress:function(){n(!t)}},r.default.createElement(l.View,{style:{width:20*i.p,height:20*i.p,backgroundColor:o.default.gray700,borderColor:o.default.gray600,borderWidth:1*i.p,borderRadius:4*i.p,alignItems:"center",justifyContent:"center"}},r.default.createElement(u.default.View,{style:[d]},r.default.createElement(c.default,{name:"check",size:12*i.p,color:o.default.gray50}))))};t.default=p},633:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),l=n(7),u=a(n(16)),o=n(22),i=n(17),f=a(n(42)),c=a(n(25)),d=a(n(21));function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var p=function(e){var t=e.icon,n=e.name,a=e.description,s=e.disabled,p=void 0!==s&&s,m=e.settingsFunction,g=void 0===m?function(){}:m,y=e.toggle,v=void 0!==y&&y,b=e.toggleValue,w=e.padding,E=void 0!==w&&w,h=e.paddingBottom,O=void 0===h||h,k=e.children,_=void 0===k?null:k,S=(0,r.useContext)(o.DeviceContext).dark,j=(0,r.useMemo)((function(){return l.StyleSheet.create({container:{flexDirection:"row",alignItems:"center"},textContainer:{flex:1,flexDirection:"column",justifyContent:"flex-start"}})}),[]);return r.default.createElement(l.View,{style:[E?{paddingHorizontal:16*i.p}:{},O?{paddingBottom:16*i.p}:{}]},r.default.createElement(f.default,{disabled:!!_||p,onPress:g,android_ripple:{color:u.default.gray200},style:[j.container,p?{opacity:.5}:{}]},t?r.default.createElement(l.View,{style:{marginRight:12*i.p}},r.default.createElement(c.default,{name:t,size:24*i.p,color:S?u.default.gray300:u.default.gray600})):null,r.default.createElement(l.View,{style:j.textContainer},r.default.createElement(d.default,{w:"m",s:12*i.p,c:S?u.default.gray100:u.default.gray800,style:{marginBottom:2*i.p}},n),a?r.default.createElement(d.default,{w:"r",s:10*i.p,c:S?u.default.gray200:u.default.gray700},a):null),v?r.default.createElement(l.Switch,{value:b,onChange:g}):null),r.default.createElement(l.View,null,_))};t.default=p},647:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=p(n(5)),l=n(7),u=p(n(24)),o=a(n(16)),i=n(17),f=a(n(42)),c=a(n(25)),d=a(n(21));function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var m=function(e){var t=e.dark,n=e.title,a=e.description,s=e.onPress,p=e.expanded,m=e.sideElement,g=e.expandedElement,y=e.children,v=(0,u.useSharedValue)(0),b=(0,u.useSharedValue)(0),w=(0,u.useSharedValue)(0),E=(0,u.useSharedValue)(1);(0,r.useEffect)((function(){var e=p&&g;v.value=(0,u.withTiming)(e?90:0,{duration:200}),b.value=(0,u.withTiming)(e?1:0,{duration:200}),w.value=(0,u.withTiming)(e?1:0,{duration:400})}),[p,v,b,w,g]),(0,r.useEffect)((function(){E.value=(0,u.withTiming)(m?1:0,{duration:400})}),[m,E]);var h=(0,u.useAnimatedStyle)(function(){var e=function(){return{transform:[{rotate:v.value+"deg"}]}};return e._closure={rotation:v},e.asString='function _f(){const{rotation}=jsThis._closure;{return{transform:[{rotate:rotation.value+"deg"}]};}}',e.__workletHash=0xb8f92e0794d,e.__location="/home/runner/work/open-polito/open-polito/src/ui/core/PressableCard.tsx (53:44)",e.__optimalization=3,e}()),O=(0,u.useAnimatedStyle)(function(){var e=function(){return{opacity:w.value,maxHeight:100*b.value+"%"}};return e._closure={expandedElementOpacity:w,scale:b},e.asString='function _f(){const{expandedElementOpacity,scale}=jsThis._closure;{return{opacity:expandedElementOpacity.value,maxHeight:scale.value*100+"%"};}}',e.__workletHash=8953569702199,e.__location="/home/runner/work/open-polito/open-polito/src/ui/core/PressableCard.tsx (61:48)",e.__optimalization=3,e}()),k=(0,u.useAnimatedStyle)(function(){var e=function(){return{opacity:E.value}};return e._closure={sideElementOpacity:E},e.asString="function _f(){const{sideElementOpacity}=jsThis._closure;{return{opacity:sideElementOpacity.value};}}",e.__workletHash=0xf81030983f6,e.__location="/home/runner/work/open-polito/open-polito/src/ui/core/PressableCard.tsx (66:44)",e.__optimalization=3,e}()),_=(0,r.useMemo)((function(){return l.StyleSheet.create({button:{paddingVertical:8*i.p,paddingLeft:16*i.p,paddingRight:8*i.p,marginBottom:16*i.p,backgroundColor:t?o.default.gray700:o.default.gray200,borderRadius:4*i.p}})}),[t]);return r.default.createElement(f.default,{onPress:s,android_ripple:{color:t?o.default.gray400:o.default.gray500},style:_.button},r.default.createElement(l.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:g?"flex-start":"center"}},r.default.createElement(l.View,{style:{flex:1}},r.default.createElement(l.View,{style:{flexDirection:"row",alignItems:"center"}},r.default.createElement(l.View,{style:{flex:4}},n&&r.default.createElement(d.default,{s:12*i.p,c:t?o.default.gray200:o.default.gray700,w:"m"},n),a&&r.default.createElement(d.default,{s:10*i.p,c:t?o.default.gray300:o.default.gray600,w:"r"},a)),r.default.createElement(u.default.View,{style:[k,{flex:m?1:0}]},m),r.default.createElement(l.View,{style:{justifyContent:"flex-start",alignItems:"center"}},r.default.createElement(l.View,null,r.default.createElement(u.default.View,{style:[h]},r.default.createElement(c.default,{name:"chevron-right",color:t?o.default.gray200:o.default.gray700,size:24*i.p}))))),r.default.createElement(l.View,{style:{paddingRight:8*i.p}},y,r.default.createElement(u.default.View,{style:[O]},r.default.createElement(l.View,null,g))))))};t.default=m}}]);
//# sourceMappingURL=8.1730bb55.chunk.js.map