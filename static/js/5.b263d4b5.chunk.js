(this.webpackJsonp=this.webpackJsonp||[]).push([[5,6,11],{224:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var r=n(10),a=n.n(r),c=n(5),o=n.n(c),i=n(25),s=n.n(i),l=n(26),u=n.n(l),b=n(235),j=n.n(b),d=n(54),f=n(654),O=n(115),g=n(290),m=n(81);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(){function e(){s()(this,e)}var t,n,r,a;return u()(e,null,[{key:"writeToFile",value:(a=o()((function*(t){yield Object(m.a)(e.logFilePath,JSON.stringify(t)+"\n").catch((function(e){return console.log(e)}))})),function(e){return a.apply(this,arguments)})},{key:"logBasicDeviceInfo",value:(r=o()((function*(){if(!e.hasLoggedBasicDeviceInfo){var t={type:"DEVICE_INFO",appBuildNumber:f.a.getBuildNumber(),appBuildVariant:d.a.VARIANT||"",appVersion:g.version,appVersionBinary:f.a.getVersion(),osApiLevel:f.a.getApiLevelSync(),osName:f.a.getSystemName()||f.a.getBaseOsSync(),osVersion:f.a.getSystemVersion(),theme:O.a.getState().session.config.theme};yield e.writeToFile(t),e.hasLoggedBasicDeviceInfo=!0}})),function(){return r.apply(this,arguments)})},{key:"logRequest",value:(n=o()((function*(t){yield e.logBasicDeviceInfo(),parseInt(d.a.ENABLE_DEBUG_OPTIONS,10)&&(t.endpoint.includes("login")||(yield e.writeToFile(y({type:"REQUEST"},t))))})),function(e){return n.apply(this,arguments)})},{key:"logRequestSync",value:function(t){o()((function*(){yield e.logBasicDeviceInfo(),yield e.logRequest(t)}))()}},{key:"logError",value:(t=o()((function*(t){yield e.logBasicDeviceInfo(),yield e.writeToFile(y({type:"ERROR"},t))})),function(e){return t.apply(this,arguments)})}]),e}();p.logsDirectoryPath=Object(m.d)(),p.logFilePath=p.logsDirectoryPath+"/request_log-"+j()().format("YYYY-MM-DD-THHmmssSSS")+".txt",p.hasLoggedBasicDeviceInfo=!1},290:function(e){e.exports=JSON.parse('{"version":"0.5.1","versionCode":3,"from":"GITHUB"}')},521:function(e,t,n){var r={"./af":295,"./af.js":295,"./ar":296,"./ar-dz":297,"./ar-dz.js":297,"./ar-kw":298,"./ar-kw.js":298,"./ar-ly":299,"./ar-ly.js":299,"./ar-ma":300,"./ar-ma.js":300,"./ar-sa":301,"./ar-sa.js":301,"./ar-tn":302,"./ar-tn.js":302,"./ar.js":296,"./az":303,"./az.js":303,"./be":304,"./be.js":304,"./bg":305,"./bg.js":305,"./bm":306,"./bm.js":306,"./bn":307,"./bn-bd":308,"./bn-bd.js":308,"./bn.js":307,"./bo":309,"./bo.js":309,"./br":310,"./br.js":310,"./bs":311,"./bs.js":311,"./ca":312,"./ca.js":312,"./cs":313,"./cs.js":313,"./cv":314,"./cv.js":314,"./cy":315,"./cy.js":315,"./da":316,"./da.js":316,"./de":317,"./de-at":318,"./de-at.js":318,"./de-ch":319,"./de-ch.js":319,"./de.js":317,"./dv":320,"./dv.js":320,"./el":321,"./el.js":321,"./en-au":322,"./en-au.js":322,"./en-ca":323,"./en-ca.js":323,"./en-gb":324,"./en-gb.js":324,"./en-ie":325,"./en-ie.js":325,"./en-il":326,"./en-il.js":326,"./en-in":327,"./en-in.js":327,"./en-nz":328,"./en-nz.js":328,"./en-sg":329,"./en-sg.js":329,"./eo":330,"./eo.js":330,"./es":331,"./es-do":332,"./es-do.js":332,"./es-mx":333,"./es-mx.js":333,"./es-us":334,"./es-us.js":334,"./es.js":331,"./et":335,"./et.js":335,"./eu":336,"./eu.js":336,"./fa":337,"./fa.js":337,"./fi":338,"./fi.js":338,"./fil":339,"./fil.js":339,"./fo":340,"./fo.js":340,"./fr":341,"./fr-ca":342,"./fr-ca.js":342,"./fr-ch":343,"./fr-ch.js":343,"./fr.js":341,"./fy":344,"./fy.js":344,"./ga":345,"./ga.js":345,"./gd":346,"./gd.js":346,"./gl":347,"./gl.js":347,"./gom-deva":348,"./gom-deva.js":348,"./gom-latn":349,"./gom-latn.js":349,"./gu":350,"./gu.js":350,"./he":351,"./he.js":351,"./hi":352,"./hi.js":352,"./hr":353,"./hr.js":353,"./hu":354,"./hu.js":354,"./hy-am":355,"./hy-am.js":355,"./id":356,"./id.js":356,"./is":357,"./is.js":357,"./it":358,"./it-ch":359,"./it-ch.js":359,"./it.js":358,"./ja":360,"./ja.js":360,"./jv":361,"./jv.js":361,"./ka":362,"./ka.js":362,"./kk":363,"./kk.js":363,"./km":364,"./km.js":364,"./kn":365,"./kn.js":365,"./ko":366,"./ko.js":366,"./ku":367,"./ku.js":367,"./ky":368,"./ky.js":368,"./lb":369,"./lb.js":369,"./lo":370,"./lo.js":370,"./lt":371,"./lt.js":371,"./lv":372,"./lv.js":372,"./me":373,"./me.js":373,"./mi":374,"./mi.js":374,"./mk":375,"./mk.js":375,"./ml":376,"./ml.js":376,"./mn":377,"./mn.js":377,"./mr":378,"./mr.js":378,"./ms":379,"./ms-my":380,"./ms-my.js":380,"./ms.js":379,"./mt":381,"./mt.js":381,"./my":382,"./my.js":382,"./nb":383,"./nb.js":383,"./ne":384,"./ne.js":384,"./nl":385,"./nl-be":386,"./nl-be.js":386,"./nl.js":385,"./nn":387,"./nn.js":387,"./oc-lnc":388,"./oc-lnc.js":388,"./pa-in":389,"./pa-in.js":389,"./pl":390,"./pl.js":390,"./pt":391,"./pt-br":392,"./pt-br.js":392,"./pt.js":391,"./ro":393,"./ro.js":393,"./ru":394,"./ru.js":394,"./sd":395,"./sd.js":395,"./se":396,"./se.js":396,"./si":397,"./si.js":397,"./sk":398,"./sk.js":398,"./sl":399,"./sl.js":399,"./sq":400,"./sq.js":400,"./sr":401,"./sr-cyrl":402,"./sr-cyrl.js":402,"./sr.js":401,"./ss":403,"./ss.js":403,"./sv":404,"./sv.js":404,"./sw":405,"./sw.js":405,"./ta":406,"./ta.js":406,"./te":407,"./te.js":407,"./tet":408,"./tet.js":408,"./tg":409,"./tg.js":409,"./th":410,"./th.js":410,"./tk":411,"./tk.js":411,"./tl-ph":412,"./tl-ph.js":412,"./tlh":413,"./tlh.js":413,"./tr":414,"./tr.js":414,"./tzl":415,"./tzl.js":415,"./tzm":416,"./tzm-latn":417,"./tzm-latn.js":417,"./tzm.js":416,"./ug-cn":418,"./ug-cn.js":418,"./uk":419,"./uk.js":419,"./ur":420,"./ur.js":420,"./uz":421,"./uz-latn":422,"./uz-latn.js":422,"./uz.js":421,"./vi":423,"./vi.js":423,"./x-pseudo":424,"./x-pseudo.js":424,"./yo":425,"./yo.js":425,"./zh-cn":426,"./zh-cn.js":426,"./zh-hk":427,"./zh-hk.js":427,"./zh-mo":428,"./zh-mo.js":428,"./zh-tw":429,"./zh-tw.js":429};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id=521},653:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(277),c=n(3),o=n(4),i=n(36),s=n(1);t.default=function(e){var t=e.children,n=Object(r.useContext)(i.a).dark,l=Object(r.useMemo)((function(){return n?c.b.gray200:void 0}),[n]);return Object(s.jsx)(a.TRenderEngineProvider,{tagsStyles:{p:{marginVertical:4*o.a,color:l}},children:Object(s.jsx)(a.RenderHTMLConfigProvider,{children:t})})}},969:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ur}));var r,a,c,o,i=n(10),s=n.n(i),l=n(16),u=n.n(l),b=n(0),j=n(7),d=n(3),f=n(234),O=n(28),g=n(2),m=n(5),h=n.n(m),y=n(20),p=n(54),x=n(290),v=(r=h()((function*(){return 200===(yield fetch("https://api.github.com")).status})),function(){return r.apply(this,arguments)}),w=(a=h()((function*(){return yield(yield fetch("https://raw.githubusercontent.com/open-polito/open-polito/master/release.json")).json()})),function(){return a.apply(this,arguments)}),k=(c=h()((function*(e){return yield(yield fetch("https://api.github.com/repos/open-polito/open-polito/releases/tags/"+e,{headers:{Accept:"application/vnd.github+json"}})).json()})),o=h()((function*(){"android"!==y.a.OS||["PLAY_STORE"].includes(x.from)||h()((function*(){if(yield v())try{return(yield w()).find((function(e){return e.type===p.a.VARIANT&&e.versionCode>x.versionCode}))}catch(e){}}))()})),function(){return o.apply(this,arguments)}),C=function(){var e=h()((function*(){}));return function(){return e.apply(this,arguments)}}(),S=(function(){var e=h()((function*(){}))}(),function(){var e=h()((function*(){}))}(),n(74)),D=n(523),P=n(251),I=n(109),_=n(280),E=n(508),T=n(510),M=n(237),z=n(36),R=n(4),L=n(98),N=n(49),B=n(21),H=n(1),V=function(e){var t,n=e.title,r=e.actions,a=e.dismissable,c=void 0===a||a,o=e.onDismiss,i=void 0===o?function(){}:o,s=e.children,l=e.icon,f=e.accentColor,O=Object(b.useContext)(z.a).dark,g=Object(b.useContext)(S.a),m=g.visible,h=g.hideModal,y=Object(b.useState)(!0),p=u()(y,2),x=p[0],v=p[1],w=Object(b.useCallback)((function(){c&&(setTimeout((function(){return v(!1)}),200),h(),i())}),[h,c,i]),k=Object(_.a)(0),C=Object(E.a)(((t=function(){return{backgroundColor:"rgba(0, 0, 0, "+k.value/2+")",opacity:k.value,transform:[{scale:1.1-.1*k.value}]}})._closure={offset:k},t.asString='function _f(){const{offset}=jsThis._closure;{return{backgroundColor:"rgba(0, 0, 0, "+offset.value/2+")",opacity:offset.value,transform:[{scale:1.1-0.1*offset.value}]};}}',t.__workletHash=0xef79486089b,t.__location="/home/runner/work/open-polito/open-polito/src/components/modals/ModalBase.tsx (65:37)",t.__optimalization=3,t));return Object(b.useEffect)((function(){k.value=Object(T.a)(m?1:0,{duration:200})}),[m,k]),Object(H.jsx)(D.a,{transparent:!0,visible:x,animationType:"none",statusBarTranslucent:!0,onRequestClose:w,children:Object(H.jsxs)(M.default.View,{style:[C,{flex:1,justifyContent:"center"}],children:[Object(H.jsx)(I.a,{onPress:w,style:{flex:1}}),Object(H.jsxs)(j.a,{style:{maxHeight:"80%",backgroundColor:O?d.b.gray700:d.b.gray200,borderRadius:4*R.a,marginHorizontal:16*R.a},children:[Object(H.jsx)(P.a,{children:Object(H.jsxs)(j.a,{style:{paddingVertical:24*R.a,paddingHorizontal:16*R.a},children:[Object(H.jsxs)(j.a,{style:{flexDirection:"row",alignItems:"center"},children:[l&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(N.a,{name:l,color:f,size:24*R.a}),Object(H.jsx)(j.a,{style:{width:16*R.a}})]}),Object(H.jsx)(B.a,{s:16,w:"m",c:O?d.b.gray100:d.b.gray800,children:n})]}),Object(H.jsx)(j.a,{style:{marginTop:16*R.a},children:s})]})}),r&&Object(H.jsx)(j.a,{style:{flexDirection:"row",paddingBottom:24*R.a,paddingHorizontal:16*R.a},children:r.map((function(e,t){return Object(H.jsx)(j.a,{style:[{flex:1},0!==t?{marginLeft:32*R.a}:{}],children:Object(H.jsx)(L.a,{color:"colored"===e.type?f:d.b.accent300,secondary:"secondary"===e.type,text:e.label,onPress:function(){e.onSelect(e.value).then((function(){e.dismiss&&w()}))}})},e.value)}))})]}),Object(H.jsx)(I.a,{onPress:w,style:{flex:1}})]})})},A=function(e){var t=e.title,n=e.children,r=e.onConfirm,a=void 0===r?function(){}:r,c=e.onCancel,o=void 0===c?function(){}:c,i=e.icon,s=e.accentColor,l=e.customLabels,u=Object(b.useContext)(S.a).hideModal,j=Object(f.a)().t,d=Object(b.useMemo)((function(){return[{type:"secondary",label:l?l.cancel:j("cancel"),value:"cancel",onSelect:(t=h()((function*(){o(),u()})),function(){return t.apply(this,arguments)}),dismiss:!0},{type:"colored",label:l?l.confirm:j("confirm"),value:"confirm",onSelect:(e=h()((function*(){a(),u()})),function(){return e.apply(this,arguments)}),dismiss:!0}];var e,t}),[u,o,a,j,l]);return Object(H.jsx)(V,{icon:i,accentColor:s,title:t,actions:d,children:n})},F=n(66),G=n(277),U=function(){return Object(H.jsx)("div",{children:"Updater for web not implemented yet"})},Y=n(968),W=n(971),q=n(278),X=n(8),J=n(43),Q=n.n(J),K=n(284),Z=n(252),$=function(e){var t=e.items,n=e.onChange,r=Object(b.useState)(t&&t.length>0?t[0].value:""),a=u()(r,2),c=a[0],o=a[1];return Object(H.jsx)(j.a,{style:{flexDirection:"row"},children:t.map((function(e){return Object(H.jsx)(j.a,{children:Object(H.jsx)(I.a,{onPress:function(){n(e.value),o(e.value)},children:Object(H.jsx)(j.a,{style:{paddingHorizontal:8*R.a,paddingVertical:4*R.a,borderWidth:1*R.a,borderRadius:16*R.a,borderColor:e.value===c?d.b.accent300:d.b.gray200,marginRight:8*R.a},children:Object(H.jsx)(B.a,{s:10*R.a,w:"r",c:e.value===c?d.b.accent300:d.b.gray200,children:e.label})})})})}))})};function ee(){var e=Object(f.a)().t,t=Object(b.useContext)(z.a).dark;return Object(H.jsx)(j.a,{style:{flex:1,flexDirection:"row",justifyContent:"center"},children:Object(H.jsx)(B.a,{s:12,w:"m",c:t?d.b.gray200:d.b.gray700,children:e("noContent")})})}var te=n(235),ne=n.n(te),re=n(37),ae=n(260),ce=n(73),oe=function(e){var t=e.item,n=e.onPress,r=e.dark,a=re.a.get("window").width,c=t.length/60,o=Math.ceil(60*(c-Math.floor(c))).toString();1==o.length&&(o="0"+o);var i=Math.floor(c)+":"+o+":00";return Object(H.jsxs)(ce.a,{onPress:n,android_ripple:{color:d.b.lightGray},style:[{flexDirection:"row",justifyContent:"space-between",paddingVertical:12*R.a,paddingHorizontal:16*R.a}],children:[Object(H.jsxs)(j.a,{children:[Object(H.jsx)(ae.a,{source:{uri:0!=t.cover_url.length?t.cover_url:void 0},style:{width:.4*a,height:.23*a,backgroundColor:"#000"},resizeMode:"contain"}),Object(H.jsx)(j.a,{style:{position:"absolute",right:0,bottom:0,padding:4*R.a,backgroundColor:"#000"},children:Object(H.jsx)(B.a,{s:10*R.a,w:"m",c:d.b.gray100,children:i})})]}),Object(H.jsx)(j.a,{style:{marginLeft:16*R.a,flex:1,flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start"},children:Object(H.jsxs)(j.a,{children:[Object(H.jsx)(B.a,{w:"m",s:12*R.a,c:r?d.b.gray100:d.b.gray800,numberOfLines:2,children:t.title}),Object(H.jsx)(B.a,{w:"r",s:10*R.a,c:r?d.b.gray200:d.b.gray700,numberOfLines:1,style:{marginVertical:8*R.a},children:ne()(t.date).format("ll")})]})})]},t.date+t.title)},ie=function(e){var t,n=e.courseData,r=e.onYearChange;return Object(H.jsxs)(j.a,{style:{marginLeft:16*R.a},children:[Object(H.jsx)(j.a,{style:{height:16*R.a}}),Object(H.jsx)($,{items:Object.keys((null==n||null==(t=n.extendedInfo)?void 0:t.vc_recordings)||{}).sort((function(e,t){return e<t?1:-1})).map((function(e){return{label:e,value:e}})),onChange:function(e){return r(e)}}),Object(H.jsx)(j.a,{style:{height:8*R.a}})]})},se=function(e){var t=e.courseId,n=e.dark,r=e.refreshControl,a=(Object(f.a)().t,Object(K.p)()),c=Object(b.useState)("current"),o=u()(c,2),i=o[0],s=o[1],l=Object(O.c)((function(e){return e.courses.courses.find((function(e){return e.basicInfo.code+e.basicInfo.name==t}))})),d=Object(b.useMemo)((function(){var e,t;return"current"===i?Q()((null==l||null==(t=l.extendedInfo)?void 0:t.vc_recordings.current)||[]).sort((function(e,t){return t.date-e.date})):Q()((null==l||null==(e=l.extendedInfo)?void 0:e.vc_recordings[parseInt(i,10)])||[]).sort((function(e,t){return t.date-e.date}))}),[l,i]);return Object(H.jsx)(j.a,{children:Object(H.jsx)(Z.a,{data:d,ListEmptyComponent:Object(H.jsx)(ee,{}),refreshControl:r,ListHeaderComponent:Object(H.jsx)(ie,{courseData:l,onYearChange:function(e){return s(e)}}),renderItem:function(e){var r=e.item;return Object(H.jsx)(oe,{item:r,dark:n,onPress:function(){a.navigate("Video",{video:{video:r,courseId:t}})}})}})})},le=n(76),ue=n(138),be=n(958),je=X.a.create({blackText:{color:d.b.black},whiteText:{color:d.b.white},grayText:{color:d.b.gray},textRegular:{fontFamily:"Inter-Regular"},textMedium:{fontFamily:"Inter-Medium"},textBold:{fontFamily:"Inter-Bold"},textExtraSmall:{fontSize:10},textSmall:{fontSize:12},textNormal:{fontSize:16},textMediumSize:{fontSize:20},textLarge:{fontSize:24},textExtraLarge:{fontSize:32},textTitleLarge:{fontSize:42},withHorizontalPadding:{paddingHorizontal:24},withRoundedBorder:{borderRadius:4},safePaddingTop:{paddingTop:40},container:{flex:1,flexDirection:"column",alignContent:"space-between"},paddingFromHeader:{paddingTop:32},titleBar:{width:"100%",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},tabNavigator:{backgroundColor:d.b.white,height:60,tabBarActiveTintColor:d.b.white,paddingBottom:8},elevated:{shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.23,shadowRadius:2.62,elevation:4},elevatedSmooth:{shadowColor:"#bbb",shadowOffset:{width:0,height:12},shadowOpacity:.58,shadowRadius:16,elevation:24},border:{borderRadius:8,borderColor:d.b.lightGray,borderWidth:.5}}),de=n(248);function fe(e){var t=e.width,n=Object(b.useRef)(new de.a.Value(0)).current;return Object(b.useEffect)((function(){de.a.loop(de.a.timing(n,{toValue:1.5,duration:2e3,useNativeDriver:!0})).start()}),[]),Object(H.jsxs)(j.a,{style:{width:t,height:t,borderRadius:t/2},children:[Object(H.jsx)(de.a.View,{style:[{backgroundColor:d.b.white,width:t,height:t,borderRadius:t/2,opacity:de.a.subtract(1.5,n)},{transform:[{scale:n}]}]}),Object(H.jsx)(j.a,{style:{position:"absolute",left:t/4,top:t/4,width:t/2,height:t/2,borderRadius:t/4,backgroundColor:d.b.white}})]})}var Oe=n(75);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(e){var t=e.name,n=void 0===t?"":t,r=e.action,a=void 0===r?function(){}:r,c=e.compact,o=void 0!==c&&c,i=e.withButton,s=void 0===i||i,l=e.withPadding,u=void 0===l||l,b=e.fullHeight,O=void 0!==b&&b,g=e.children,m=e.dark,h=e.style,y=Object(f.a)().t;return Object(H.jsx)(j.a,{style:me(me(me({},je.elevatedSmooth),je.border),{},{backgroundColor:d.b.white,width:o?"48%":"100%",flex:0},h),children:Object(H.jsx)(Oe.a,{style:{paddingHorizontal:u?12:0,paddingVertical:u?8:0,flex:O?1:0},android_ripple:{color:d.b.lightGray},onPress:function(){a()},children:Object(H.jsxs)(j.a,{style:{flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",flex:1},children:[n?Object(H.jsx)(B.a,{w:"m",s:12*R.a,c:m?d.b.gray100:d.b.gray800,children:n}):null,g,s&&Object(H.jsx)(j.a,{style:{backgroundColor:d.b.lightGray,padding:8,borderRadius:8,marginVertical:4,width:"100%",flexDirection:"row",justifyContent:"center"},children:Object(H.jsx)(B.a,{w:"m",s:10*R.a,c:m?d.b.gray100:d.b.gray800,children:y("open")})})]})})})},ye=n(78);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=function(e){var t=e.liveClass,n=e.courseName,r=e.device,a=Object(b.useState)(!0),c=u()(a,2),o=c[0],i=c[1],s=Object(b.useState)(0),l=u()(s,2),f=(l[0],l[1]),O=Object(b.useRef)(),g=function(){return ne.a.utc(ne()(Date.now()).diff(ne()(t.date))).format("HH:mm:ss")};return Object(b.useEffect)((function(){return h()((function*(){O.current=setInterval((function(){o&&f(g())}),1e3)}))(),function(){clearInterval(O.current),i(!1)}}),[]),Object(H.jsx)(he,{withButton:!1,withPadding:!1,action:function(){h()((function*(){yield Object(ye.a)((yield Object(ue.getLessonURL)(r,t)).url||"")}))()},children:Object(H.jsxs)(be.a,{start:{x:.2,y:.1},end:{x:.7,y:.9},colors:["#EA0000","#C30000"],style:xe(xe(xe({paddingVertical:16,paddingHorizontal:24},je.elevatedSmooth),je.border),{},{flex:1,flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),children:[Object(H.jsxs)(j.a,{style:{flex:1,flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginLeft:-je.withHorizontalPadding.paddingHorizontal/2},children:[Object(H.jsx)(j.a,{style:{marginRight:8},children:Object(H.jsx)(fe,{width:40})}),Object(H.jsxs)(j.a,{style:{flex:3,flexDirection:"column",justifyContent:"flex-start"},children:[Object(H.jsx)(B.a,{s:12*R.a,w:"b",c:d.b.white,children:"LIVE"}),Object(H.jsx)(B.a,{s:12*R.a,w:"b",c:d.b.white,children:g()})]})]}),Object(H.jsxs)(j.a,{style:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"flex-end"},children:[Object(H.jsx)(B.a,{s:10*R.a,w:"b",c:d.b.white,children:t.title}),Object(H.jsx)(B.a,{s:10*R.a,w:"b",c:d.b.white,children:n})]})]})})};function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=function(e){var t=e.title,n=e.dark,r=e.style,a=void 0===r?{}:r,c=e.children;return Object(H.jsxs)(j.a,{style:ke({},a),children:[Object(H.jsx)(B.a,{s:12*R.a,w:"m",c:n?d.b.gray100:d.b.gray800,children:t}),Object(H.jsx)(j.a,{style:{marginTop:16*R.a},children:c})]})},Se=n(170),De=[{icon:"file-text",color:d.b.gray200,colorLight:d.b.gray700,extensions:["csv","log","md","txt"]},{icon:"archive",color:d.b.gray200,colorLight:d.b.gray700,extensions:["7z","bz","gz","rar","tar","zip","xz"]},{icon:"file-code",color:d.b.black,extensions:["asm","c","cpp","cs","css","go","h","hpp","htm","html","java","js","json","jsx","ts","tsx","php","py","rs","xml"]},{icon:"photo",color:d.b.gradient1,extensions:["bmp","gif","jpg","jpeg","png","svg","tiff"]},{icon:"movie",color:d.b.gradient1,extensions:["flv","mkv","mp4","mov","wmv","avi","webm"]},{icon:"headphones",color:d.b.red,extensions:["aac","alac","flac","m4a","mp3","ogg","wav","wma"]},{icon:"file-text",color:d.b.gradient1,extensions:["doc","docm","docx","odt"]},{icon:"file-text",color:"#ff3848",extensions:["pdf"]},{icon:"presentation",color:d.b.orange,extensions:["odp","ppt","pptm","pptx"]},{icon:"table",color:d.b.green,extensions:["ods","xls","xlsm","xlsx"]}];var Pe=["B","kB","MB","GB","TB"],Ie=function(e,t){Object(Se.getDownloadURL)(e,t).then((function(e){return Object(ye.a)(e)}))},_e=function(e){var t=e.item,n=e.relativeDate,r=void 0!==n&&n,a=e.dark,c=e.course,o=void 0===c?"":c,i=e.onPress,s=void 0===i?function(){}:i,l=e.children,u=Object(b.useMemo)((function(){return"file"===t.type?(e=1e3*t.size,n=Math.floor(e),r=Math.min(n>0?Math.floor(Math.floor(Math.log10(n))/3):0,Pe.length-1),(n/Math.pow(10,0===r?1:3*r)).toFixed(2)+" "+Pe[r]):"";var e,n,r}),[t]),f=Object(b.useContext)(z.a).device,O=Object(b.useMemo)((function(){return"file"===t.type?function(e,t){for(var n=e.split(".").pop().toLowerCase(),r=0;r<De.length;r++){var a=De[r],c=a.icon;if(a.extensions.includes(n)){var o=t?De[r].color:De[r].colorLight||De[r].color;return Object(H.jsx)(N.a,{name:c,color:o,size:24*R.a})}}return Object(H.jsx)(N.a,{name:"file-unknown",color:d.b.gray500,size:24*R.a})}(t.filename,a):Object(H.jsx)(N.a,{name:"folder",color:a?d.b.gray200:d.b.gray700,size:24*R.a})}),[t,a]);return Object(H.jsxs)(j.a,{style:{flexDirection:"column"},children:[Object(H.jsxs)(ce.a,{android_ripple:{color:d.b.lightGray},onPress:function(){"file"===t.type||s()},style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:8},children:[Object(H.jsxs)(j.a,{style:{flexDirection:"row",alignItems:"center",flex:1},children:[O,Object(H.jsxs)(j.a,{style:{flexDirection:"column",justifyContent:"flex-start",marginLeft:10*R.a,flex:1},children:[Object(H.jsx)(j.a,{style:{marginRight:10*R.a},children:Object(H.jsx)(B.a,{c:a?d.b.gray100:d.b.gray800,w:"m",s:12*R.a,numberOfLines:1,children:t.name})}),"file"===t.type&&Object(H.jsx)(j.a,{style:{flexDirection:"column",flex:1},children:Object(H.jsxs)(B.a,{numberOfLines:1,w:"r",s:10*R.a,c:d.b.gray300,children:[u+" · ",r?ne()(t.creation_date).fromNow():ne()(t.creation_date).format("ll"),o?" · "+o:""]})})]})]}),"file"===t.type?Object(H.jsx)(Oe.a,{android_ripple:{color:d.b.lightGray},onPress:function(){return Ie(f,t)},children:Object(H.jsx)(N.a,{name:"download",size:24*R.a,color:d.b.accent300})}):null]}),"dir"===t.type?Object(H.jsxs)(j.a,{style:{flexDirection:"row"},children:[Object(H.jsx)(j.a,{style:{width:16*R.a,alignItems:"flex-start"},children:Object(H.jsx)(j.a,{style:{flex:1,marginLeft:4*R.a,width:2*R.a,backgroundColor:a?d.b.gray600:d.b.gray300}})}),Object(H.jsx)(j.a,{style:{flex:1},children:l})]}):null]})},Ee=n(111),Te=n(931),Me=/<\/?\w+[^>]*>/g,ze=function(e){return void 0===e.topic},Re=function(e){var t,n=e.type,r=e.notification,a=e.dark,c=e.read,o=void 0===c||c,i=e.courseName,s=void 0===i?"":i,l=Object(b.useMemo)((function(){switch(n){case Ee.NotificationType.TEST:return"test-pipe";case Ee.NotificationType.DIRECT:return"message-dots";case Ee.NotificationType.NOTICE:return"bell";case Ee.NotificationType.MATERIAL:return"files";default:return"bell"}}),[n]),u=Object(b.useMemo)((function(){return ze(r)?(e=r.text,Object(Te.decode)(e).replace(Me,"")):r.title;var e}),[r]),f=Object(b.useMemo)((function(){return ze(r)?r.text:r.body}),[r]),O=Object(b.useMemo)((function(){return ne()(ze(r)?r.date:r.time).format("ll")}),[r]),g=Object(_.a)(o?0:1),m=Object(E.a)(((t=function(){return{width:8*R.a*g.value,height:8*R.a*g.value,backgroundColor:d.b.red,borderRadius:8*R.a}})._closure={p:R.a,offset:g,colors:{red:d.b.red}},t.asString="function _f(){const{p,offset,colors}=jsThis._closure;{return{width:8*p*offset.value,height:8*p*offset.value,backgroundColor:colors.red,borderRadius:8*p};}}",t.__workletHash=9456528118976,t.__location="/home/runner/work/open-polito/open-polito/src/ui/Notification.tsx (74:37)",t.__optimalization=3,t));return Object(b.useEffect)((function(){o&&(g.value=Object(T.a)(0,{duration:200}))}),[o]),Object(H.jsxs)(j.a,{style:{flexDirection:"column"},children:[Object(H.jsxs)(j.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(H.jsxs)(j.a,{style:{width:32*R.a,height:32*R.a,borderRadius:4*R.a,backgroundColor:a?d.b.gray700:d.b.gray200,alignItems:"center",justifyContent:"center",marginRight:16*R.a},children:[Object(H.jsx)(j.a,{style:{position:"absolute",justifyContent:"center",alignItems:"center",top:-4*R.a,right:-4*R.a,width:8*R.a,height:8*R.a},children:Object(H.jsx)(M.default.View,{style:[m]})}),Object(H.jsx)(N.a,{name:l,color:d.b.accent300,size:16*R.a})]}),Object(H.jsxs)(j.a,{style:{flexDirection:"column",flex:1},children:[Object(H.jsx)(B.a,{s:12*R.a,c:a?d.b.gray100:d.b.gray800,w:"r",numberOfLines:ze(r)?1:2,children:u}),Object(H.jsxs)(B.a,{s:10*R.a,c:a?d.b.gray200:d.b.gray700,w:"r",numberOfLines:2,children:[O,ze(r)?r.course_name&&" · "+r.course_name:s&&" · "+s]})]})]}),!!f&&Object(H.jsx)(j.a,{style:{marginTop:12*R.a,padding:16*R.a,borderRadius:4*R.a,backgroundColor:a?d.b.gray700:d.b.gray200},children:Object(H.jsx)(G.RenderHTMLSource,{source:{html:f}})})]})};function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=function(e){var t,n,r,a,c,o=e.code,i=(e.changeTab,Object(f.a)().t),s=Object(b.useContext)(z.a),l=s.device,u=s.dark,m=Object(O.c)((function(e){return e.courses.courses.find((function(e){return e.basicInfo.code+e.basicInfo.name==o}))})),h=(null==m||null==(t=m.extendedInfo)?void 0:t.material)||[],y=function(e,t,n){return Object(H.jsxs)(j.a,{style:{flexDirection:"row",alignItems:"center",marginBottom:(n+1)%3==0?0:8*R.a},children:[Object(H.jsx)(N.a,{name:t,size:16*R.a,color:u?d.b.gray200:d.b.gray700}),Object(H.jsx)(B.a,{s:10*R.a,w:"r",c:u?d.b.gray200:d.b.gray700,style:{marginLeft:8*R.a},children:e})]},t)},p=Object(b.useMemo)((function(){var e,t,n,r;return[{name:(null==m||null==(e=m.extendedInfo)?void 0:e.professor.surname)+" "+(null==m||null==(t=m.extendedInfo)?void 0:t.professor.name),icon:"user-circle"},{name:(null==m?void 0:m.basicInfo.num_credits)+" "+i("credits"),icon:"north-star"},{name:null==m?void 0:m.basicInfo.code,icon:"grid-pattern"},{name:i("year")+" "+((null==m||null==(n=m.extendedInfo)?void 0:n.degree_year)||"")+", "+i("period")+" "+(null==m||null==(r=m.extendedInfo)?void 0:r.year_period)||"",icon:"calendar-time"}]}),[m]);return Object(H.jsxs)(j.a,{children:[Object(H.jsx)(Ce,{dark:u,title:i("summary"),children:(null==m?void 0:m.status.code)==g.b.PENDING?Object(H.jsx)(le.a,{}):Object(H.jsxs)(j.a,{style:{flexDirection:"row"},children:[Object(H.jsx)(j.a,{style:{flex:1},children:p.slice(0,2).map((function(e,t){return y(e.name||"",e.icon,t)}))}),Object(H.jsx)(j.a,{style:{flex:1},children:p.slice(2).map((function(e,t){return y(e.name||"",e.icon,t)}))})]})}),(null==m||null==(n=m.extendedInfo)?void 0:n.live_lessons.map((function(e){return Object(H.jsx)(ve,{liveClass:e,courseName:m.basicInfo.name,device:l},e.meeting_id)})))||null,Object(H.jsx)(Ce,{dark:u,title:i("latestFiles"),style:{marginTop:24},children:Object(H.jsx)(j.a,{style:{marginTop:-8},children:(null==m?void 0:m.status.code)==g.b.PENDING?Object(H.jsx)(le.a,{}):(c=h||[],function e(t){return t.flatMap((function(t){return"file"==t.type?[t]:[t].concat(e(t.children))})).filter((function(e){return"file"==e.type}))}(c||[]).sort((function(e,t){return t.creation_date-e.creation_date})).slice(0,3)).map((function(e){return Object(H.jsx)(_e,{item:e,dark:u})}))})}),Object(H.jsx)(Ce,{dark:u,title:i("latestAlert"),style:{marginTop:16},children:(null==m?void 0:m.status.code)==g.b.PENDING?Object(H.jsx)(le.a,{}):((null==m||null==(r=m.extendedInfo)?void 0:r.notices)||[]).length>0?Object(H.jsx)(Re,{notification:Ne(Ne({},null==m||null==(a=m.extendedInfo)?void 0:a.notices[0]),{},{course_code:(null==m?void 0:m.basicInfo.code)||"",course_name:(null==m?void 0:m.basicInfo.name)||""}),type:Ee.NotificationType.NOTICE,dark:u}):null})]})};function He(e){var t=e.dark,n=e.item,r=Object(b.useState)(!1),a=u()(r,2),c=a[0],o=a[1];return Object(H.jsx)(j.a,{children:"file"==n.type?Object(H.jsx)(_e,{dark:t,item:n}):Object(H.jsx)(j.a,{children:Object(H.jsx)(_e,{dark:t,item:n,onPress:function(){o(!c)},children:c?n.children.map((function(e){return Object(H.jsx)(He,{dark:t,item:e},e.code)})):[]})})})}function Ve(e){var t,n,r=e.courseId,a=e.dark,c=Object(O.c)((function(e){return e.courses})).courses;return Object(H.jsx)(j.a,{children:"all"==r?c.map((function(e){var t;return Object(H.jsx)(He,{item:{type:"dir",code:e.basicInfo.code+e.basicInfo.name,name:e.basicInfo.name,children:(null==(t=e.extendedInfo)?void 0:t.material)||[]},dark:a},e.basicInfo.code+e.basicInfo.name)})):((null==(t=c.find((function(e){return e.basicInfo.code+e.basicInfo.name==r})))||null==(n=t.extendedInfo)?void 0:n.material)||[]).map((function(e){return Object(H.jsx)(He,{item:e,dark:a},e.code)}))})}var Ae=function(e){var t=e.alerts,n=e.dark,r=e.refreshControl,a=Object(b.useMemo)((function(){return X.a.create({container:{paddingHorizontal:16*R.a,flex:1}})}),[n]);return Object(H.jsx)(j.a,{style:{flexDirection:"column",flex:1},children:Object(H.jsx)(Z.a,{style:a.container,ListEmptyComponent:Object(H.jsx)(ee,{}),ListHeaderComponent:function(){return Object(H.jsx)(j.a,{style:{height:24*R.a}})},refreshControl:r,data:t,initialNumToRender:1,keyExtractor:function(e){return e.id+e.date+e.text.slice(0,10)},renderItem:function(e){return Object(H.jsx)(j.a,{style:{marginBottom:24*R.a},children:Object(H.jsx)(Re,{type:Ee.NotificationType.NOTICE,notification:e.item,dark:n})})}})})},Fe=n(119),Ge=n(108);function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We,qe=X.a.create({badge:{position:"absolute",width:20*R.a,height:20*R.a,borderRadius:20*R.a,backgroundColor:d.b.red,right:-10*R.a,top:-10*R.a,justifyContent:"center",alignItems:"center"}}),Xe=function(e){var t=e.children,n=e.style,r=void 0===n?{}:n,a=e.number,c=Object(b.useMemo)((function(){return"string"==typeof a?a:a>99?"99+":a}),[a]);return Object(H.jsxs)(j.a,{style:Ye({},r),children:[t,0!==c?Object(H.jsx)(j.a,{style:qe.badge,children:Object(H.jsx)(B.a,{w:"r",s:10*R.a,c:d.b.gray100,children:c})}):null]})},Je=n(31),Qe=n(29);function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.MAIN=0]="MAIN",e[e.SECONDARY=1]="SECONDARY"}(We||(We={}));var $e=function(e){var t=e.title,n=e.headerType,r=Object(b.useContext)(z.a).dark,a=Object(O.c)((function(e){return e.user.notifications})),c=Object(O.c)((function(e){return e.session.config})),o=Object(O.b)(),i=Object(b.useMemo)((function(){return a.filter((function(e){return!e.is_read})).length}),[a]),s=Object(K.p)(),l=Object(b.useMemo)((function(){return r?"moon-stars":"sun"}),[r]),u=Object(b.useCallback)((function(){o(Object(Qe.e)(Ze(Ze({},c),{},{theme:r?"light":"dark"})))}),[r,c,o]),f=Object(b.useMemo)((function(){return X.a.create({header:{flexDirection:"row",marginHorizontal:12*R.a,marginVertical:16*R.a,alignItems:"center"},headerSection:{flex:1,flexDirection:"row",alignItems:"center"},headerMiddle:{flex:2,flexDirection:"row",justifyContent:"center"},headerEnd:{justifyContent:"flex-end"}})}),[]);return Object(H.jsx)(j.a,{style:f.header,children:n===We.MAIN?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(j.a,{style:f.headerSection,children:Object(H.jsx)(ce.a,{onPress:function(){s.dispatch(K.c.toggleDrawer())},children:Object(H.jsx)(Xe,{number:0,style:{marginRight:16*R.a},children:Object(H.jsx)(N.a,{name:"menu-2",size:24*R.a,color:r?d.b.gray100:d.b.gray800})})})}),Object(H.jsx)(j.a,{style:Ze(Ze({},f.headerSection),f.headerMiddle),children:Object(H.jsx)(B.a,{c:r?d.b.gray100:d.b.gray800,w:"m",s:16*R.a,numberOfLines:1,children:t})}),Object(H.jsxs)(j.a,{style:Ze(Ze({},f.headerSection),f.headerEnd),children:["mobile"!==Je.a&&Object(H.jsx)(ce.a,{onPress:u,children:Object(H.jsx)(N.a,{name:l,size:24*R.a,color:r?d.b.gray100:d.b.gray800,style:{marginRight:16*R.a}})}),Object(H.jsx)(ce.a,{onPress:function(){return s.navigate("Search")},children:Object(H.jsx)(N.a,{name:"search",size:24*R.a,color:r?d.b.gray100:d.b.gray800,style:{marginRight:16*R.a}})}),Object(H.jsx)(ce.a,{onPress:function(){return s.navigate("Notifications")},children:Object(H.jsx)(Xe,{number:i,children:Object(H.jsx)(N.a,{name:"bell",size:24*R.a,color:r?d.b.gray100:d.b.gray800})})})]})]}):n===We.SECONDARY?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(ce.a,{onPress:s.goBack,children:Object(H.jsx)(N.a,{name:"arrow-left",size:24*R.a,color:r?d.b.gray200:d.b.gray700})}),Object(H.jsx)(B.a,{s:16*R.a,w:"m",c:r?d.b.gray100:d.b.gray800,style:{marginLeft:16*R.a},children:t})]}):null})};function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt=function(e){var t=e.adjusted,n=void 0!==t&&t,r=e.items,a=e.onChange,c=e.defaultIndex,o=void 0===c?0:c,i=e.dark,s=e.style,l=void 0===s?{}:s,f=Object(b.useState)(o),O=u()(f,2),g=O[0],m=O[1],h=Object(b.useMemo)((function(){return X.a.create({container:{},adjusted:{marginTop:24*R.a,paddingHorizontal:16*R.a},tab:{},selectedIndicator:{marginTop:4*R.a,height:2*R.a,backgroundColor:d.b.accent300}})}),[i,n]);return Object(H.jsx)(j.a,{children:Object(H.jsx)(P.a,{contentContainerStyle:tt(tt(tt({},h.container),l),n?h.adjusted:{}),horizontal:!0,showsHorizontalScrollIndicator:!1,children:r.map((function(e,t){return Object(H.jsx)(j.a,{style:h.tab,children:Object(H.jsxs)(ce.a,{style:{marginRight:24*R.a},onPress:function(){return m(e=t),void a(e);var e},children:[Object(H.jsx)(B.a,{s:12*R.a,w:"m",c:t==g?d.b.accent300:i?d.b.gray100:d.b.gray800,children:e.label}),t==g?Object(H.jsx)(j.a,{style:h.selectedIndicator}):null]})},e.value)}))})})};function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ct(e){e.navigation;var t=e.route,n=Object(O.b)(),r=Object(f.a)().t,a=Object(b.useContext)(z.a),c=a.device,o=a.dark,i=t.params.courseCode,s=Object(O.c)((function(e){return e.courses.courses.find((function(e){return e.basicInfo.code+e.basicInfo.name==i}))})),l=Object(b.useState)(0),d=u()(l,2),m=d[0],h=d[1],y=Object(b.useMemo)((function(){return["overview","material","alerts","videos"]}),[s]);Object(b.useEffect)((function(){s&&(null==s?void 0:s.status.code)!=g.b.PENDING&&(null==s?void 0:s.status.code)!=g.b.SUCCESS&&n(Object(Fe.c)({basicCourseInfo:s.basicInfo,device:c}))}),[]);var p=function(){n(Object(Fe.c)({basicCourseInfo:s.basicInfo,device:c}))},x=Object(b.useMemo)((function(){return(null==s?void 0:s.status.code)==g.b.PENDING}),[s]),v=Object(b.useMemo)((function(){return X.a.create({container:{paddingHorizontal:16*R.a,paddingBottom:16*R.a}})}),[o]),w=Object(b.useMemo)((function(){var e;switch(y[m]){case"overview":return Object(H.jsxs)(P.a,{refreshControl:Object(H.jsx)(q.a,{refreshing:x,onRefresh:p}),style:v.container,children:[Object(H.jsx)(j.a,{style:{height:24*R.a}}),Object(H.jsx)(Be,{code:i,changeTab:h}),Object(H.jsx)(j.a,{style:{height:16*R.a}})]});case"material":return Object(H.jsxs)(P.a,{refreshControl:Object(H.jsx)(q.a,{refreshing:x,onRefresh:p}),style:v.container,children:[Object(H.jsx)(j.a,{style:{height:24*R.a}}),Object(H.jsx)(Ve,{dark:o,courseId:i}),Object(H.jsx)(j.a,{style:{marginBottom:16*R.a}})]});case"alerts":return Object(H.jsx)(Ae,{refreshControl:Object(H.jsx)(q.a,{refreshing:x,onRefresh:p}),dark:o,alerts:(null==s||null==(e=s.extendedInfo)?void 0:e.notices.map((function(e){return at(at({},e),{},{course_code:s.basicInfo.code,course_name:s.basicInfo.name})})))||[]});case"videos":return Object(H.jsx)(se,{refreshControl:Object(H.jsx)(q.a,{refreshing:x,onRefresh:p}),dark:o,courseId:i})}}),[m]);return Object(H.jsxs)(Ge.a,{children:[Object(H.jsx)($e,{title:(null==s?void 0:s.basicInfo.name)||"",headerType:We.SECONDARY}),Object(H.jsx)(nt,{adjusted:!0,dark:o,onChange:function(e){h(e)},items:y.map((function(e){return{label:r(e),value:e}}))}),Object(H.jsx)(j.a,{style:{flex:1},children:w})]})}var ot=n(93),it=function(e){var t=e.title,n=e.items,r=e.onSelect,a=Object(b.useContext)(z.a).dark,c=Object(b.useContext)(S.a).hideModal,o=Object(b.useCallback)((function(e){r(e),c()}),[r,c]);return Object(H.jsx)(V,{title:t,dismissable:!0,children:n.map((function(e){return Object(H.jsx)(I.a,{onPress:function(){return o(e.value)},children:Object(H.jsx)(j.a,{style:{paddingVertical:8*R.a},children:Object(H.jsx)(B.a,{s:12*R.a,w:"r",c:a?d.b.gray100:d.b.gray800,children:e.label})})},e.value)}))})};function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(e){var t=e.navigation,n=Object(f.a)().t,r=(Object(O.b)(),Object(b.useContext)(z.a).dark),a=Object(b.useContext)(S.a).setModal,c=Object(O.c)((function(e){return e.courses.courses})),o=Object(b.useState)(""),i=u()(o,2),s=i[0],l=i[1],g=Object(b.useState)([]),m=u()(g,2),y=m[0],p=m[1],x=Object(b.useState)(""),v=u()(x,2),w=v[0],k=v[1],C=Object(b.useState)(!0),D=u()(C,2),P=D[0],I=D[1],_=Object(b.useState)(null),E=u()(_,2),T=E[0],M=E[1],L=Object(b.useState)(null),V=u()(L,2),A=V[0],F=V[1],G=Object(b.useMemo)((function(){return[{label:n("allCourses"),value:""}].concat(Q()(c.map((function(e){return{label:e.basicInfo.name,value:e.basicInfo.code+e.basicInfo.name}}))))}),[c]);Object(b.useEffect)((function(){U(s)}),[w,s]);var U=function(e){var t=e.toLowerCase().trim();T&&clearTimeout(T),A&&clearTimeout(A),I(!0),M(setTimeout((function(){W(t),F(setTimeout((function(){I(!1)}),500))}),50))},Y=function e(t,n,r,a){var c=[];return n.forEach((function(n){"file"==n.type?(n.name+n.filename).toLowerCase().includes(t)&&c.push(lt(lt({},n),{},{course_code:a,course_name:r})):"dir"==n.type&&c.push.apply(c,Q()(e(t,n.children,r,a)))})),c},W=function(e){h()((function*(){setTimeout((function(){var t=[];if(""!==e){if(w){var n,r,a=c.find((function(e){return w===""+e.basicInfo.code+e.basicInfo.name}));if(!a)return void(t=[]);(n=t).push.apply(n,Q()(Y(e,(null==(r=a.extendedInfo)?void 0:r.material)||[],a.basicInfo.name,a.basicInfo.code)))}else c.forEach((function(n){var r,a;(r=t).push.apply(r,Q()(Y(e,(null==(a=n.extendedInfo)?void 0:a.material)||[],n.basicInfo.name,n.basicInfo.code)))}));p(t)}else p([])}),0)}))()};return Object(H.jsxs)(Ge.a,{children:[Object(H.jsxs)(j.a,{style:{flexDirection:"row",alignItems:"center",paddingHorizontal:12*R.a,paddingVertical:16*R.a},children:[Object(H.jsx)(ce.a,{onPress:t.goBack,style:{marginRight:16*R.a},children:Object(H.jsx)(N.a,{name:"arrow-left",color:r?d.b.gray200:d.b.gray700,size:24*R.a})}),Object(H.jsx)(ot.a,{initiallyFocused:!0,icon:"search",dark:r,placeholder:n("searchForAnything"),autoFocus:!0,onChangeText:function(e){var t=e.toLowerCase().trim();l(t),U(t)},style:{flex:1}}),Object(H.jsx)(ce.a,{onPress:function(){a(Object(H.jsx)(it,{items:G,title:n("selectCourseDropdown"),onSelect:function(e){return k(e)}}))},style:{marginLeft:16*R.a},children:Object(H.jsx)(Xe,{number:""===w?0:"",children:Object(H.jsx)(N.a,{name:"adjustments",color:r?d.b.gray200:d.b.gray700,size:24*R.a})})})]}),Object(H.jsx)(nt,{dark:r,items:[{label:n("files"),value:"files"}],onChange:function(){},adjusted:!0}),Object(H.jsx)(Z.a,{style:{paddingTop:24*R.a,paddingHorizontal:16*R.a},contentContainerStyle:{flexGrow:1},data:P?y.slice(0,10):y,keyExtractor:function(e){return e.code},initialNumToRender:10,maxToRenderPerBatch:10,renderItem:function(e){var t=e.item;return Object(H.jsx)(j.a,{children:Object(H.jsx)(_e,{item:t,dark:r,course:t.course_name},t.code)},t.code)},ListEmptyComponent:Object(H.jsxs)(j.a,{style:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(H.jsx)(N.a,{name:"search-off",size:64*R.a,color:r?d.b.gray300:d.b.gray600}),Object(H.jsxs)(j.a,{style:{marginTop:8*R.a,flexDirection:"column",alignItems:"center"},children:[Object(H.jsx)(B.a,{s:12*R.a,w:"m",c:r?d.b.gray200:d.b.gray700,style:{marginBottom:8*R.a},children:n("noResults")}),Object(H.jsx)(B.a,{s:10*R.a,w:"m",c:r?d.b.gray300:d.b.gray600,children:n("tryADifferentTerm")})]})]}),ListFooterComponent:Object(H.jsx)(j.a,{style:{marginBottom:24*R.a}})})]})}var bt=function(e){var t=e.video;return Object(H.jsx)("video",{src:t.url,controls:!0,autoPlay:!0})};function jt(e){var t=e.route,n=Object(f.a)().t,r=t.params.video,a=Object(b.useState)(r.video),c=u()(a,2),o=c[0],i=c[1],s=Object(O.c)((function(e){return e.courses.courses.find((function(e){return e.basicInfo.code+e.basicInfo.name===r.courseId}))})),l=Object(b.useMemo)((function(){var e;return Q()((null==s||null==(e=s.extendedInfo)?void 0:e.vc_recordings.current)||[]).sort((function(e,t){return t.date-e.date}))}),[s]),g=Object(b.useContext)(z.a).dark,m=re.a.get("window").width,h=Object(b.useMemo)((function(){return X.a.create({container:{paddingHorizontal:16*R.a,paddingTop:24*R.a}})}),[]);return Object(H.jsxs)(Ge.a,{children:[Object(H.jsx)($e,{title:r.video.title,headerType:We.SECONDARY}),Object(H.jsx)(j.a,{style:{height:m/1.78,flexDirection:"row",justifyContent:"center"},children:Object(H.jsx)(bt,{video:o})}),Object(H.jsx)(Z.a,{data:l,renderItem:function(e){var t=e.item;return Object(H.jsx)(j.a,{style:[t.url===o.url?{backgroundColor:g?d.b.gray600:d.b.gray300}:{}],children:Object(H.jsx)(oe,{item:t,dark:g,onPress:function(){return i(t)}})})},keyExtractor:function(e){return e.url},ListHeaderComponent:function(){return Object(H.jsxs)(j.a,{style:h.container,children:[Object(H.jsx)(B.a,{s:16*R.a,w:"b",c:g?d.b.gray100:d.b.gray800,children:o.title}),Object(H.jsxs)(B.a,{s:12*R.a,w:"m",c:g?d.b.gray200:d.b.gray500,style:{marginTop:8*R.a},children:[null==s?void 0:s.basicInfo.name," ·"," ",ne()(o.date).format("ll")]}),Object(H.jsx)(j.a,{style:{marginVertical:24*R.a}}),Object(H.jsx)(B.a,{s:12*R.a,w:"m",c:g?d.b.gray100:d.b.gray800,children:n("relatedVideos")})]})}})]})}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ot=[{name:"Courses",icon:"school"},{name:"Material",icon:"folders"},{name:"Email",icon:"mail"},{name:"ExamSessions",icon:"ballpen"}],gt=[d.b.accent300,d.b.red,"#9b51e0","#f2c94c"],mt=function(){var e=Object(f.a)().t,t=Object(b.useContext)(z.a).dark,n=Object(K.p)(),r=Object(O.c)((function(e){return e.courses})),a=r.courses,c=r.recentMaterial,o=r.loadExtendedCourseInfoStatus,i=Object(b.useMemo)((function(){return a.flatMap((function(e){var t;return(null==(t=e.extendedInfo)?void 0:t.notices.map((function(t){return ft(ft({},t),{},{course_name:e.basicInfo.name,course_code:e.basicInfo.code})})))||[]})).sort((function(e,t){return t.date-e.date}))[0]}),[a]),s=Object(b.useMemo)((function(){return X.a.create({container:{marginTop:24*R.a,paddingHorizontal:16*R.a,paddingBottom:16*R.a},topSections:{flexDirection:"row",justifyContent:"space-between",paddingBottom:16},topSection:{justifyContent:"center",alignItems:"center"},topSectionInner:{width:40*R.a,height:40*R.a,borderRadius:4*R.a,marginBottom:4*R.a,justifyContent:"center",alignItems:"center"},topSectionText:{position:"absolute",bottom:-16*R.a}})}),[t]);return Object(H.jsxs)(Ge.a,{children:[Object(H.jsx)($e,{title:e("home"),headerType:We.MAIN}),Object(H.jsx)(P.a,{children:Object(H.jsxs)(j.a,{style:s.container,children:[Object(H.jsx)(ce.a,{onPress:function(){n.navigate("Search")},children:Object(H.jsx)(ot.a,{editable:!1,placeholder:e("searchForAnything"),dark:t,icon:"search",style:{marginBottom:32*R.a}})}),Object(H.jsxs)(j.a,{style:s.topSections,children:[Ot.map((function(r,a){return Object(H.jsxs)(ce.a,{style:s.topSection,onPress:function(){n.navigate(r.name)},children:[Object(H.jsx)(j.a,{style:ft(ft({},s.topSectionInner),{},{backgroundColor:gt[a]}),children:Object(H.jsx)(N.a,{name:r.icon,size:24*R.a,color:d.b.gray100})}),Object(H.jsx)(B.a,{numberOfLines:1,s:10*R.a,w:"r",c:t?d.b.gray100:d.b.gray800,style:s.topSectionText,children:e(r.name[0].toLowerCase()+r.name.slice(1))})]},r.name)})),Object(H.jsxs)(ce.a,{style:s.topSection,onPress:function(){n.toggleDrawer()},children:[Object(H.jsx)(j.a,{style:ft(ft({},s.topSectionInner),{},{borderColor:d.b.gray200,borderWidth:1*R.a}),children:Object(H.jsx)(N.a,{name:"plus",size:24*R.a,color:d.b.gray200})}),Object(H.jsx)(B.a,{numberOfLines:1,s:10*R.a,w:"r",c:t?d.b.gray100:d.b.gray800,style:s.topSectionText,children:e("more")})]})]}),Object(H.jsx)(Ce,{dark:t,title:e("latestFiles"),style:{marginTop:32*R.a},children:o.code!=g.b.SUCCESS?Object(H.jsx)(le.a,{}):c.slice(0,3).map((function(e){return Object(H.jsx)(j.a,{children:Object(H.jsx)(_e,{relativeDate:!0,dark:t,item:e,course:e.course_name})},e.code)}))}),Object(H.jsx)(Ce,{dark:t,title:e("latestAlert"),style:{marginTop:24*R.a},children:o.code!=g.b.SUCCESS?Object(H.jsx)(le.a,{}):Object(H.jsx)(Re,{type:Ee.NotificationType.NOTICE,notification:i,dark:t})})]})})]})},ht=n(960),yt=n(77),pt=n(137),xt=function(){var e=h()((function*(e){return yield Object(pt.emailUrl)(e)}));return function(t){return e.apply(this,arguments)}}();function vt(){var e=Object(f.a)().t,t=Object(b.useContext)(z.a),n=t.dark,r=t.device,a=Object(O.b)(),c=Object(b.useState)(!0),o=u()(c,2),i=o[0],s=o[1],l=Object(b.useState)(!1),g=u()(l,2),m=g[0],y=g[1],p=Object(b.useState)(null),x=u()(p,2),v=(x[0],x[1]),w=Object(b.useState)(""),k=u()(w,2),C=k[0],S=k[1];Object(b.useEffect)((function(){return function(){return s(!1)}}),[]),Object(b.useEffect)((function(){h()((function*(){a(Object(yt.e)(r)),!C&&i&&S(yield xt(r)),C&&"mobile"!==Je.a&&y(!0)}))()}),[r,a,i,C]);return Object(H.jsxs)(Ge.a,{children:[Object(H.jsx)($e,{title:e("email"),headerType:We.MAIN}),Object(H.jsxs)(M.default.View,{style:{flex:1},children:[m?"mobile"!==Je.a?Object(H.jsxs)(j.a,{style:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(H.jsx)(B.a,{s:12*R.a,w:"m",c:n?d.b.gray100:d.b.gray800,style:{marginRight:16*R.a},children:e("emailCannotBeShownDesktop")}),Object(H.jsx)(B.a,{href:C,s:12*R.a,w:"m",c:n?d.b.gray100:d.b.gray800,style:{marginRight:16*R.a},children:e("openBrowser")})]}):null:Object(H.jsxs)(j.a,{style:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[Object(H.jsx)(B.a,{s:12*R.a,w:"m",c:n?d.b.gray100:d.b.gray800,style:{marginRight:16*R.a},children:e("loading")}),Object(H.jsx)(le.a,{})]}),"mobile"===Je.a&&Object(H.jsx)(j.a,{style:{flex:m?1:0},children:Object(H.jsx)(ht.a,{ref:function(e){return!e&&v(e)},source:{uri:C},onNavigationStateChange:function(e){"mobile"===Je.a&&(e.loading||m||!i||y(!0))}})})]})]})}var wt=n(479),kt=function(e){var t=e.icon,n=e.name,r=e.description,a=e.disabled,c=void 0!==a&&a,o=e.settingsFunction,i=void 0===o?function(){}:o,s=e.toggle,l=void 0!==s&&s,u=e.toggleValue,f=e.padding,O=void 0!==f&&f,g=e.paddingBottom,m=void 0===g||g,h=e.children,y=void 0===h?null:h,p=Object(b.useContext)(z.a).dark,x=Object(b.useMemo)((function(){return X.a.create({container:{flexDirection:"row",alignItems:"center"},textContainer:{flex:1,flexDirection:"column",justifyContent:"flex-start"}})}),[]);return Object(H.jsxs)(j.a,{style:[O?{paddingHorizontal:16*R.a}:{},m?{paddingBottom:16*R.a}:{}],children:[Object(H.jsxs)(ce.a,{disabled:!!y||c,onPress:i,android_ripple:{color:d.b.gray200},style:[x.container,c?{opacity:.5}:{}],children:[t?Object(H.jsx)(j.a,{style:{marginRight:12*R.a},children:Object(H.jsx)(N.a,{name:t,size:24*R.a,color:p?d.b.gray300:d.b.gray600})}):null,Object(H.jsxs)(j.a,{style:x.textContainer,children:[Object(H.jsx)(B.a,{w:"m",s:12*R.a,c:p?d.b.gray100:d.b.gray800,style:{marginBottom:2*R.a},children:n}),r?Object(H.jsx)(B.a,{w:"r",s:10*R.a,c:p?d.b.gray200:d.b.gray700,children:r}):null]}),l?Object(H.jsx)(wt.a,{value:u,onChange:i}):null]}),Object(H.jsx)(j.a,{children:y})]})},Ct=n(224);function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pt=function(){var e=Object(f.a)().t,t=Object(O.b)(),n=Object(O.c)((function(e){return e.session.config}));return Object(H.jsx)(A,{title:e("debugEnableLogging"),icon:"alert-triangle",accentColor:d.b.red,onConfirm:function(){t(Object(Qe.e)(Dt(Dt({},n),{},{logging:!n.logging}))),t(Object(Qe.g)({message:e("restartToastMessage"),type:"warn",visible:!0}))},children:Object(H.jsx)(G.RenderHTMLSource,{source:{html:e("debugEnableLoggingDialogMessage",{path:Ct.default.logsDirectoryPath})}})})};function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Et(){var e=Object(f.a)().t,t=Object(b.useContext)(z.a),n=t.dark,r=t.device,a=Object(b.useContext)(S.a).setModal,c=Object(O.c)((function(e){return e.session.config})),o=Object(O.b)(),i=[{icon:"bug",name:e("debugEnableLogging"),description:e("debugEnableLoggingDesc"),settingsFunction:function(){c.logging?o(Object(Qe.e)(_t(_t({},c),{},{logging:!1}))):a(Object(H.jsx)(Pt,{}))},toggle:!0,toggleValue:c.logging},{icon:"arrow-back",name:e("debugResetConfig"),description:e("debugResetConfigDesc"),settingsFunction:function(){o(Object(Qe.d)())}},{icon:"bell-ringing",name:e("debugTestNotification"),description:e("debugTestNotificationDesc"),settingsFunction:function(){o(Object(Qe.g)({message:e("pleaseWait"),type:"info",visible:!0})),h()((function*(){yield Object(Ee.sendTestPushNotification)(r)}))()}}],s=Object(b.useMemo)((function(){return X.a.create({container:{marginTop:24*R.a,paddingHorizontal:16*R.a,paddingBottom:16*R.a}})}),[]);return Object(H.jsxs)(Ge.a,{children:[Object(H.jsx)($e,{headerType:We.MAIN,title:e("settings")}),Object(H.jsx)(j.a,{style:s.container,children:parseInt(p.a.ENABLE_DEBUG_OPTIONS)?Object(H.jsx)(Ce,{dark:n,title:e("debugSettings"),children:Object(H.jsx)(j.a,{style:{marginTop:-8*R.a},children:i.map((function(e){return function(e){return Object(H.jsx)(kt,_t({},e),e.name)}(e)}))})}):null}),Object(H.jsx)(j.a,{style:{marginTop:8,marginBottom:16,flexDirection:"row",justifyContent:"center"},children:Object(H.jsx)(B.a,{s:10*R.a,w:"r",c:n?d.b.gray200:d.b.gray700,children:"v"+x.version})})]})}var Tt=["explore","recentlyAdded"];function Mt(){var e=Object(f.a)().t,t=Object(O.b)(),n=Object(K.p)(),r=Object(O.c)((function(e){return e.courses.courses})),a=Object(O.c)((function(e){return e.courses})),c=a.getRecentMaterialStatus,o=a.recentMaterial,i=Object(b.useState)(0),s=u()(i,2),l=s[0],d=s[1],m=Object(b.useContext)(z.a),h=m.dark,y=m.device,p=Object(b.useState)(!1),x=u()(p,2),v=x[0],w=x[1],k=Object(b.useState)(!1),C=u()(k,2),S=(C[0],C[1]);Object(b.useEffect)((function(){var e=!0;r.forEach((function(n){n.status.code!=g.b.SUCCESS&&(e=!1,t(Object(Fe.c)({basicCourseInfo:n.basicInfo,device:y})))})),e&&w(!0)}),[]),Object(b.useEffect)((function(){if(!v){var e=!0;r.forEach((function(t){t.status.code!=g.b.SUCCESS&&(e=!1)})),e&&w(!0)}}),[r]),Object(b.useEffect)((function(){v&&c.code!=g.b.SUCCESS&&c.code!=g.b.PENDING&&t(Object(Fe.b)())}),[v]),Object(b.useEffect)((function(){c.code==g.b.SUCCESS&&S(!0)}),[c]);var D=Object(b.useMemo)((function(){return X.a.create({container:{marginTop:24*R.a,paddingHorizontal:16*R.a,paddingBottom:16*R.a}})}),[h]);return Object(H.jsxs)(Ge.a,{children:[Object(H.jsx)($e,{headerType:We.MAIN,title:e("material")}),Object(H.jsx)(Z.a,{data:[0],renderItem:function(){return Object(H.jsxs)(j.a,{style:D.container,children:[Object(H.jsx)(ce.a,{onPress:function(){n.navigate("Search")},children:Object(H.jsx)(ot.a,{editable:!1,placeholder:e("searchForAnything"),dark:h,icon:"search"})}),Object(H.jsx)(nt,{style:{marginTop:24*R.a,marginBottom:16*R.a},onChange:function(e){return d(e)},dark:h,items:Tt.map((function(t){return{label:e(t),value:t}}))}),0==l?Object(H.jsx)(Ve,{courseId:"all",dark:h}):Object(H.jsx)(Z.a,{data:o,keyExtractor:function(e){return e.code},renderItem:function(e){var t=e.item;return Object(H.jsx)(_e,{item:t,dark:h,course:t.course_name},t.code)}})]})}})]})}var zt=n(41),Rt=n(970),Lt=n(27),Nt=n.n(Lt),Bt=n(850),Ht=[{name:"general",items:[{name:"Home",icon:"layout-dashboard"},{name:"Email",icon:"mail"},{name:"Notifications",icon:"bell"},{name:"Settings",icon:"settings"}]},{name:"classes",items:[{name:"Courses",icon:"school"},{name:"Material",icon:"folders"},{name:"Bookings",icon:"ticket"},{name:"Timetable",icon:"clock"}]},{name:"exams",items:[{name:"Exams",icon:"book-2"},{name:"ExamSessions",icon:"ballpen"}]},{name:"headquarters",items:[{name:"Maps",icon:"map-2"},{name:"Classrooms",icon:"building-arch"},{name:"People",icon:"user"}]}],Vt=["dark"];function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt=function(e){return["Maps","Classrooms","People"].includes(e)},Ut=Ht.flatMap((function(e){return e.items.map((function(e){return e.name}))})),Yt=function(e){var t=e.dark,n=Nt()(e,Vt),r=Object(f.a)().t,a=Object(O.b)(),c=Object(b.useContext)(z.a),o=Object(O.c)((function(e){return e.user.userInfo})),i=Object(b.useMemo)((function(){return null==o?"":(e=o.degree_type,t=o.degree_name,("corso di laurea in"==e.toLowerCase()?"L3":"corso di laurea magistrale in"==e.toLowerCase()?"LM":"")+" "+t.toLowerCase().replace("ingegneria","").toUpperCase().trim());var e,t}),[o]),s=Object(b.useState)(Ut[0]),l=u()(s,2),g=l[0],m=l[1],h=Object(b.useCallback)((function(){a(Object(Qe.c)(c.device))}),[a,c]),y=Object(b.useMemo)((function(){return X.a.create({drawerScrollView:{backgroundColor:t?d.b.gray800:d.b.gray100},drawer:{flexDirection:"column",paddingHorizontal:16*R.a,paddingVertical:24*R.a},hr:{backgroundColor:d.b.gray500,height:1*R.a,marginBottom:16*R.a},category:{marginBottom:16*R.a}})}),[t]);return Object(H.jsx)(Bt.a,Ft(Ft({style:y.drawerScrollView},n),{},{children:Object(H.jsxs)(j.a,{style:y.drawer,children:[Object(H.jsxs)(j.a,{style:{justifyContent:"flex-start",marginBottom:16*R.a},children:[Object(H.jsx)(B.a,{s:14*R.a,w:"b",c:t?d.b.gray100:d.b.gray800,children:"Open PoliTo"}),Object(H.jsxs)(B.a,{s:10*R.a,w:"r",c:t?d.b.gray200:d.b.gray700,children:["v",x.version]})]}),Object(H.jsx)(j.a,{style:y.hr}),Ht.map((function(e){return Object(H.jsxs)(j.a,{style:y.category,children:[Object(H.jsx)(j.a,{style:{marginBottom:8*R.a},children:Object(H.jsx)(B.a,{s:10*R.a,w:"m",c:t?d.b.gray200:d.b.gray700,children:r(e.name).toUpperCase()})}),e.items.map((function(e){return Object(H.jsxs)(ce.a,{disabled:Gt(e.name),style:{paddingVertical:4*R.a,flexDirection:"row",alignItems:"center",opacity:Gt(e.name)?.3:1},onPress:function(){m(e.name),n.navigation.navigate(e.name)},children:[Object(H.jsx)(N.a,{name:e.icon,size:24*R.a,color:e.name==g?d.b.accent300:t?d.b.gray100:d.b.gray700,style:{marginRight:8*R.a}}),Object(H.jsx)(B.a,{s:12*R.a,w:"m",c:e.name==g?d.b.accent300:t?d.b.gray100:d.b.gray800,children:r(e.name.charAt(0).toLowerCase()+e.name.slice(1))})]},e.name)}))]})})),Object(H.jsx)(j.a,{style:y.hr}),Object(H.jsxs)(j.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(H.jsx)(j.a,{style:{width:24*R.a,height:24*R.a,borderRadius:24*R.a,backgroundColor:d.b.accent100,marginRight:8*R.a}}),Object(H.jsxs)(j.a,{style:{justifyContent:"flex-start",flex:1},children:[Object(H.jsxs)(B.a,{numberOfLines:1,w:"b",c:t?d.b.gray100:d.b.gray800,s:12*R.a,children:[null==o?void 0:o.surname," ",null==o?void 0:o.name]}),Object(H.jsx)(B.a,{numberOfLines:1,w:"r",c:t?d.b.gray200:d.b.gray700,s:10*R.a,children:i})]}),Object(H.jsx)(ce.a,{onPress:function(){h()},children:Object(H.jsx)(N.a,{name:"logout",size:24*R.a,color:d.b.accent300})})]})]})}))},Wt=n(92),qt=n(102),Xt=n(259),Jt=function(e){var t=e.dark,n=e.title,r=e.description,a=e.onPress,c=e.expanded,o=e.sideElement,i=e.expandedElement,s=e.children,l=Object(_.a)(0),u=Object(_.a)(0),f=Object(_.a)(0),O=Object(_.a)(1);Object(b.useEffect)((function(){var e=c&&i;l.value=Object(T.a)(e?90:0,{duration:200}),u.value=Object(T.a)(e?1:0,{duration:200}),f.value=Object(T.a)(e?1:0,{duration:400})}),[c,l,u,f,i]),Object(b.useEffect)((function(){O.value=Object(T.a)(o?1:0,{duration:400})}),[o,O]);var g,m=Object(E.a)(((g=function(){return{transform:[{rotate:l.value+"deg"}]}})._closure={rotation:l},g.asString='function _f(){const{rotation}=jsThis._closure;{return{transform:[{rotate:rotation.value+"deg"}]};}}',g.__workletHash=0xb8f92e0794d,g.__location="/home/runner/work/open-polito/open-polito/src/ui/core/PressableCard.tsx (53:44)",g.__optimalization=3,g)),h=Object(E.a)(function(){var e=function(){return{opacity:f.value,maxHeight:100*u.value+"%"}};return e._closure={expandedElementOpacity:f,scale:u},e.asString='function _f(){const{expandedElementOpacity,scale}=jsThis._closure;{return{opacity:expandedElementOpacity.value,maxHeight:scale.value*100+"%"};}}',e.__workletHash=8953569702199,e.__location="/home/runner/work/open-polito/open-polito/src/ui/core/PressableCard.tsx (61:48)",e.__optimalization=3,e}()),y=Object(E.a)(function(){var e=function(){return{opacity:O.value}};return e._closure={sideElementOpacity:O},e.asString="function _f(){const{sideElementOpacity}=jsThis._closure;{return{opacity:sideElementOpacity.value};}}",e.__workletHash=0xf81030983f6,e.__location="/home/runner/work/open-polito/open-polito/src/ui/core/PressableCard.tsx (66:44)",e.__optimalization=3,e}()),p=Object(b.useMemo)((function(){return X.a.create({button:{paddingVertical:8*R.a,paddingLeft:16*R.a,paddingRight:8*R.a,marginBottom:16*R.a,backgroundColor:t?d.b.gray700:d.b.gray200,borderRadius:4*R.a}})}),[t]);return Object(H.jsx)(ce.a,{onPress:a,android_ripple:{color:t?d.b.gray400:d.b.gray500},style:p.button,children:Object(H.jsx)(j.a,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:i?"flex-start":"center"},children:Object(H.jsxs)(j.a,{style:{flex:1},children:[Object(H.jsxs)(j.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(H.jsxs)(j.a,{style:{flex:4},children:[n&&Object(H.jsx)(B.a,{s:12*R.a,c:t?d.b.gray200:d.b.gray700,w:"m",children:n}),r&&Object(H.jsx)(B.a,{s:10*R.a,c:t?d.b.gray300:d.b.gray600,w:"r",children:r})]}),Object(H.jsx)(M.default.View,{style:[y,{flex:o?1:0}],children:o}),Object(H.jsx)(j.a,{style:{justifyContent:"flex-start",alignItems:"center"},children:Object(H.jsx)(j.a,{children:Object(H.jsx)(M.default.View,{style:[m],children:Object(H.jsx)(N.a,{name:"chevron-right",color:t?d.b.gray200:d.b.gray700,size:24*R.a})})})})]}),Object(H.jsxs)(j.a,{style:{paddingRight:8*R.a},children:[s,Object(H.jsx)(M.default.View,{style:[h],children:Object(H.jsx)(j.a,{children:i})})]})]})})})};function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zt=function(e){e.ctxId;var t=e.subctx,n=e.language,r=e.dark,a=(Object(b.useContext)(z.a).device,Object(b.useState)({loaded:!1,expanded:!1,mounted:!0,slots:[]})),c=u()(a,2),o=(c[0],c[1]);return Object(b.useEffect)((function(){return function(){return o((function(e){return Kt(Kt({},e),{},{mounted:!1})}))}}),[]),Object(H.jsxs)(j.a,{children:[Object(H.jsx)(Oe.a,{onPress:function(){return o((function(e){return Kt(Kt({},e),{},{expanded:!e.expanded})}))},android_ripple:{color:d.b.lightGray},style:{paddingVertical:8*R.a},children:Object(H.jsx)(B.a,{s:10*R.a,w:"m",c:r?d.b.gray200:d.b.gray700,children:"it"===n?t.ita.name:t.eng.name})}),Object(H.jsx)(j.a,{})]},t.id)},$t=function(e){var t,n=e.ctx,r=e.language,a=e.dark,c=Object(b.useState)(!1),o=u()(c,2),i=o[0],s=o[1];return Object(H.jsx)(j.a,{children:Object(H.jsx)(Jt,{expanded:i,dark:a,onPress:function(){s(!i)},description:"it"===r?n.ita.description:n.eng.description,title:"it"===r?n.ita.name:n.eng.name,expandedElement:n.subcontexts&&n.subcontexts.length>0?Object(H.jsx)(j.a,{style:{marginTop:16*R.a},children:null==(t=n.subcontexts)?void 0:t.map((function(e){return Object(H.jsx)(Zt,{dark:a,subctx:e,language:r,ctxId:n.id},e.id)}))}):null})})},en=function(e){var t=e.dark,n=e.booking,r=e.barcodeUrl,a=Object(b.useState)(!1),c=u()(a,2),o=c[0],i=c[1],s=Object(b.useMemo)((function(){return[{type:"date",label:ne()(n.start_time).format("ll"),icon:"calendar-time"},{type:"time",label:ne()(n.start_time).format("LT")+" - "+ne()(n.end_time).format("LT"),icon:"clock"}]}),[n]);return Object(H.jsx)(Jt,{title:n.course_id?n.course_name+" - "+n.course_id:n.subcontext_name,description:n.context_name,expanded:o,dark:t,sideElement:!o&&Object(H.jsx)(ae.a,{source:{uri:r},style:{width:"100%",aspectRatio:2.5,resizeMode:"contain"},resizeMode:"contain"}),expandedElement:Object(H.jsx)(j.a,{style:{flex:1,marginTop:16*R.a},children:Object(H.jsx)(ae.a,{source:{uri:r},style:{width:"100%",aspectRatio:2.5,resizeMode:"contain"}})}),onPress:function(){return i((function(e){return!e}))},children:Object(H.jsx)(j.a,{style:{marginTop:16*R.a},children:s.map((function(e,n){return Object(H.jsxs)(j.a,{style:[{flexDirection:"row",alignItems:"center"},n>0&&{marginTop:8*R.a}],children:[Object(H.jsx)(N.a,{name:e.icon,size:16*R.a,color:t?d.b.gray200:d.b.gray700,style:{marginRight:8*R.a}}),Object(H.jsx)(B.a,{style:{marginRight:8*R.a},s:10*R.a,w:"r",c:t?d.b.gray200:d.b.gray700,children:e.label})]})}))})})},tn=function(){var e=Object(f.a)().t,t=Object(b.useContext)(z.a),n=t.device,r=t.dark,a=Object(O.b)(),c=Object(O.c)((function(e){return e.user})),o=c.userInfo,i=c.getBookingsStatus,s=c.getBookingContextsStatus,l=c.bookings,d=c.bookingContexts,m=Object(b.useRef)(!0),y=Object(b.useMemo)((function(){return["myBookings","newBooking"]}),[]),p=Object(b.useState)({currentTab:y[0],barcodeUrl:""}),x=u()(p,2),v=x[0],w=x[1],k=Object(b.useMemo)((function(){return i.code===g.b.PENDING||s.code===g.b.PENDING}),[i,s]),C=Object(b.useCallback)((function(e){"myBookings"===e&&a(Object(yt.c)(n)),"newBooking"===e&&a(Object(yt.b)(n))}),[n,a]);Object(b.useEffect)((function(){""===v.barcodeUrl&&o&&w((function(e){return Kt(Kt({},e),{},{barcodeUrl:Object(qt.barcode_url)(o.current_id)})}))}),[v.barcodeUrl,o]),Object(b.useEffect)((function(){h()((function*(){v.currentTab===y[0]?a(Object(yt.c)(n)):v.currentTab===y[1]&&a(Object(yt.b)(n))}))()}),[v.currentTab,o,n,a,y]),Object(b.useEffect)((function(){return function(){m.current=!1}}),[]);var S=Object(b.useMemo)((function(){return X.a.create({container:{marginTop:24*R.a,paddingHorizontal:16*R.a,flex:1}})}),[]);return Object(H.jsxs)(Ge.a,{children:[Object(H.jsx)($e,{title:e("bookings"),headerType:We.MAIN}),Object(H.jsx)(nt,{adjusted:!0,dark:r,onChange:function(e){return w((function(t){return Kt(Kt({},t),{},{currentTab:y[e]})}))},items:y.map((function(t){return{label:e(t),value:t}}))}),Object(H.jsx)(j.a,{style:S.container,children:Object(H.jsx)(Xt.ScrollView,{refreshControl:Object(H.jsx)(q.a,{refreshing:k,onRefresh:function(){return C(v.currentTab===y[0]?"myBookings":"newBooking")}}),children:v.currentTab===y[0]&&i.code===g.b.PENDING||v.currentTab===y[1]&&s.code===g.b.PENDING?Object(H.jsx)(le.a,{}):v.currentTab===y[0]?0===l.length?Object(H.jsx)(ee,{}):l.map((function(e){return Object(H.jsx)(en,{dark:r,booking:e,barcodeUrl:v.barcodeUrl},""+e.context_id+e.subcontext_id+e.start_time+e.end_time)})):0===d.length?Object(H.jsx)(ee,{}):d.map((function(e){return Object(H.jsx)($t,{dark:r,ctx:e,language:Wt.b.language},e.id)}))})})]})},nn=n(936),rn=n(451),an=n.n(rn),cn=function(e){var t=e.width,n=e.height,r=e.children;return Object(H.jsx)(j.a,{style:{width:t,height:n},children:r})},on=function(e){var t,n=e.children,r=Object(b.useState)(!1),a=u()(r,2),c=a[0],o=a[1],i=Object(b.useState)(!0),s=u()(i,2),l=s[0],j=s[1],d=Object(_.a)(0),f=Object(E.a)(((t=function(){return{opacity:d.value,transform:[{translateY:8-8*d.value},{translateX:8-8*d.value}]}})._closure={offset:d},t.asString="function _f(){const{offset}=jsThis._closure;{return{opacity:offset.value,transform:[{translateY:8-offset.value*8},{translateX:8-offset.value*8}]};}}",t.__workletHash=4069580825127,t.__location="/home/runner/work/open-polito/open-polito/src/components/loaders/LoaderBase.tsx (16:37)",t.__optimalization=3,t));return Object(b.useEffect)((function(){return h()((function*(){setTimeout((function(){l&&o(!0)}),150)}))(),function(){j(!1)}}),[]),Object(b.useEffect)((function(){c&&(d.value=Object(T.a)(1,{duration:200}))}),[c]),c?Object(H.jsx)(M.default.View,{style:[f],children:n}):null},sn=function(e){var t=e.w,n=e.h,r=Object(b.useState)(Math.ceil(2*Math.random())),a=u()(r,1)[0],c=Object(b.useState)(Array.from({length:a},(function(e,t){return(t+1)*(3+Math.random())*n}))),o=u()(c,1)[0];return Object(H.jsx)(j.a,{style:{height:10*n,position:"absolute"},children:Object(H.jsx)(on,{children:Object(H.jsx)(cn,{width:t,height:15*n,children:Array.from({length:a}).map((function(e,r){return Object(H.jsx)(rn.Rect,{x:0,y:o[r],rx:4*R.a,ry:4*R.a,width:t-4,height:2*n},r)}))})})})},ln=function(e){var t=e.slot,n=Object(b.useContext)(z.a).dark,r=Object(b.useMemo)((function(){return[{icon:"map-pin",name:t.room},{icon:"align-justified",name:t.type},{icon:"clock",name:ne()(t.start_time).format("HH:mm")+" - "+ne()(t.end_time).format("HH:mm")+" ("+ne()(t.start_time).format("ll")+")"},{icon:"user",name:t.professor.surname+" "+t.professor.name}]}),[t]);return Object(H.jsx)(V,{title:t.course_name,children:r.map((function(e,t){return Object(H.jsxs)(j.a,{style:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginTop:(0==t?0:8)*R.a},children:[Object(H.jsx)(N.a,{name:e.icon,size:16*R.a,color:n?d.b.gray300:d.b.gray600,style:{marginRight:8*R.a}}),Object(H.jsx)(B.a,{s:12*R.a,c:n?d.b.gray100:d.b.gray800,w:"r",children:e.name})]})}))})},un=function(e){var t=e.overlapGroup,n=e.slot,r=e.w,a=e.h,c=e.courseNames,o=e.index,i=Object(b.useContext)(S.a).setModal,s=Object(_.a)(0),l=Object(_.a)(0),f=Object(_.a)(0),O=Object(b.useState)(0),g=u()(O,2),m=g[0],h=g[1];Object(b.useEffect)((function(){l.value=1}),[]),Object(b.useEffect)((function(){s.value=r,r>=60&&setTimeout((function(){f.value=1}),100)}),[r]);var y,p=Object(E.a)(((y=function(){return{opacity:Object(T.a)(f.value,{duration:500})}})._closure={withTiming:T.a,textOpacity:f},y.asString="function _f(){const{withTiming,textOpacity}=jsThis._closure;{return{opacity:withTiming(textOpacity.value,{duration:500})};}}",y.__workletHash=3417517497760,y.__location="/home/runner/work/open-polito/open-polito/src/components/timetable/TimetableEvent.tsx (53:48)",y.__optimalization=2,y)),x=Object(E.a)(function(){var e=function(){return{width:Object(T.a)(t.length>0?s.value/t.length:s.value,{duration:250}),left:Object(T.a)(t.length>0?o*(s.value/t.length):0,{duration:250})}};return e._closure={withTiming:T.a,overlapGroup:t,offset:s,index:o},e.asString="function _f(){const{withTiming,overlapGroup,offset,index}=jsThis._closure;{return{width:withTiming(overlapGroup.length>0?offset.value/overlapGroup.length:offset.value,{duration:250}),left:withTiming(overlapGroup.length>0?index*(offset.value/overlapGroup.length):0,{duration:250})};}}",e.__workletHash=0xa9304f61bed,e.__location="/home/runner/work/open-polito/open-polito/src/components/timetable/TimetableEvent.tsx (57:37)",e.__optimalization=2,e}());return Object(H.jsx)(M.default.View,{onLayout:function(e){return h(e.nativeEvent.layout.width)},style:[{overflow:"hidden",position:"absolute",top:a+ne.a.duration(ne()(n.start_time).diff(ne()(n.start_time).set({h:8,m:0}))).as("ms")/36e5*a-a/2,borderRadius:4*R.a,backgroundColor:d.a[c.findIndex((function(e){return e==n.course_name}))],height:ne.a.duration(n.end_time-n.start_time).as("ms")/36e5*a},x],children:Object(H.jsxs)(I.a,{style:{flex:1,padding:4*R.a},onPress:function(){i(Object(H.jsx)(ln,{slot:n}))},children:[m>=25?Object(H.jsx)(M.default.View,{style:[p],children:Object(H.jsx)(B.a,{w:"r",s:8*R.a,c:d.b.white,numberOfLines:2,children:n.course_name})}):null,m>=60?Object(H.jsxs)(M.default.View,{style:[p],children:[Object(H.jsxs)(j.a,{style:{flexDirection:"row",marginTop:8*R.a,alignItems:"center",justifyContent:"flex-start",overflow:"hidden"},children:[Object(H.jsx)(N.a,{name:"map-pin",size:8*R.a,color:d.b.gray50}),Object(H.jsx)(B.a,{w:"r",s:8*R.a,c:d.b.gray50,numberOfLines:2,style:{marginLeft:2*R.a},children:n.room})]}),Object(H.jsxs)(j.a,{style:{opacity:l.value,flexDirection:"row",marginTop:4*R.a,alignItems:"center",justifyContent:"flex-start",overflow:"hidden"},children:[Object(H.jsx)(N.a,{name:"list",size:8*R.a,color:d.b.gray50}),Object(H.jsx)(B.a,{w:"r",s:8*R.a,c:d.b.gray50,numberOfLines:2,style:{marginLeft:2*R.a},children:n.type})]})]}):null]})})},bn=function(e){var t=e.fake,n=void 0!==t&&t,r=e.day,a=e.h,c=e.courseNames,o=e.config,i=(e.index,Object(b.useState)(0)),s=u()(i,2),l=s[0],f=s[1],O=Object(b.useMemo)((function(){return Q()(r).sort((function(e,t){return o.timetablePriority.indexOf(t.course_name)-o.timetablePriority.indexOf(e.course_name)}))}),[o.timetablePriority,r]),g=Object(b.useMemo)((function(){if("priority"===o.timetableOverlap)return[];if(0===r.length)return[];for(var e=[],t=ne()(r[0].start_time).set({h:8,m:45}),n=function(n){t.add(90,"m");var a=[];r.map((function(e){e.start_time<t.toDate().getTime()&&t.toDate().getTime()<e.end_time&&a.push(e)})),a.length>1&&e.push(a)},a=0;a<9;a++)n();return e}),[r,o.timetableOverlap]);return Object(H.jsx)(j.a,{onLayout:function(e){f(e.nativeEvent.layout.width)},style:{backgroundColor:d.b.white,flex:1,zIndex:200,flexDirection:"column",justifyContent:"flex-start",alignItems:"center",borderColor:d.b.gray200,marginHorizontal:1*R.a},children:n?Object(H.jsx)(sn,{w:l,h:a}):"priority"===o.timetableOverlap?O.map((function(e,t){return Object(H.jsx)(un,{overlapGroup:[],slot:e,w:l,h:a,courseNames:c,index:t},t)})):r.map((function(e,t){var n=function(e){var t=[];return g.forEach((function(n){n.includes(e)&&(t=n)})),t}(e),r=n.findIndex((function(t){return e===t}));return Object(H.jsx)(un,{overlapGroup:n,slot:e,w:l,h:a,courseNames:c,index:r},t)}))})};function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fn=function(e){var t=e.loaded,n=e.timetableDays,r=e.layout,a=e.selectedDay,c=Object(O.b)(),o=Object(O.c)((function(e){return e.session.config})),i=Object(b.useState)(re.a.get("window").height/15),s=u()(i,2),l=s[0],d=(s[1],Object(b.useState)(["","",""])),f=u()(d,2),g=f[0],m=f[1],h=Object(b.useMemo)((function(){return 1===n.length?n:n.slice(1,6)}),[n]);return Object(b.useEffect)((function(){var e;m((e=[],n.forEach((function(t){t.forEach((function(t){e.includes(t.course_name)||e.push(t.course_name)}))})),e.sort()))}),[h]),Object(b.useEffect)((function(){if(o.timetableOverlap&&o.timetablePriority){var e=Q()(o.timetablePriority),t=!1;g.forEach((function(n){""===n.trim()||o.timetablePriority.includes(n)||(e.push(n),t=!0)})),t&&c(Object(Qe.e)(dn(dn({},o),{},{timetablePriority:e})))}}),[h,g,o,c]),Object(H.jsx)(j.a,{style:{position:"absolute",flex:1,marginLeft:32*R.a,marginRight:16*R.a,flexDirection:"row",alignItems:"flex-start",justifyContent:"center"},children:("week"===r?h:[h[a-1]]).map((function(e,n){return Object(H.jsx)(bn,{fake:!t,config:o,day:e,h:l,index:n,courseNames:g},n)}))})},On=function(e){var t=e.showLine,n=e.dark,r=Object(b.useState)(re.a.get("window").height/15),a=u()(r,2),c=a[0],o=(a[1],Object(b.useState)(ne()())),i=u()(o,2),s=i[0],l=i[1],f=Object(b.useState)(!0),O=u()(f,2),g=O[0],m=O[1],h=Object(b.useState)(null),y=u()(h,2),p=y[0];y[1];return Object(b.useEffect)((function(){return m(!0),function(){p&&clearTimeout(p),m(!1)}}),[]),Object(b.useEffect)((function(){setTimeout((function(){g&&l(ne()())}),1e4)}),[s,g]),Object(H.jsxs)(j.a,{style:{flex:1,paddingLeft:8*R.a,paddingRight:16*R.a,paddingBottom:16*R.a,flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"},children:[t?Object(H.jsx)(j.a,{style:{zIndex:300,height:0,borderTopColor:d.b.red,borderBottomColor:d.b.red,backgroundColor:d.b.red,borderTopWidth:.5*R.a,borderBottomWidth:.5*R.a,flexDirection:"row",justifyContent:"flex-start",alignItems:"center",transform:[{translateY:c+ne.a.duration(s.diff(ne()().set({h:8,m:0}))).as("ms")/36e5*c-c/2}]},children:Object(H.jsx)(j.a,{style:{backgroundColor:d.b.red,width:8*R.a,height:8*R.a,borderRadius:16*R.a}})}):null,Array.from({length:14}).map((function(e,t){return Object(H.jsxs)(j.a,{style:{zIndex:100,width:"100%",height:0==t?c/2:c,flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end"},children:[Object(H.jsx)(B.a,{s:8*R.a,c:n?d.b.gray200:d.b.gray700,w:"r",style:{transform:[{translateY:4*R.a}]},children:8+t+":00"}),Object(H.jsx)(j.a,{style:{flex:1,borderBottomWidth:.5*R.a,borderColor:n?d.b.gray500:d.b.gray200,marginLeft:4*R.a,height:c,flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end"}})]},t)}))]})},gn=function(e){var t=e.items,n=e.label,r=void 0===n?"":n,a=e.onValueChange,c=e.defaultValue,o=void 0===c?t[0].value:c,i=e.dark,s=Object(b.useState)(o),l=u()(s,2),f=l[0],O=l[1];return Object(b.useEffect)((function(){a(f)}),[f]),Object(H.jsxs)(j.a,{style:{flexDirection:"row",alignItems:"center"},children:[r?Object(H.jsx)(B.a,{s:10*R.a,w:"r",c:i?d.b.gray100:d.b.gray800,style:{marginRight:4*R.a},children:r}):null,Object(H.jsx)(j.a,{style:{flexDirection:"row",backgroundColor:i?d.b.gray700:d.b.gray200,marginLeft:4*R.a,borderRadius:4*R.a},children:t.map((function(e,n){return Object(H.jsx)(ce.a,{onPress:function(){O(e.value)},style:[{backgroundColor:e.value==f?d.b.accent300:"rgba(0,0,0,0)",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:4*R.a},0===n?{borderTopLeftRadius:4*R.a,borderBottomLeftRadius:4*R.a}:n===t.length-1?{borderTopRightRadius:4*R.a,borderBottomRightRadius:4*R.a}:{}],children:Object(H.jsx)(N.a,{name:e.icon,size:16*R.a,color:e.value==f?d.b.gray50:i?d.b.gray200:d.b.gray700})},e.value)}))})]})},mn=n(619),hn=n(956),yn=n(937),pn=n.n(yn),xn=function(e){var t=e.items,n=e.callback,r=e.disabled,a=e.dark,c=Object(b.useState)(t),o=u()(c,2),i=o[0],s=o[1];Object(b.useEffect)((function(){n(i.map((function(e){return e.label})))}),[i]);return Object(H.jsx)(Xt.GestureHandlerRootView,{children:Object(H.jsx)(pn.a,{onDragEnd:function(e){var t=e.data;return s(t)},data:i,keyExtractor:function(e){return e.value},renderItem:function(e){var t=e.item,n=(e.index,e.drag);return Object(H.jsx)(yn.ScaleDecorator,{children:Object(H.jsx)(I.a,{disabled:r,onLongPress:n,onPressIn:n,onPress:n,style:{paddingVertical:4*R.a},children:Object(H.jsxs)(j.a,{style:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginLeft:0*R.a,opacity:r?.5:1},children:[Object(H.jsx)(N.a,{name:"grid-dots",size:24*R.a,color:a?d.b.gray300:d.b.gray600}),Object(H.jsx)(j.a,{style:{marginLeft:8*R.a},children:Object(H.jsx)(B.a,{s:12*R.a,c:a?d.b.gray100:d.b.gray800,w:"r",children:t.label})})]})})})}})})};function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kn=function(){var e=Object(O.b)(),t=Object(f.a)().t,n=Object(b.useContext)(z.a).dark,r=Object(b.useState)(!1),a=u()(r,2),c=a[0],o=a[1];Object(b.useEffect)((function(){setTimeout((function(){return o(!0)}),0)}),[]);var i=Object(O.c)((function(e){return e.session.config})),s=Object(b.useMemo)((function(){return i.timetablePriority.map((function(e){return{label:e,value:e}}))}),[i]),l=Object(b.useCallback)((function(){var t="split"===i.timetableOverlap?"priority":"split";e(Object(Qe.e)(wn(wn({},i),{},{timetableOverlap:t})))}),[i,e]),g=Object(b.useMemo)((function(){return[{name:t("timetablePriority"),description:t("timetablePriorityDesc"),icon:"stack-2",toggle:!0,toggleValue:"priority"===i.timetableOverlap,settingsFunction:l},{name:t("timetablePriorityList"),settingsFunction:function(){},disabled:"priority"!==i.timetableOverlap,children:Object(H.jsx)(j.a,{children:Object(H.jsx)(xn,{dark:n,disabled:"priority"!==i.timetableOverlap,items:s,callback:function(t){return e(Object(Qe.e)(wn(wn({},i),{},{timetablePriority:t.filter((function(e){return""!==e}))})))}})}),paddingBottom:!1}]}),[i,n,e,s,t,l]);return Object(H.jsx)(V,{title:t("timetableOptions"),children:Object(H.jsx)(j.a,{children:c?g.map((function(e){return Object(H.jsx)(kt,wn({},e),e.name)})):Object(H.jsx)(le.a,{color:d.b.accent300})})})},Cn=function(e){var t,n=e.selectedDay,r=void 0===n?null:n,a=e.timetableDays,c=e.weekStartDate,o=e.onLayoutChanged,i=e.onDayChanged,s=e.onWeekStartDateChanged,l=Object(f.a)().t,u=Object(b.useContext)(z.a).dark,O=Object(b.useContext)(S.a).setModal,g=function(e){m.value=Object(mn.a)(Object(T.a)(0,{duration:250}),Object(T.a)(1,{duration:250})),s(e)},m=Object(_.a)(1),h=Object(E.a)(((t=function(){return{opacity:m.value}})._closure={opacity:m},t.asString="function _f(){const{opacity}=jsThis._closure;{return{opacity:opacity.value};}}",t.__workletHash=1880562015862,t.__location="/home/runner/work/open-polito/open-polito/src/components/timetable/TimetableHeader.tsx (70:37)",t.__optimalization=3,t)),p=Object(b.useMemo)((function(){var e=ne()(c),t=ne()(c).add(4,"day");return c?c.getTime()==ne()().startOf("w").toDate().getTime()?l("thisWeek"):e.get("date")+" "+(e.get("month")!=t.get("month")?e.format("MMM "):"")+(e.get("year")!=t.get("year")?e.format("YYYY "):"")+"- "+t.format("D MMM YYYY"):l("thisWeek")}),[c,l]);return Object(H.jsxs)(j.a,{style:{borderBottomWidth:1*R.a,borderBottomColor:d.b.gray200},children:[Object(H.jsxs)(j.a,{style:{marginBottom:16*R.a,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:["android"===y.a.OS?Object(H.jsx)(L.a,{secondary:!0,small:!0,text:l("jumpToDate"),icon:"chevrons-right",onPress:function(){return e=function(e){e&&g(new Date(e))},void hn.a.open({mode:"date",value:new Date,onChange:function(t){return e(t.nativeEvent.timestamp)}});var e}}):Object(H.jsx)(j.a,{}),Object(H.jsxs)(j.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(H.jsx)(gn,{defaultValue:"week",onValueChange:function(e){!function(e){o(e)}(e)},label:"Layout:",items:[{icon:"layout-rows",value:"day"},{icon:"layout-columns",value:"week"}],dark:u}),Object(H.jsx)(Xt.TouchableOpacity,{style:{marginLeft:24*R.a},children:Object(H.jsx)(N.a,{onPress:function(){return O(Object(H.jsx)(kn,{}))},name:"settings",size:20*R.a,color:u?d.b.gray100:d.b.gray800})})]})]}),Object(H.jsxs)(j.a,{style:{marginBottom:16*R.a,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[Object(H.jsx)(Oe.a,{onPress:function(){return g(ne()(c).subtract(1,"w").toDate())},children:Object(H.jsx)(N.a,{name:"arrow-left",size:24*R.a,color:u?d.b.gray100:d.b.gray800})}),Object(H.jsx)(M.default.View,{style:[h],children:Object(H.jsx)(B.a,{c:u?d.b.gray100:d.b.gray800,s:12*R.a,w:"m",children:p})}),Object(H.jsx)(Oe.a,{onPress:function(){return g(ne()(c).add(1,"w").toDate())},children:Object(H.jsx)(N.a,{name:"arrow-right",size:24*R.a,color:u?d.b.gray100:d.b.gray800})})]}),Object(H.jsx)(j.a,{style:{marginLeft:12,flexDirection:"row",alignItems:"flex-start",justifyContent:"space-around",paddingBottom:12},children:a.slice(1,6).map((function(e,t){return Object(H.jsxs)(Oe.a,{onPress:function(){i(t+1)},style:{opacity:c?1:0,flexDirection:"column",justifyContent:"center",alignItems:"center",paddingHorizontal:12,paddingVertical:4,borderRadius:4,backgroundColor:r==t+1?d.b.accent300:u?d.b.gray700:d.b.gray200},children:[Object(H.jsx)(B.a,{s:10*R.a,w:"r",c:r==t+1||u?d.b.gray100:d.b.gray800,children:c?ne()(c).add(t,"d").format("ddd"):""}),Object(H.jsx)(B.a,{s:10*R.a,w:"r",c:r==t+1||u?d.b.gray100:d.b.gray700,children:c?ne()(c).add(t,"d").date():""},t)]},t)}))})]})},Sn=function(){var e,t=Object(f.a)().t,n=Object(b.useContext)(z.a),r=n.device,a=n.dark,c=Object(b.useState)(!1),o=u()(c,2),i=o[0],s=o[1],l=Object(b.useState)(null),d=u()(l,2),O=d[0],g=d[1],m=Object(b.useState)([]),y=u()(m,2),p=y[0],x=y[1],v=Object(b.useMemo)((function(){var e=Array.from({length:7},(function(){return[]}));return p.forEach((function(t){e[ne()(t.start_time).day()].push(t)})),e}),[p]),w=Object(b.useState)("day"),k=u()(w,2),C=k[0],S=k[1],D=Object(b.useState)(!0),I=u()(D,2),L=I[0],N=I[1],B=Object(b.useState)(1),V=u()(B,2),A=V[0],F=V[1],G=Object(b.useState)(null),U=u()(G,2),Y=U[0],W=U[1],q=Object(b.useState)(!1),X=u()(q,2),J=X[0],Q=X[1],K=Object(_.a)(0),Z=Object(_.a)(0),$=Object(E.a)(((e=function(){return{opacity:Object(T.a)(Z.value,{duration:500}),transform:[{translateX:K.value}]}})._closure={withTiming:T.a,opacity:Z,offset:K},e.asString="function _f(){const{withTiming,opacity,offset}=jsThis._closure;{return{opacity:withTiming(opacity.value,{duration:500}),transform:[{translateX:offset.value}]};}}",e.__workletHash=9560942952119,e.__location="/home/runner/work/open-polito/open-polito/src/screens/Timetable.tsx (51:37)",e.__optimalization=2,e)),ee=function(e){Z.value=Object(mn.a)(Object(T.a)(0,{duration:250}),Object(T.a)(0,{duration:500}),Object(T.a)(1,{duration:250})),K.value="l"===e?Object(mn.a)(Object(T.a)(32,{duration:750}),Object(T.a)(-32,{duration:0}),Object(T.a)(0,{duration:750})):Object(mn.a)(Object(T.a)(-32,{duration:750}),Object(T.a)(32,{duration:0}),Object(T.a)(0,{duration:750}))};Object(b.useEffect)((function(){return h()((function*(){O||ee("r"),Y&&clearTimeout(Y),W(setTimeout(h()((function*(){s(!1);var e=[];x([]);try{e=yield Object(nn.getTimetable)(r,null!=O?O:new Date),s(!0)}catch(e){}finally{if(!O){var t=ne()().startOf("isoWeek").toDate();L&&g(t)}x(e)}})),250))}))(),function(){clearTimeout(Y),N(!1)}}),[J]);var te=Object(b.useMemo)((function(){return"week"===C&&(null==O?void 0:O.getTime())===ne()().startOf("isoWeek").toDate().getTime()||"day"===C&&ne()(O).add(A-1,"days").toDate().getTime()===ne()().startOf("day").toDate().getTime()}),[O,A,C]);return Object(H.jsxs)(Ge.a,{children:[Object(H.jsx)($e,{headerType:We.MAIN,title:t("timetable")}),Object(H.jsxs)(j.a,{style:{flex:1,paddingTop:24*R.a},children:[Object(H.jsx)(j.a,{style:{paddingHorizontal:16*R.a},children:Object(H.jsx)(Cn,{selectedDay:"week"===C?null:A,onDayChanged:function(e){F(e)},onLayoutChanged:function(e){S(e)},weekStartDate:O,onWeekStartDateChanged:function(e){O&&e.getTime()<O.getTime()?ee("l"):ee("r"),g(ne()(e).startOf("isoWeek").toDate()),Q(!J)},timetableDays:v})}),Object(H.jsx)(P.a,{style:{flex:1},children:Object(H.jsxs)(M.default.View,{style:[$,{flex:1}],children:[Object(H.jsx)(On,{showLine:te,dark:a}),Object(H.jsx)(fn,{loaded:i,timetableDays:v,layout:C,selectedDay:A})]})})]})]})},Dn=function(e){var t=e.label,n=e.value,r=e.max,a=e.radius,c=e.strokeWidth,o=void 0===c?4*R.a:c,i=e.fontSize,s=e.backgroundColor,l=e.dark,u=e.children,f=2*Math.PI*a,O=Object(b.useMemo)((function(){return n<=r?n:r}),[n,r]);return Object(H.jsxs)(j.a,{style:{position:"relative"},children:[Object(H.jsxs)(an.a,{width:2*(a+o),height:2*(a+o),children:[Object(H.jsx)(rn.Circle,{transform:"rotate(-90 "+(a+o)+" "+(a+o)+")",strokeWidth:o,fill:s||"transparent",stroke:l?d.b.gray700:d.b.gray200,r:a,cx:a+o,cy:a+o}),Object(H.jsx)(rn.Circle,{transform:"rotate(-90 "+(a+o)+" "+(a+o)+")",strokeWidth:o,fill:"transparent",stroke:d.b.accent300,strokeDasharray:f,strokeDashoffset:"number"==typeof O?(100-100*O/r)*f/100:0,r:a,cx:a+o,cy:a+o})]}),Object(H.jsxs)(j.a,{style:{position:"absolute",width:2*(a+o),height:2*(a+o),flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(H.jsx)(B.a,{s:i||(t||"string"==typeof O?10*R.a:16*R.a),c:l?d.b.gray100:d.b.gray800,w:"b",children:t||O}),u]})]})},Pn=n(118),In=n(957),_n=function(e){var t=e.marks,n=e.dark,r=Object(f.a)().t,a=Object(Pn.a)().width,c=Object(b.useMemo)((function(){return Q()(t.filter((function(e){return parseInt(e.mark)&&ne.a.duration(Date.now()-e.date).asDays()<=365}))).sort((function(e,t){return e.date-t.date}))}),[t]),o=Object(b.useMemo)((function(){for(var e=new Array(c.length),t=0,n=0;n<c.length;n++)0==n?(t+=c[n].num_credits,e[n]=parseInt(c[n].mark)||0):(e[n]=(e[n-1]*t+(parseInt(c[n].mark)||0)*c[n].num_credits)/(t+c[n].num_credits),t+=c[n].num_credits);return e}),[c]),i=Object(b.useMemo)((function(){return{labels:c.map((function(e){return ne()(e.date).format("MMM D")})),datasets:[{data:o,color:function(){return d.b.accent300},strokeWidth:2*R.a}],legend:[r("weightedAverage")]}}),[c,o,r]);return 0==c.length?Object(H.jsx)(j.a,{style:{flexDirection:"row",justifyContent:"center"},children:Object(H.jsx)(B.a,{s:12,w:"m",c:n?d.b.gray200:d.b.gray700,children:"You'll see your progress when you get at least 1 permament mark."})}):Object(H.jsx)(In.a,{data:i,width:a,height:220,yAxisInterval:1,chartConfig:{backgroundColor:"#e26a00",backgroundGradientFrom:d.b.gray900,backgroundGradientTo:d.b.gray700,decimalPlaces:2,color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(255, 255, 255, "+e+")"},labelColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(255, 255, 255, "+e+")"},style:{borderRadius:16},propsForDots:{r:"6",strokeWidth:"2",stroke:d.b.accent300}},style:{borderRadius:4*R.a,transform:[{translateX:-16*R.a}]}})},En=["overview","permanentMarks","provisionalMarks"],Tn=function(e){var t=e.avg,n=e.dark,r=Object(f.a)().t;return Object(H.jsxs)(j.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(H.jsx)(Dn,{strokeWidth:8*R.a,radius:30*R.a,value:t,dark:n,max:30}),Object(H.jsxs)(j.a,{style:{marginLeft:16*R.a},children:[Object(H.jsxs)(B.a,{s:16*R.a,w:"m",c:n?d.b.gray100:d.b.gray800,style:{marginBottom:8*R.a},children:[r("yourAverageMark"),"*"]}),Object(H.jsxs)(B.a,{s:10*R.a,w:"r",c:n?d.b.gray300:d.b.gray600,children:["*",r("yourAverageMarkNotice")]})]})]})},Mn=function(e){var t,n=e.mark,r=e.provisional,a=e.dark,c=Object(b.useMemo)((function(){return zn(n,r,a)}),[n,r,a]),o=Object(f.a)().t;return Object(H.jsxs)(j.a,{style:{flexDirection:"row",padding:16*R.a,borderRadius:4*R.a,backgroundColor:a?d.b.gray700:d.b.gray200,alignItems:"flex-start"},children:[Object(H.jsxs)(j.a,{style:{flexDirection:"column",flex:1},children:[Object(H.jsxs)(j.a,{style:{flexDirection:"row"},children:[r?Object(H.jsx)(j.a,{style:{width:16*R.a,height:16*R.a,borderRadius:16*R.a,marginRight:8*R.a,backgroundColor:d.b.gray200,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:Object(H.jsx)(B.a,{s:10,w:"b",c:d.b.gray900,children:n.status})}):null,Object(H.jsx)(B.a,{s:12*R.a,w:"m",c:a?d.b.gray200:d.b.gray700,children:n.name})]}),Object(H.jsx)(j.a,{style:{flexDirection:r?"column":"row",marginTop:16*R.a},children:c})]}),parseInt(n.mark)?Object(H.jsx)(Dn,{radius:20*R.a,value:parseInt(n.mark),max:30,dark:a,children:("30 e lode"===(null==(t=n.mark)?void 0:t.toLowerCase())||parseInt(n.mark)>30)&&Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(B.a,{style:{marginTop:-4*R.a},s:8*R.a,c:a?d.b.gray100:d.b.gray800,w:"b",children:"LODE"})})}):Object(H.jsxs)(j.a,{style:[{padding:8*R.a,borderRadius:4*R.a,backgroundColor:d.b.accent300},!n.mark||n.failed||n.absent?{backgroundColor:d.b.red}:null],children:[n.failed?Object(H.jsx)(B.a,{s:12,w:"m",c:d.b.gray100,children:o("examFailed")}):null,n.absent?Object(H.jsx)(B.a,{s:12,w:"m",c:d.b.gray100,children:o("examAbsent")}):null,n.mark?Object(H.jsx)(B.a,{s:12,w:"m",c:d.b.gray100,children:n.mark}):null]})]})},zn=function(e,t,n){var r=t?["date","message"]:["date","credits"],a=[],c=[];return r.forEach((function(t){switch(t){case"date":a.push("calendar-time"),c.push(ne()(e.date).format("ll"));break;case"credits":a.push("north-star"),c.push(e.num_credits+" "+Wt.b.t("credits"));break;case"message":a.push("message"),c.push(e.message||"");break;default:a.push(""),c.push("")}})),r.map((function(e,r){return Object(H.jsxs)(j.a,{style:[{flexDirection:"row",alignItems:"message"==e?"flex-start":"center",flex:1},t&&r>0?{marginTop:8*R.a}:{}],children:[Object(H.jsx)(N.a,{name:a[r],size:16*R.a,color:n?d.b.gray200:d.b.gray700,style:{marginRight:8*R.a}}),Object(H.jsx)(B.a,{style:{marginRight:8*R.a},s:10*R.a,w:"r",c:n?d.b.gray200:d.b.gray700,children:c[r]||""})]})}))},Rn=function(){var e=Object(f.a)().t,t=Object(b.useContext)(z.a).dark,n=Object(O.c)((function(e){return e.courses})).marks,r=Object(b.useState)(En[0]),a=u()(r,2),c=a[0],o=a[1],i=Object(b.useMemo)((function(){return c==En[1]?n.permanent:c==En[2]?n.provisional:[]}),[n,c]),s=Object(b.useMemo)((function(){return function(e){var t=e.filter((function(e){return!!parseInt(e.mark||"")})),n=t.reduce((function(e,t){return e+t.num_credits}),0);return parseFloat((t.reduce((function(e,t){return e+parseInt(t.mark)*t.num_credits}),0)/n).toFixed(2))}(n.permanent)}),[n]),l=Object(b.useMemo)((function(){return X.a.create({container:{paddingTop:24*R.a,flex:1},paddingHorizontal:{paddingHorizontal:16*R.a},list:{paddingHorizontal:16*R.a,paddingBottom:24*R.a}})}),[]);return Object(H.jsxs)(Ge.a,{children:[Object(H.jsx)($e,{title:e("exams"),headerType:We.MAIN}),Object(H.jsx)(nt,{dark:t,adjusted:!0,items:En.map((function(t){return{label:e(t),value:t}})),onChange:function(e){return o(En[e])}}),Object(H.jsxs)(j.a,{style:l.container,children:[c==En[2]?Object(H.jsx)(j.a,{style:l.paddingHorizontal,children:Object(H.jsxs)(Xt.TouchableOpacity,{onPress:h()((function*(){return yield Object(ye.a)("https://didattica.polito.it/img/RE_stati.jpg")})),style:{flexDirection:"row",alignItems:"center",marginBottom:16*R.a},children:[Object(H.jsx)(N.a,{name:"help",size:12*R.a,color:t?d.b.gray200:d.b.gray700,style:{marginRight:8*R.a}}),Object(H.jsx)(B.a,{s:12,w:"m",c:t?d.b.gray200:d.b.gray700,children:e("statusCodeHelp")})]})}):null,c==En[0]?Object(H.jsxs)(j.a,{style:l.list,children:[Object(H.jsx)(Tn,{avg:s,dark:t}),Object(H.jsx)(j.a,{style:{height:1*R.a,backgroundColor:d.b.gray500,marginVertical:24*R.a}}),Object(H.jsx)(Ce,{title:e("progressOverTime"),dark:t,children:Object(H.jsx)(j.a,{children:Object(H.jsx)(_n,{marks:n.permanent||[],dark:t})})})]}):Object(H.jsx)(Z.a,{contentContainerStyle:l.list,data:i,keyExtractor:function(e){return e.date+e.name},renderItem:function(e){var n=e.item;return Object(H.jsx)(Mn,{mark:(En[1],n),provisional:c==En[2],dark:t})},ItemSeparatorComponent:function(){return Object(H.jsx)(j.a,{style:{height:16*R.a}})},ListEmptyComponent:Object(H.jsx)(ee,{})})]})]})},Ln=n(139),Nn=n(124),Bn=n(115),Hn=function(e){var t=e.examSession,n=Object(b.useContext)(z.a).device;return Object(H.jsx)(A,{title:Object(Wt.c)("confirmExamBooking"),onConfirm:function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};h()((function*(){var r=!1;try{yield Object(Nn.bookExamSession)(e,t.session_id,t.course_id),r=!0}catch(e){console.log(e)}finally{Bn.a.dispatch(Object(Qe.g)({visible:!0,message:Wt.b.t(r?"examsExamBookedToastMessage":"examsExamBookingErrorToastMessage"),type:r?"success":"err"})),n()}}))()}(n,t)},children:Object(H.jsx)(G.RenderHTMLSource,{source:{html:Object(Wt.c)("confirmExamBookingDialogMessage",{code:t.course_id,name:t.exam_name,date:ne()(t.date).format("lll"),rooms:t.rooms})}})})},Vn=function(e){var t=e.examSession,n=Object(b.useContext)(z.a).device;return Object(H.jsx)(A,{title:Object(Wt.c)("cancelExamBooking"),accentColor:d.b.red,icon:"alert-triangle",onConfirm:function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};h()((function*(){var r=!1;try{yield Object(Nn.cancelExamSession)(e,t.session_id,t.course_id),r=!0}catch(e){console.log(e)}finally{Bn.a.dispatch(Object(Qe.g)({visible:!0,message:Wt.b.t(r?"examsExamCanceledToastMessage":"examsExamCancelingErrorToastMessage"),type:r?"success":"err"})),n()}}))()}(n,t)},children:Object(H.jsx)(G.RenderHTMLSource,{source:{html:Object(Wt.c)("cancelExamBookingDialogMessage",{code:t.course_id,name:t.exam_name,date:ne()(t.date).format("lll"),rooms:t.rooms})}})})},An=n(83),Fn=function(e){return e.user_is_signed_up},Gn=function(e){return!e.user_is_signed_up&&0===e.error.id},Un=["allExams","myBookings","availableToBook","unavailableExams"];function Yn(){var e=Object(f.a)().t,t=Object(O.b)(),n=Object(b.useContext)(z.a),r=n.dark,a=n.device,c=Object(b.useContext)(S.a).setModal,o=Object(O.c)((function(e){return e.exams})),i=o.exams,s=o.getExamsStatus,l=Object(b.useState)(Un[0]),m=u()(l,2),y=m[0],p=m[1],x=Object(b.useState)("en"),v=u()(x,2),w=v[0],k=v[1];Object(b.useEffect)((function(){s.code!==g.b.IDLE&&s.code!==g.b.ERROR||t(Object(Ln.b)(a)),h()((function*(){switch(Object(An.a)()){case"en":k("en");break;case"it":k("it");break;default:k("en")}}))()}),[a,t,s.code]);var C=Object(b.useMemo)((function(){s.code!==g.b.PENDING&&t(Object(Ln.b)(a))}),[s,a,t]),D=Object(b.useMemo)((function(){switch(y){case Un[0]:return i;case Un[1]:return i.filter((function(e){return Fn(e)}));case Un[2]:return i.filter((function(e){return Gn(e)}));case Un[3]:return i.filter((function(e){return!(t=e).user_is_signed_up&&0!==t.error.id;var t}));default:return[]}}),[y,i]),P=function(t){return Object(H.jsxs)(j.a,{style:{flexDirection:"row"},children:[Object(H.jsxs)(j.a,{style:{flexDirection:"column",flex:1,padding:16*R.a,paddingRight:8*R.a,paddingBottom:8*R.a,borderTopLeftRadius:4*R.a,borderBottomLeftRadius:4*R.a,backgroundColor:r?d.b.gray700:d.b.gray200},children:[Object(H.jsxs)(j.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(H.jsx)(N.a,{name:t.user_is_signed_up?"circle-check":0===t.error.id?"circle":"circle-off",color:t.user_is_signed_up?d.b.green:0===t.error.id?d.b.accent200:d.b.red,size:24*R.a,style:{marginRight:8*R.a}}),Object(H.jsx)(B.a,{s:12*R.a,w:"m",c:r?d.b.gray200:d.b.gray700,children:t.exam_name})]}),Object(H.jsx)(j.a,{style:{flexDirection:"column",marginTop:16*R.a},children:["course","date","deadline","rooms"].map((function(n){return c=t,o="date"===(a=n)?"calendar-time":"course"===a?"grid-pattern":"type"===a?"writing":"deadline"===a?"alert-triangle":"rooms"===a?"map-pin":"user-circle",i="date"===a?ne()(c.date).format("lll")+" ("+ne()(c.date).fromNow()+")":"course"===a?c.course_id:"type"===a?c.type:"deadline"===a?e("bookingDeadline")+": "+ne()(c.signup_deadline).format("lll")+" ("+ne()(c.signup_deadline).fromNow()+")":"rooms"===a?c.rooms.join(", "):"(coming soon)",Object(H.jsxs)(j.a,{style:{flexDirection:"row",alignItems:"center",marginBottom:8*R.a},children:[Object(H.jsx)(N.a,{name:o,size:16*R.a,color:r?d.b.gray200:d.b.gray700,style:{marginRight:8*R.a}}),Object(H.jsx)(B.a,{numberOfLines:1,style:{marginRight:8*R.a},s:10*R.a,w:"r",c:r?d.b.gray200:d.b.gray700,children:i})]});var a,c,o,i}))}),0===t.error.id||""===t.error.eng&&""===t.error.ita?null:Object(H.jsx)(B.a,{s:10*R.a,w:"r",c:d.b.red,style:{marginVertical:8*R.a},children:"it"===w?t.error.ita:t.error.eng})]}),Object(H.jsx)(j.a,{style:{flexDirection:"column",justifyContent:"center",borderTopRightRadius:4*R.a,borderBottomRightRadius:4*R.a,backgroundColor:r?d.b.gray600:d.b.gray300},children:Gn(t)||Fn(t)?Object(H.jsx)(I.a,{onPress:function(){return c(Gn(t)?Object(H.jsx)(Hn,{examSession:t}):Object(H.jsx)(Vn,{examSession:t}))},children:Object(H.jsxs)(j.a,{style:{flexDirection:"column",alignItems:"center",padding:8*R.a},children:[Object(H.jsx)(j.a,{style:{marginBottom:4*R.a},children:Object(H.jsx)(N.a,{name:Gn(t)?"circle-plus":"circle-x",color:Gn(t)?d.b.accent300:d.b.red,size:20*R.a})}),Object(H.jsx)(B.a,{s:10*R.a,w:"m",c:Gn(t)?d.b.accent300:d.b.red,children:e(Gn(t)?"bookVerb":"cancel")})]})}):null})]})};return Object(H.jsxs)(Ge.a,{children:[Object(H.jsx)($e,{title:e("examSessions"),headerType:We.MAIN}),Object(H.jsx)(nt,{dark:r,adjusted:!0,items:Un.map((function(t){return{label:e(t),value:t}})),onChange:function(e){return p(Un[e])}}),Object(H.jsx)(Z.a,{contentContainerStyle:{paddingTop:24*R.a,paddingHorizontal:16*R.a,paddingBottom:24*R.a},data:D,keyExtractor:function(e){return e.session_id+e.course_id+e.date},renderItem:function(e){var t=e.item;return P(t)},ItemSeparatorComponent:function(){return Object(H.jsx)(j.a,{style:{height:16*R.a}})},ListEmptyComponent:Object(H.jsx)(ee,{}),refreshing:s.code==g.b.PENDING,refreshControl:Object(H.jsx)(q.a,{refreshing:s.code==g.b.PENDING,onRefresh:C})})]})}var Wn=function(){return Object(H.jsx)(j.a,{})},qn=function(){return Object(H.jsx)(j.a,{})},Xn=function(){return Object(H.jsx)(j.a,{})};function Jn(e){var t=e.navigation,n=Object(f.a)().t,r=Object(b.useContext)(z.a).dark,a=Object(O.c)((function(e){return e.courses.courses})),c=Object(b.useCallback)((function(e){t.navigate("Course",{courseCode:e.basicInfo.code+e.basicInfo.name})}),[t]),o=Object(b.useMemo)((function(){return X.a.create({container:{marginTop:24*R.a,paddingHorizontal:16*R.a,paddingBottom:16*R.a}})}),[]);return Object(H.jsxs)(Ge.a,{children:[Object(H.jsx)($e,{title:n("courses"),headerType:We.MAIN}),Object(H.jsx)(P.a,{children:Object(H.jsxs)(j.a,{style:o.container,children:[a.filter((function(e){return e.isMain})).map((function(e){return Object(H.jsx)(Jt,{dark:r,onPress:function(){return c(e)},title:e.basicInfo.name},e.basicInfo.code+e.basicInfo.name)})),a.filter((function(e){return!e.isMain})).length>0?Object(H.jsx)(Ce,{dark:r,title:n("otherCourses"),style:{marginTop:8},children:a.filter((function(e){return!e.isMain})).map((function(e){return Object(H.jsx)(Jt,{dark:r,onPress:function(){return c(e)},title:e.basicInfo.name},e.basicInfo.code+e.basicInfo.name)}))}):null]})})]})}var Qn=n(286),Kn=function(e){var t,n=e.selected,r=e.onChange,a=Object(_.a)(1),c=Object(E.a)(((t=function(){return{width:20*R.a*a.value,height:20*R.a*a.value,borderRadius:4*R.a,backgroundColor:d.b.accent300,alignItems:"center",justifyContent:"center"}})._closure={p:R.a,offset:a,colors:{accent300:d.b.accent300}},t.asString="function _f(){const{p,offset,colors}=jsThis._closure;{return{width:20*p*offset.value,height:20*p*offset.value,borderRadius:4*p,backgroundColor:colors.accent300,alignItems:'center',justifyContent:'center'};}}",t.__workletHash=0xf364d967be,t.__location="/home/runner/work/open-polito/open-polito/src/ui/core/Checkbox.tsx (21:37)",t.__optimalization=3,t));return Object(b.useEffect)((function(){a.value=n?Object(T.a)(1,{duration:100}):Object(T.a)(0,{duration:100})}),[n]),Object(H.jsx)(ce.a,{style:{padding:4*R.a},onPress:function(){r(!n)},children:Object(H.jsx)(j.a,{style:{width:20*R.a,height:20*R.a,backgroundColor:d.b.gray700,borderColor:d.b.gray600,borderWidth:1*R.a,borderRadius:4*R.a,alignItems:"center",justifyContent:"center"},children:Object(H.jsx)(M.default.View,{style:[c],children:Object(H.jsx)(N.a,{name:"check",size:12*R.a,color:d.b.gray50})})})})};function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $n=function(e){var t,n=e.dark,r=e.n,a=e.handlePress,c=e.courseName,o=e.selecting,i=e.setSelecting,s=e.selected,l=e.onSelectionChange,u=Object(_.a)(0),d=Object(E.a)(((t=function(){return{width:32*R.a*u.value,transform:[{scale:u.value}],alignItems:"flex-start"}})._closure={p:R.a,offset:u},t.asString="function _f(){const{p,offset}=jsThis._closure;{return{width:32*p*offset.value,transform:[{scale:offset.value}],alignItems:'flex-start'};}}",t.__workletHash=0xdf564b7d8b3,t.__location="/home/runner/work/open-polito/open-polito/src/screens/Notifications.tsx (72:45)",t.__optimalization=3,t));return Object(b.useEffect)((function(){u.value=Object(T.a)(o?1:0,{duration:150})}),[o]),Object(H.jsx)(j.a,{style:{flex:1},children:Object(H.jsx)(Xt.LongPressGestureHandler,{onHandlerStateChange:function(e){e.nativeEvent.state===Xt.State.ACTIVE&&(o||(i(!0),l(r.id,!0)))},children:Object(H.jsxs)(M.default.View,{style:{marginBottom:24*R.a,flexDirection:"row",alignItems:"center"},children:[Object(H.jsx)(M.default.View,{style:[d],children:Object(H.jsx)(Kn,{selected:s,onChange:function(e){return l(r.id,e)}})}),Object(H.jsx)(ce.a,{style:{flex:1},onPress:function(){return a(r.id)},children:Object(H.jsx)(Re,{type:r.topic,notification:r,dark:n,read:r.is_read,courseName:c})})]})})})},er=function(){var e=Object(f.a)().t,t=Object(O.b)(),n=[{label:e("allF"),value:"all"},{label:e("readF"),value:"read"},{label:e("unreadF"),value:"unread"},{label:e("directAlerts"),value:"direct"},{label:e("courses"),value:"course"},{label:e("material"),value:"material"}],r=Object(b.useMemo)((function(){return X.a.create({container:{paddingTop:24*R.a,flex:1},paddingHorizontal:{paddingHorizontal:16*R.a},list:{paddingHorizontal:16*R.a,paddingBottom:24*R.a}})}),[]),a=Object(O.c)((function(e){return e.user})),c=a.notifications,o=a.getNotificationsStatus,i=Object(O.c)((function(e){return e.courses})),l=Object(b.useContext)(z.a),m=l.device,y=l.dark,p=Object(b.useState)("all"),x=u()(p,2),v=x[0],w=x[1],k=Object(b.useState)(!1),C=u()(k,2),S=C[0],D=C[1],P=function(){D(!0),t(Object(yt.d)(m))};Object(b.useEffect)((function(){S&&o.code!==g.b.PENDING&&D(!1)}),[c,S,o.code,i]);var I,L=function(e){var t=c.findIndex((function(t){return t.id==e}));if(-1!==t&&!c[t].is_read){h()((function*(){yield Object(Ee.markNotificationRead)(m,e)}))();var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c[t]);n.is_read=!0,Bn.a.dispatch(Object(yt.f)([].concat(Q()(c.slice(0,t)),[n],Q()(c.slice(t+1)))))}},V=Object(b.useMemo)((function(){switch(v){case"all":return c;case"read":return c.filter((function(e){return e.is_read}));case"unread":return c.filter((function(e){return!e.is_read}));case"direct":return c.filter((function(e){return e.topic===Ee.NotificationType.DIRECT}));case"course":return c.filter((function(e){return e.topic===Ee.NotificationType.NOTICE}));case"material":return c.filter((function(e){return e.topic===Ee.NotificationType.MATERIAL}));default:return[]}}),[c,v]),A=Object(b.useState)(!1),F=u()(A,2),G=F[0],U=F[1],Y=Object(b.useState)([]),W=u()(Y,2),J=W[0],K=W[1],$=Object(_.a)(1),te=Object(E.a)(((I=function(){return{transform:[{scale:.75+.25*$.value},{translateY:128*R.a*(1-$.value)}]}})._closure={tabOffset:$,p:R.a},I.asString="function _f(){const{tabOffset,p}=jsThis._closure;{return{transform:[{scale:0.75+0.25*tabOffset.value},{translateY:128*p*(1-tabOffset.value)}]};}}",I.__workletHash=4306454263167,I.__location="/home/runner/work/open-polito/open-polito/src/screens/Notifications.tsx (251:37)",I.__optimalization=3,I));Object(b.useEffect)((function(){$.value=Object(T.a)(G?1:0,{duration:200})}),[G]),Object(b.useEffect)((function(){G||K([])}),[G]);Object(b.useEffect)((function(){0===J.length&&U(!1)}),[J]);var ne=Object(b.useCallback)((function(){return G?(U(!1),!0):(K([]),!1)}),[G]);Object(b.useEffect)((function(){K([]),U(!1)}),[v]),Object(b.useEffect)((function(){return Qn.a.addEventListener("hardwareBackPress",ne),function(){U(!1),K([]),Qn.a.removeEventListener("hardwareBackPress",ne)}}),[]);var re=Object(b.useState)(!1),ae=u()(re,2),oe=ae[0],ie=ae[1],se=function(){for(var e=!0,t=0;t<V.length;t++)if(!J.includes(V[t].id)){e=!1;break}return e},ue=[{icon:se()?"circle-minus":"circle-plus",value:"selectAll",label:se()?e("deselectAll"):e("selectAll"),action:function(){return se()?K([]):K(V.map((function(e){return e.id})))}},{icon:oe?"loading":"trash",value:"delete",label:e("delete"),action:function(){h()((function*(){ie(!0);for(var e=0;e<J.length;e++)yield Object(Ee.deleteNotification)(m,J[e]);setTimeout((function(){ie(!1),U(!1)}),500),P()}))()}},{icon:"checks",value:"markAsRead",label:e("markAsRead"),action:function(){J.forEach((function(e){return L(e)})),U(!1)}}];return Object(H.jsxs)(Ge.a,{children:[Object(H.jsx)(M.default.View,{style:[te,{position:"absolute",bottom:16*R.a,left:0,right:0,zIndex:1e3,backgroundColor:y?d.b.gray700:d.b.gray200,paddingVertical:8*R.a,marginHorizontal:16*R.a,borderRadius:16*R.a,borderWidth:1*R.a,borderColor:y?d.b.gray600:d.b.gray300,flexDirection:"row",justifyContent:"center",alignItems:"center"}],children:ue.map((function(e){return Object(H.jsx)(j.a,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:Object(H.jsxs)(ce.a,{disabled:"loading"===e.icon,style:{justifyContent:"center",alignItems:"center"},onPress:e.action,children:["loading"===e.icon?Object(H.jsx)(le.a,{color:d.b.accent300,size:20*R.a}):Object(H.jsx)(N.a,{name:e.icon,color:d.b.accent300,size:20*R.a}),Object(H.jsx)(j.a,{style:{height:4*R.a}}),Object(H.jsx)(B.a,{c:d.b.accent300,w:"r",s:10*R.a,children:e.label})]})})}))}),Object(H.jsx)($e,{headerType:We.MAIN,title:e("notifications")}),Object(H.jsx)(nt,{adjusted:!0,dark:y,items:n,onChange:function(e){return w(n[e].value)}}),Object(H.jsx)(j.a,{style:r.container,children:Object(H.jsx)(Z.a,{contentContainerStyle:r.paddingHorizontal,data:V,keyExtractor:function(e){return e.id.toString()},ListEmptyComponent:Object(H.jsx)(ee,{}),refreshControl:Object(H.jsx)(q.a,{refreshing:S,onRefresh:P}),initialNumToRender:10,maxToRenderPerBatch:10,renderItem:function(e){return Object(H.jsx)($n,{dark:y,n:e.item,handlePress:function(e){return L(e)},courseName:(t=e.item,(null==(n=i.courses.find((function(e){return e.basicInfo.id_incarico===t.course})))?void 0:n.basicInfo.name)||""),selecting:G,setSelecting:function(e){return U(e)},selected:J.includes(e.item.id),onSelectionChange:function(e,t){return function(e,t){K(t?[].concat(Q()(J),[e]):J.filter((function(t){return t!==e})))}(e,t)}});var t,n}})})]})},tr=n(45);function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rr=Object(Rt.a)();function ar(){var e=Object(O.b)(),t=Object(b.useContext)(z.a),n=t.dark,r=t.device,a=t.size,c=Object(O.c)((function(e){return e.user})).getNotificationsStatus,o=Object(O.c)((function(e){return e.session})).loginStatus,i=Object(O.c)((function(e){return e.courses})),l=i.courses,u=i.getRecentMaterialStatus,j=i.loadCoursesStatus;Object(b.useEffect)((function(){o.code===g.b.IDLE&&e(Object(Qe.b)({method:"token",device:r}))}),[o,r,e]),Object(b.useEffect)((function(){c.code===g.b.IDLE&&o.code===g.b.SUCCESS&&e(Object(yt.d)(r))}),[c,o]),Object(b.useEffect)((function(){o.code===g.b.SUCCESS&&(e(Object(Fe.d)(r)),e(Object(yt.e)(r)),h()((function*(){if("android"===y.a.OS&&"debug"!==p.a.VARIANT){var e=yield zt.a.NotificationModule.getToken();yield Object(Ee.registerPushNotifications)(r,e)}}))())}),[o]),Object(b.useEffect)((function(){h()((function*(){j.code===g.b.SUCCESS&&(e(Object(Fe.e)(Object(g.e)())),l.forEach((function(t){t.status.code===g.b.IDLE&&e(Object(Fe.c)({basicCourseInfo:t.basicInfo,device:r}))})))}))()}),[j]),Object(b.useEffect)((function(){if(u.code===g.b.IDLE&&j.code===g.b.SUCCESS){var t=!0;l.forEach((function(e){e.status.code!==g.b.SUCCESS&&(t=!1)})),t&&(e(Object(Fe.e)(Object(g.g)())),e(Object(Fe.b)()))}}),[l,u]);var d=Object(b.useCallback)((function(e){return Object(H.jsx)(Yt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dark:n},e))}),[n]);return Object(H.jsxs)(rr.Navigator,{screenOptions:{headerShown:!1,drawerType:a>=tr.a.lg?"permanent":"front"},useLegacyImplementation:!0,drawerContent:function(e){return d(e)},children:[Object(H.jsx)(rr.Screen,{name:"Home",component:mt}),Object(H.jsx)(rr.Screen,{name:"Email",component:vt}),Object(H.jsx)(rr.Screen,{name:"Notifications",component:er}),Object(H.jsx)(rr.Screen,{name:"Settings",component:Et}),Object(H.jsx)(rr.Screen,{name:"Courses",component:Jn}),Object(H.jsx)(rr.Screen,{name:"Material",component:Mt}),Object(H.jsx)(rr.Screen,{name:"Bookings",component:tn}),Object(H.jsx)(rr.Screen,{name:"Timetable",component:Sn}),Object(H.jsx)(rr.Screen,{name:"Exams",component:Rn}),Object(H.jsx)(rr.Screen,{name:"ExamSessions",component:Yn}),Object(H.jsx)(rr.Screen,{name:"Maps",component:Wn}),Object(H.jsx)(rr.Screen,{name:"Classrooms",component:qn}),Object(H.jsx)(rr.Screen,{name:"People",component:Xn})]})}var cr=Object(W.a)(),or=function(){return Object(H.jsx)(Y.a,{children:Object(H.jsxs)(cr.Navigator,{screenOptions:{headerShown:!1},children:[Object(H.jsx)(cr.Screen,{name:"HomeRouter",component:ar}),Object(H.jsx)(cr.Screen,{name:"Search",component:ut}),Object(H.jsx)(cr.Screen,{name:"Course",component:ct}),Object(H.jsx)(cr.Screen,{name:"Video",component:jt})]})})},ir=n(653);function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ur(){var e=Object(f.a)().t,t=Object(b.useContext)(S.a).setModal,n=Object(b.useContext)(z.a).dark;Object(b.useEffect)((function(){Object(An.d)(Object(An.a)())}),[]);var r=Object(b.useState)({checked:!1,acceptedUpdate:!1}),a=u()(r,2),c=a[0],o=a[1];Object(b.useEffect)((function(){c.checked||k().then((function(e){return o((function(t){return lr(lr({},t),{},{releaseData:e,checked:!0})}))})),C()}),[c.checked]),Object(b.useEffect)((function(){if(c.releaseData){var r=Object(F.getLocales)()[0].languageCode,a=c.releaseData.notes.find((function(e){return e.language===r}));t(Object(H.jsxs)(A,{title:e("newUpdateModalTitle"),icon:"download",accentColor:"#2dba2a",onConfirm:function(){return o((function(e){return lr(lr({},e),{},{acceptedUpdate:!0})}))},children:[Object(H.jsx)(B.a,{s:12*R.a,w:"m",c:n?d.b.gray100:d.b.gray800,children:e("newUpdateModalText")+"\n\n"+e("newUpdateModalNotes")+"\n"}),"text"===c.releaseData.format?((null==a?void 0:a.content)||[]).map((function(e){return Object(H.jsx)(B.a,{s:12*R.a,w:"r",c:n?d.b.gray100:d.b.gray800,children:"  • "+e})})):((null==a?void 0:a.content)||[]).map((function(e){return Object(H.jsx)(G.RenderHTMLSource,{source:{html:e}})}))]}))}}),[c.releaseData,n,t,e]);var i=Object(O.c)((function(e){return e.session})).authStatus,s=Object(O.c)((function(e){return e.session.config})).logging,l=Object(b.useState)(null),m=u()(l,2),h=m[0],y=m[1];Object(b.useEffect)((function(){y(s?p({text:e("Logging enabled"),type:"warn"}):null)}),[s,e]);var p=function(e){var t=e.text,n=void 0===t?"":t,r=e.type,a=void 0===r?"warn":r;return Object(H.jsx)(j.a,{style:{backgroundColor:"warn"==a?d.b.orange:d.b.black,paddingVertical:4,flexDirection:"row",justifyContent:"center"},children:Object(H.jsx)(B.a,{s:10*R.a,w:"m",c:d.b.white,children:n})})},x=Object(b.useMemo)((function(){return Object(H.jsxs)(H.Fragment,{children:[h,c.acceptedUpdate?Object(H.jsx)(U,{releaseData:c.releaseData}):i!==g.a.NOT_VALID?Object(H.jsx)(or,{}):null]})}),[i,h,c]);return"web"===Je.a?Object(H.jsx)(ir.default,{children:x}):x}}}]);
//# sourceMappingURL=5.b263d4b5.chunk.js.map