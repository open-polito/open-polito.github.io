(this.webpackJsonp=this.webpackJsonp||[]).push([[13],{122:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(57)),l=a(n(18)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),i=n(7),u=a(n(16)),f=a(n(25)),d=n(17),c=["dark","icon","initiallyFocused","inputStyle","style"];function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var p=function(e){var t=e.dark,n=e.icon,a=void 0===n?"":n,s=e.initiallyFocused,p=void 0!==s&&s,g=e.inputStyle,y=void 0===g?{}:g,m=e.style,v=void 0===m?{}:m,w=(0,l.default)(e,c),O=(0,o.useRef)(null);(0,o.useEffect)((function(){var e;p&&(null==(e=O.current)||e.focus())}),[p]);var b=(0,o.useMemo)((function(){return i.StyleSheet.create({textInputContainer:{backgroundColor:t?u.default.gray700:u.default.gray200,height:40*d.p,paddingHorizontal:12*d.p,borderRadius:4*d.p,flexDirection:"row",alignItems:"center"},textInput:{padding:0,fontFamily:"Inter-Regular",fontSize:10*d.p,flex:1,color:t?u.default.gray200:u.default.gray700}})}),[t]);return o.default.createElement(i.View,{style:Object.assign({},b.textInputContainer,v)},a?o.default.createElement(f.default,{name:a,size:18*d.p,color:t?u.default.gray200:u.default.gray700,style:{marginRight:8*d.p}}):null,o.default.createElement(i.TextInput,(0,r.default)({ref:function(e){return O.current=e}},w,{style:Object.assign({},b.textInput,y),placeholderTextColor:t?u.default.gray300:u.default.gray600})))};t.default=p},1357:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=(0,i.useTranslation)().t,n=(0,u.useDispatch)(),a=(0,u.useSelector)((function(e){return e.session.loginStatus})),h=(0,o.useContext)(f.DeviceContext),x=(0,o.useState)(""),k=(0,l.default)(x,2),P=k[0],D=k[1],j=(0,o.useState)(""),V=(0,l.default)(j,2),M=V[0],R=V[1],_=(0,o.useMemo)((function(){return"web"===b.genericPlatform}),[]),I=(0,o.useState)(),C=(0,l.default)(I,2),N=(C[0],C[1]),T=(0,o.useState)(),W=(0,l.default)(T,2),A=W[0],L=W[1];(0,o.useEffect)((function(){(0,b.getOSIdentifier)().then((function(e){return N(e)})),null==b.platform||b.platform.then((function(e){return L(e)}))}),[]);var z=function(){var e=(0,r.default)((function*(){switch((0,O.validateLoginInput)(P,M)){case O.LoginValidationResult.OK:break;case O.LoginValidationResult.NO_USER:return void n((0,d.setToast)({message:t("noUsernameProvided"),type:"err",visible:!0}));case O.LoginValidationResult.NO_PASSWORD:return void n((0,d.setToast)({message:t("noPasswordProvided"),type:"err",visible:!0}));case O.LoginValidationResult.INVALID_USERNAME:return void n((0,d.setToast)({message:t("invalidUsernameProvided"),type:"err",visible:!0}))}yield n((0,d.login)({method:"password",username:P,password:M,device:h.device}))}));return function(){return e.apply(this,arguments)}}(),B=(0,o.useMemo)((function(){return s.StyleSheet.create({backgroundContainer:{position:"absolute",top:0,left:0},container:{flex:1,flexDirection:_&&h.size>=E.DeviceSize.lg?"row":"column",marginTop:80*v.p,paddingHorizontal:16*v.p,paddingBottom:16*v.p},flex1:{flex:1},field:{flexDirection:"row",alignItems:"center",marginBottom:16*v.p},fieldText:{marginLeft:16*v.p,width:"85%"},loginSection:{flex:1,flexDirection:"column",justifyContent:"center"},loginTitle:{marginBottom:32*v.p},or:{flexDirection:"row",justifyContent:"center",alignItems:"center",marginBottom:16*v.p},line:{flex:1,height:1,backgroundColor:h.dark?g.default.gray100:g.default.gray800},lineVerticalWithMargin:{width:1,marginHorizontal:32*v.p,backgroundColor:h.dark?g.default.gray300:g.default.gray600},orText:{marginHorizontal:8*v.p}})}),[h.dark,h.size,_]);return o.default.createElement(c.default,null,o.default.createElement(s.View,{style:B.backgroundContainer}),o.default.createElement(s.View,{style:B.container},o.default.createElement(s.View,{style:[B.flex1]},o.default.createElement(p.default,{c:h.dark?g.default.gray100:g.default.gray800,w:"b",s:24*v.p,style:{marginBottom:16*v.p}},"Welcome to ","\n","Open PoliTo"),o.default.createElement(p.default,{c:h.dark?g.default.gray200:g.default.gray700,w:"m",s:16*v.p},t("caption")),_&&o.default.createElement(s.View,{style:[B.flex1,{flexDirection:"column",justifyContent:"center"}]},o.default.createElement(s.View,{style:{alignItems:"flex-start"}},o.default.createElement(s.View,{style:{alignItems:"stretch",backgroundColor:h.dark?g.default.gray700:g.default.gray200,padding:16*v.p,borderRadius:8*v.p}},o.default.createElement(s.View,{style:{alignItems:"flex-start"}},o.default.createElement(p.default,{c:h.dark?g.default.gray100:g.default.gray800,w:"b",s:(h.size>=E.DeviceSize.lg?24:14)*v.p,style:{marginBottom:8*v.p}},t("downloadNativeApp")),o.default.createElement(p.default,{c:h.dark?g.default.gray200:g.default.gray700,w:"m",s:(h.size>=E.DeviceSize.lg?16:12)*v.p,style:{marginBottom:16*v.p}},t("downloadNativeAppDescription"))),o.default.createElement(m.default,{onPress:function(){(0,S.default)("https://github.com/open-polito/open-polito/releases/latest")}},o.default.createElement(s.View,{style:{flex:1}},o.default.createElement(p.default,{s:12*v.p,w:"b",c:g.default.gray50},"DOWNLOAD"),o.default.createElement(p.default,{s:12*v.p,w:"r",c:g.default.gray50},null==A||null==(e=A.os)?void 0:e.toString()))))))),_&&o.default.createElement(s.View,{style:B.lineVerticalWithMargin}),o.default.createElement(s.View,{style:[B.loginSection,B.flex1]},_&&o.default.createElement(s.View,{style:B.loginTitle},o.default.createElement(p.default,{c:h.dark?g.default.gray100:g.default.gray800,w:"b",s:24*v.p,style:{marginBottom:8*v.p}},t("login")),o.default.createElement(p.default,{c:h.dark?g.default.gray200:g.default.gray700,w:"m",s:12*v.p,style:{marginBottom:16*v.p}},t("loginWebSpecificDescription"))),o.default.createElement(y.default,{dark:h.dark,textContentType:"emailAddress",icon:"user-circle",placeholder:t("userPlaceholder"),style:{marginBottom:16*v.p},onChangeText:function(e){D(e)}}),o.default.createElement(y.default,{dark:h.dark,textContentType:"password",secureTextEntry:!0,icon:"lock",placeholder:t("passwordPlaceholder"),style:{marginBottom:16*v.p},onChangeText:function(e){R(e)}}),o.default.createElement(m.default,{loading:a.code===w.STATUS.PENDING,text:t("login"),style:{marginBottom:16*v.p},onPress:function(){z()}}))))};var r=a(n(0)),l=a(n(15)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),i=n(33),u=n(28),f=n(22),d=n(54);n(1358);var c=a(n(44)),s=n(7),p=a(n(21)),g=a(n(16)),y=a(n(122)),m=a(n(250)),v=n(17),w=n(55),O=n(1359),b=n(116),E=n(246),S=a(n(115));function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}},1358:function(e,t){},1359:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.validateLoginInput=t.LoginValidationResult=void 0,t.LoginValidationResult=n,function(e){e[e.OK=0]="OK",e[e.NO_USER=1]="NO_USER",e[e.NO_PASSWORD=2]="NO_PASSWORD",e[e.INVALID_USERNAME=3]="INVALID_USERNAME"}(n||(t.LoginValidationResult=n={}));t.validateLoginInput=function(e,t){if(""===e)return n.NO_USER;if(""===t)return n.NO_PASSWORD;var a=new RegExp("[sS]\\d+"),r=new RegExp(".+@studenti.polito.it");return a.test(e)||r.test(e)?n.OK:n.INVALID_USERNAME}},44:function(e,t,n){var a=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(5)),l=n(7),o=a(n(16)),i=n(22);function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var f=function(e){var t=e.children,n=(0,r.useContext)(i.DeviceContext),a=n.dark,u=n.chosenTheme,f=(0,r.useMemo)((function(){return l.StyleSheet.create({screen:{backgroundColor:a?o.default.gray800:o.default.gray100,flex:1}})}),[a]);return r.default.createElement(l.View,{style:{flex:1}},r.default.createElement(l.StatusBar,{barStyle:"system"==u?"default":a?"dark-content":"light-content"}),r.default.createElement(l.View,{style:f.screen},t))};t.default=f}}]);
//# sourceMappingURL=13.ab0d5551.chunk.js.map