(this.webpackJsonp=this.webpackJsonp||[]).push([[13],{121:function(e,t,n){var r=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(57)),l=r(n(18)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e,n&&n.set(e,r);return r}(n(5)),i=n(7),u=r(n(16)),f=r(n(25)),d=n(17),c=["dark","icon","initiallyFocused","inputStyle","style"];function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var p=function(e){var t=e.dark,n=e.icon,r=void 0===n?"":n,s=e.initiallyFocused,p=void 0!==s&&s,g=e.inputStyle,y=void 0===g?{}:g,m=e.style,v=void 0===m?{}:m,w=(0,l.default)(e,c),O=(0,o.useRef)(null);(0,o.useEffect)((function(){var e;p&&(null==(e=O.current)||e.focus())}),[p]);var E=(0,o.useMemo)((function(){return i.StyleSheet.create({textInputContainer:{backgroundColor:t?u.default.gray700:u.default.gray200,height:40*d.p,paddingHorizontal:12*d.p,borderRadius:4*d.p,flexDirection:"row",alignItems:"center"},textInput:{padding:0,fontFamily:"Inter-Regular",fontSize:10*d.p,flex:1,color:t?u.default.gray200:u.default.gray700}})}),[t]);return o.default.createElement(i.View,{style:Object.assign({},E.textInputContainer,v)},r?o.default.createElement(f.default,{name:r,size:18*d.p,color:t?u.default.gray200:u.default.gray700,style:{marginRight:8*d.p}}):null,o.default.createElement(i.TextInput,(0,a.default)({ref:function(e){return O.current=e}},w,{style:Object.assign({},E.textInput,y),placeholderTextColor:t?u.default.gray300:u.default.gray600})))};t.default=p},1356:function(e,t,n){var r=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,i.useTranslation)().t,t=(0,u.useDispatch)(),n=(0,u.useSelector)((function(e){return e.session.loginStatus})),r=(0,o.useContext)(f.DeviceContext),b=(0,o.useState)(""),x=(0,l.default)(b,2),h=x[0],S=x[1],k=(0,o.useState)(""),P=(0,l.default)(k,2),j=P[0],D=P[1],M=(0,o.useMemo)((function(){return"web"===E.genericPlatform}),[]),V=(0,o.useState)(),_=(0,l.default)(V,2),I=(_[0],_[1]),R=(0,o.useState)(),N=(0,l.default)(R,2),C=N[0],T=N[1];(0,o.useEffect)((function(){(0,E.getOSIdentifier)().then((function(e){return I(e)})),null==E.platform||E.platform.then((function(e){return T(e)}))}),[]);var A=function(){var n=(0,a.default)((function*(){switch((0,O.validateLoginInput)(h,j)){case O.LoginValidationResult.OK:break;case O.LoginValidationResult.NO_USER:return void t((0,d.setToast)({message:e("noUsernameProvided"),type:"err",visible:!0}));case O.LoginValidationResult.NO_PASSWORD:return void t((0,d.setToast)({message:e("noPasswordProvided"),type:"err",visible:!0}));case O.LoginValidationResult.INVALID_USERNAME:return void t((0,d.setToast)({message:e("invalidUsernameProvided"),type:"err",visible:!0}))}yield t((0,d.login)({method:"password",username:h,password:j,device:r.device}))}));return function(){return n.apply(this,arguments)}}(),W=(0,o.useMemo)((function(){return s.StyleSheet.create({backgroundContainer:{position:"absolute",top:0,left:0},container:{flex:1,flexDirection:M?"row":"column",marginTop:80*v.p,paddingHorizontal:16*v.p,paddingBottom:16*v.p},flex1:{flex:1},field:{flexDirection:"row",alignItems:"center",marginBottom:16*v.p},fieldText:{marginLeft:16*v.p,width:"85%"},loginSection:{flex:1,flexDirection:"column",justifyContent:"center"},loginTitle:{marginBottom:32*v.p},or:{flexDirection:"row",justifyContent:"center",alignItems:"center",marginBottom:16*v.p},line:{flex:1,height:1,backgroundColor:r.dark?g.default.gray100:g.default.gray800},lineVerticalWithMargin:{width:1,marginHorizontal:32*v.p,backgroundColor:r.dark?g.default.gray300:g.default.gray600},orText:{marginHorizontal:8*v.p}})}),[r.dark,M]);return o.default.createElement(c.default,null,o.default.createElement(s.View,{style:W.backgroundContainer}),o.default.createElement(s.View,{style:W.container},o.default.createElement(s.View,{style:[W.flex1]},o.default.createElement(p.default,{c:r.dark?g.default.gray100:g.default.gray800,w:"b",s:24*v.p,style:{marginBottom:16*v.p}},"Welcome to ","\n","Open PoliTo"),o.default.createElement(p.default,{c:r.dark?g.default.gray200:g.default.gray700,w:"m",s:16*v.p},e("caption")),M&&o.default.createElement(s.View,{style:[W.flex1,{flexDirection:"column",justifyContent:"center"}]},o.default.createElement(s.View,{style:{alignItems:"flex-start"}},o.default.createElement(s.View,{style:{alignItems:"stretch"}},o.default.createElement(s.View,{style:{alignItems:"flex-start"}},o.default.createElement(p.default,{c:r.dark?g.default.gray100:g.default.gray800,w:"b",s:24*v.p,style:{marginBottom:8*v.p}},e("downloadNativeApp")),o.default.createElement(p.default,{c:r.dark?g.default.gray200:g.default.gray700,w:"m",s:16*v.p,style:{marginBottom:16*v.p}},e("downloadNativeAppDescription"))),o.default.createElement(m.default,null,o.default.createElement(s.View,{style:{flex:1}},o.default.createElement(p.default,{s:12*v.p,w:"b",c:g.default.gray50},"DOWNLOAD"),o.default.createElement(p.default,{s:12*v.p,w:"r",c:g.default.gray50},"9MB - "+(null==C?void 0:C.os)))))))),M&&o.default.createElement(s.View,{style:W.lineVerticalWithMargin}),o.default.createElement(s.View,{style:[W.loginSection,W.flex1]},M&&o.default.createElement(s.View,{style:W.loginTitle},o.default.createElement(p.default,{c:r.dark?g.default.gray100:g.default.gray800,w:"b",s:24*v.p,style:{marginBottom:16*v.p}},e("login"))),o.default.createElement(y.default,{dark:r.dark,textContentType:"emailAddress",icon:"user-circle",placeholder:e("userPlaceholder"),style:{marginBottom:16*v.p},onChangeText:function(e){S(e)}}),o.default.createElement(y.default,{dark:r.dark,textContentType:"password",secureTextEntry:!0,icon:"lock",placeholder:e("passwordPlaceholder"),style:{marginBottom:16*v.p},onChangeText:function(e){D(e)}}),o.default.createElement(m.default,{loading:n.code===w.STATUS.PENDING,text:e("login"),style:{marginBottom:16*v.p},onPress:function(){A()}}))))};var a=r(n(0)),l=r(n(15)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e,n&&n.set(e,r);return r}(n(5)),i=n(33),u=n(28),f=n(22),d=n(54);n(1357);var c=r(n(44)),s=n(7),p=r(n(21)),g=r(n(16)),y=r(n(121)),m=r(n(249)),v=n(17),w=n(55),O=n(1358),E=n(115);function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}},1357:function(e,t){},1358:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.validateLoginInput=t.LoginValidationResult=void 0,t.LoginValidationResult=n,function(e){e[e.OK=0]="OK",e[e.NO_USER=1]="NO_USER",e[e.NO_PASSWORD=2]="NO_PASSWORD",e[e.INVALID_USERNAME=3]="INVALID_USERNAME"}(n||(t.LoginValidationResult=n={}));t.validateLoginInput=function(e,t){if(""===e)return n.NO_USER;if(""===t)return n.NO_PASSWORD;var r=new RegExp("[sS]\\d+"),a=new RegExp(".+@studenti.polito.it");return r.test(e)||a.test(e)?n.OK:n.INVALID_USERNAME}},44:function(e,t,n){var r=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e,n&&n.set(e,r);return r}(n(5)),l=n(7),o=r(n(16)),i=n(22);function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var f=function(e){var t=e.children,n=(0,a.useContext)(i.DeviceContext),r=n.dark,u=n.chosenTheme,f=(0,a.useMemo)((function(){return l.StyleSheet.create({screen:{backgroundColor:r?o.default.gray800:o.default.gray100,flex:1}})}),[r]);return a.default.createElement(l.View,{style:{flex:1}},a.default.createElement(l.StatusBar,{barStyle:"system"==u?"default":r?"dark-content":"light-content"}),a.default.createElement(l.View,{style:f.screen},t))};t.default=f}}]);
//# sourceMappingURL=13.140dd6e5.chunk.js.map